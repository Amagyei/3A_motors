/*!
*  filename: ej2-multicolumn-combobox.umd.min.js
*  version : 28.1.39
*  Copyright Syncfusion Inc. 2001 - 2024. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@syncfusion/ej2-base"),require("@syncfusion/ej2-inputs"),require("@syncfusion/ej2-data"),require("@syncfusion/ej2-popups"),require("@syncfusion/ej2-grids")):"function"==typeof define&&define.amd?define(["exports","@syncfusion/ej2-base","@syncfusion/ej2-inputs","@syncfusion/ej2-data","@syncfusion/ej2-popups","@syncfusion/ej2-grids"],e):e((t=t||self).ej={},t.ej2Base,t.ej2Inputs,t.ej2Data,t.ej2Popups,t.ej2Grids)}(this,function(s,g,p,f,i,o){"use strict";n=function(t,e){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var n,t=function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},e=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;0<=a;a--)(n=t[a])&&(s=(r<3?n(s):3<r?n(e,i,s):n(e,i))||s);return 3<r&&s&&Object.defineProperty(e,i,s),s},a=function(r,s,a,l){return new(a=a||Promise)(function(t,e){function i(t){try{n(l.next(t))}catch(t){e(t)}}function o(t){try{n(l.throw(t))}catch(t){e(t)}}function n(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(i,o)}n((l=l.apply(r,s||[])).next())})},l=function(o,n){var r,s,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,s&&(a=2&e[0]?s.return:e[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,e[1])).done)return a;switch(s=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,s=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3]))l.label=e[1];else if(6===e[0]&&l.label<a[1])l.label=a[1],a=e;else{if(!(a&&l.label<a[2])){a[2]&&l.ops.pop(),l.trys.pop();continue}l.label=a[2],l.ops.push(e)}}e=n.call(o,l)}catch(t){e=[6,t],s=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},u="e-icon-anim",r="e-nodata",d="e-disabled",h="e-input-focus",c="e-multicolumn-list",y="e-multicolumn-grid",v=(m.prototype.InjectModules=function(){o.Grid.Inject(o.VirtualScroll,o.Group,o.Edit,o.Sort,o.Resize)},m);function m(){}(O=s.FilterType||(s.FilterType={})).StartsWith="StartsWith",O.EndsWith="EndsWith",O.Contains="Contains",(O=s.SortOrder||(s.SortOrder={})).None="None",O.Ascending="Ascending",O.Descending="Descending",(O=s.SortType||(s.SortType={})).OneColumn="OneColumn",O.MultipleColumns="MultipleColumns",(O=s.WrapMode||(s.WrapMode={})).Both="Both",O.Content="Content",O.Header="Header";b=g.ChildProperty,t(w,b),e([g.Property()],w.prototype,"text",void 0),e([g.Property()],w.prototype,"value",void 0),e([g.Property()],w.prototype,"groupBy",void 0);var b,O=w;function w(){return null!==b&&b.apply(this,arguments)||this}S=g.ChildProperty,t(E,S),e([g.Property("")],E.prototype,"field",void 0),e([g.Property("")],E.prototype,"header",void 0),e([g.Property("")],E.prototype,"width",void 0),e([g.Property("")],E.prototype,"textAlign",void 0),e([g.Property(null)],E.prototype,"format",void 0),e([g.Property(!1)],E.prototype,"displayAsCheckBox",void 0),e([g.Property(null)],E.prototype,"template",void 0),e([g.Property(null)],E.prototype,"headerTemplate",void 0),e([g.Property(null)],E.prototype,"customAttributes",void 0);var S,C=E;function E(){return null!==S&&S.apply(this,arguments)||this}x=g.ChildProperty,t(P,x),e([g.Property(!1)],P.prototype,"enableAltRow",void 0),e([g.Property(null)],P.prototype,"rowHeight",void 0),e([g.Property("Default")],P.prototype,"gridLines",void 0),e([g.Property(!1)],P.prototype,"allowTextWrap",void 0),e([g.Property(s.WrapMode.Both)],P.prototype,"textWrapMode",void 0),e([g.Property(!1)],P.prototype,"allowResizing",void 0),e([g.Event()],P.prototype,"resizing",void 0),e([g.Event()],P.prototype,"resizeStart",void 0),e([g.Event()],P.prototype,"resizeStop",void 0);var x,j=P;function P(){return null!==x&&x.apply(this,arguments)||this}D=g.Component,t(T,D),T.prototype.preRender=function(){this.element.id||(this.element.id=g.getUniqueID("e-"+this.getModuleName())),this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",end:"end",enter:"enter",home:"home",moveDown:"downarrow",moveUp:"uparrow"},this.matchedRowEle=this.matchedContent=this.exactMatchedContent=null,this.persistData()},T.prototype.getDirective=function(){return"EJS-MULTICOLUMNCOMBOBOX"},T.prototype.getModuleName=function(){return"multicolumncombobox"},T.prototype.getPersistData=function(){return this.addOnPersist(["value"])},T.prototype.persistData=function(){var t;this.enablePersistence&&(this.element.id+="_wrapper",t=window.localStorage.getItem(this.getModuleName()+this.element.id),g.isNullOrUndefined(t)||""===t||this.setProperties(JSON.parse(t),!0))},T.prototype.render=function(){this.renderGrid(),this.renderInput(),this.popupDiv=this.createElement("div",{className:"e-popup-content"}),this.popupDiv.appendChild(this.gridEle),this.setHTMLAttributes(),this.renderPopup(),this.wireEvents()},T.prototype.renderGrid=function(){var e=this,t=this.getGridColumns(),i=this.sortOrder.toString().toLowerCase();this.gridObj=new o.Grid({dataSource:this.dataSource,columns:t,allowSorting:this.allowSorting,enableStickyHeader:!0,gridLines:this.gridSettings.gridLines,rowHeight:this.gridSettings.rowHeight,enableAltRow:this.gridSettings.enableAltRow,enableVirtualization:this.enableVirtualization,enableRtl:this.enableRtl,editSettings:{allowAdding:!1},query:this.query,allowTextWrap:this.gridSettings.allowTextWrap,textWrapSettings:{wrapMode:this.gridSettings.textWrapMode},height:this.popupHeight,allowResizing:this.gridSettings.allowResizing,allowMultiSorting:"multiplecolumns"===this.sortType.toString().toLowerCase()&&this.allowSorting,rowTemplate:this.itemTemplate,dataBound:function(){e.onDataBound()},actionFailure:function(t){e.onActionFailure(t)},actionBegin:function(t){e.trigger("actionBegin",t)},actionComplete:this.handleActionComplete.bind(this),keyPressed:this.handleKeyPressed.bind(this),resizing:function(t){e.gridSettings.resizing&&e.gridSettings.resizing.call(e,t)},resizeStart:function(t){e.gridSettings.resizeStart&&e.gridSettings.resizeStart.call(e,t)},resizeStop:function(t){e.gridSettings.resizeStop&&e.gridSettings.resizeStop.call(e,t)}}),this.gridEle=this.createElement("div",{id:g.getUniqueID("grid"),className:y}),this.updateGroupByField(),0<t.length&&(this.gridObj.columns[0].isPrimaryKey=!0),"none"!==i&&(this.gridObj.sortSettings={columns:[{field:this.fields.text,direction:"ascending"===i?s.SortOrder.Ascending:s.SortOrder.Descending}]}),this.gridObj.appendTo(this.gridEle)},T.prototype.handleActionComplete=function(t){this.trigger("actionComplete",t),"sorting"===t.requestType&&this.updateRowSelection(t),this.popupObj.refreshPosition(),this.gridObj.element.querySelector(".e-content").scrollTop=0},T.prototype.handleKeyPressed=function(t){"Enter"===t.key&&(t.cancel=!0,this.isPopupOpen)&&(this.selectedGridRow(this.gridObj.getRows()[this.gridObj.selectedRowIndex],t,!0),this.hidePopup(t),this.focusIn(t)),this.fields.groupBy&&(t.cancel=!0,this.gridKeyActionHandler(t,!0))},T.prototype.isRowMatching=function(t,e,i){function o(e){var i=[];return e&&"object"==typeof e?Array.isArray(e)?e.forEach(function(t){return i.push.apply(i,o(t))}):Object.keys(e).forEach(function(t){return i.push.apply(i,o(e[""+t]))}):null!=e&&i.push(String(e)),i}t=o(t);return-1!==t.indexOf(e)&&-1!==t.indexOf(i)},T.prototype.updateRowSelection=function(t){var e=this;t&&t.rows.forEach(function(t){e.selectDataRow(t.data,t.index)})},T.prototype.selectDataRow=function(t,e){this.isRowMatching(t,this.value?this.value.toString():"",this.text?this.text.toString():"")&&(this.gridObj.selectRow(e),t=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.index=e,this.isProtectedOnChange=t)},T.prototype.findIndex=function(t,i){return t.findIndex(function(e){return Object.keys(i).every(function(t){return e[t]===i[t]})})},T.prototype.getGridColumns=function(){var p=this;return this.columns.map(function(t){var e=t.field,i=t.header,o=t.width,n=t.textAlign,r=t.format,s=t.displayAsCheckBox,a=t.template,l=t.headerTemplate,t=t.customAttributes;return{field:e,headerText:i,width:o,textAlign:""===n.toString()&&p.enableRtl?"Right":n,format:r,displayAsCheckBox:s,template:a,headerTemplate:l,customAttributes:t,type:s&&!r?"boolean":void 0}})},T.prototype.updateGroupByField=function(){var t,e=this.fields.groupBy,i=""!==e&&!g.isNullOrUndefined(e);i&&("multiplecolumns"!==this.sortType.toString().toLowerCase()&&this.gridEle.classList.add("e-multicolumn-group"),t=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.gridObj.allowGrouping=!0,this.gridObj.groupSettings={showDropArea:!1,columns:[e]},this.groupTemplate&&i&&(this.gridObj.groupSettings.captionTemplate=this.groupTemplate),this.isVue&&(this.gridObj.isVue=this.isVue),this.isProtectedOnChange=t)},T.prototype.onDataBound=function(){var t=this.dataSource.length,e=this.popupDiv.querySelector("."+y),i=this.popupDiv.classList.contains(r),i=(t<=0&&e?(this.l10nUpdate(),this.popupDiv.removeChild(this.gridEle),g.addClass([this.popupDiv],[r])):i&&1<=t&&(g.removeClass([this.popupDiv],[r]),e=this.popupDiv.querySelector(".e-no-records"))&&this.popupDiv.removeChild(e),this.isInitialRender&&(t=this.popupDiv.querySelector(".e-gridcontent tr"),e=i?this.popupDiv.getBoundingClientRect().height:t?t.getBoundingClientRect().height:0,this.popupRowHeight=e,this.popupObj.hide(),this.popupEle.style.visibility="unset",this.isInitialRender=!1),this.gridObj.element.querySelectorAll(".e-row"));this.isDataFiltered&&0<i.length&&""!==this.inputEle.value&&i[0].classList.add("e-row-focus")},T.prototype.onActionFailure=function(t){this.trigger("actionFailure",t),this.l10nUpdate(!0),g.addClass([this.popupDiv],[r])},T.prototype.renderInput=function(){var t=["aria-expanded","aria-readOnly","aria-disabled","autocomplete","autocapitalize","spellcheck","tabindex"];if("INPUT"===this.element.tagName){this.inputEle=this.element,g.isNullOrUndefined(this.inputEle.getAttribute("role"))&&this.inputEle.setAttribute("role","combobox"),g.isNullOrUndefined(this.inputEle.getAttribute("type"))&&this.inputEle.setAttribute("type","text");var e,i=this.inputEle,o={"aria-expanded":"false","aria-readOnly":this.readonly.toString(),"aria-disabled":this.disabled.toString(),autocomplete:"off",autocapitalize:"off",spellcheck:"false",tabindex:"0"};for(e in o)o.hasOwnProperty(e)&&-1!==t.indexOf(e)&&g.isNullOrUndefined(i.getAttribute(e))&&i.setAttribute(e,o[e])}else this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.parentElement.insertBefore(this.inputEle,this.element);this.inputObj=p.Input.createInput({element:this.inputEle,buttons:["e-input-group-icon e-multicolumn-list-icon e-icons"],floatLabelType:this.floatLabelType,properties:{enabled:!this.disabled,readonly:this.readonly,placeholder:this.placeholder,enableRtl:this.enableRtl,showClearButton:this.showClearButton,cssClass:this.cssClass}},this.createElement),this.inputWrapper=this.inputObj.container,this.inputWrapper.classList.add(c),this.inputWrapper.setAttribute("spellcheck","false"),this.element.tagName===this.getDirective()&&this.element.appendChild(this.inputWrapper),this.setElementWidth(this.width),g.isNullOrUndefined(this.value)&&g.isNullOrUndefined(this.text)&&g.isNullOrUndefined(this.index)||this.initValue(null,null,!0)},T.prototype.setElementWidth=function(t){var e;g.isNullOrUndefined(t)||(e=this.inputWrapper,"number"==typeof t?e.style.width=g.formatUnit(t):"string"==typeof t&&(e.style.width=t.match(/px|%|em/)?t:g.formatUnit(t)))},T.prototype.setHTMLAttributes=function(){var t=this.htmlAttributes,e=this.inputEle;if(Object.keys(t).length)for(var i=0,o=Object.keys(t);i<o.length;i++){var n=o[i];switch(n){case"class":this.inputWrapper.classList.add(t[n]);break;case"disabled":this.setProperties({enabled:!1},!0),this.setEnable();break;case"readonly":this.setProperties({readonly:!0},!0),this.dataBind();break;case"style":this.inputWrapper.setAttribute("style",t[n]);break;default:-1<["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"].indexOf(n)&&"placeholder"===n?p.Input.setPlaceholder(t[n],e):e.setAttribute(n,t[n])}}},T.prototype.setEnable=function(){p.Input.setEnabled(!this.disabled,this.inputEle),this.disabled?(this.isPopupOpen&&this.hidePopup(),g.addClass([this.inputWrapper],d),this.inputWrapper&&this.inputWrapper.classList.contains(h)&&g.removeClass([this.inputWrapper],[h]),this.setAriaDisabled("true")):(g.removeClass([this.inputWrapper],d),this.setAriaDisabled("false"))},T.prototype.setAriaDisabled=function(t){this.inputEle.setAttribute("aria-disabled",t),this.inputWrapper.setAttribute("aria-disabled",t)},T.prototype.updateFieldValue=function(t,e){return g.getValue(t,e).toString()},T.prototype.initValue=function(n,i,r){function s(t){t=d.updateCurrentValues(a,t),l=t.currentValue,p=t.currentText,u=t.currentIndex}var a,l,p,u,o,d=this,h=this.gridObj.getSelectedRecords()[0],c=this.gridObj.getSelectedRows()[0],t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=this.value&&this.value.toString(),this.isProtectedOnChange=t;!n&&(!g.isNullOrUndefined(this.value)||!g.isNullOrUndefined(this.text))||n&&void 0!==i?(o=n?i?this.value:this.text:g.isNullOrUndefined(this.value)?this.text:this.value,!g.isNullOrUndefined(this.dataSource)&&this.dataSource instanceof f.DataManager?this.dataSource.executeQuery(new f.Query).then(function(t){var t=t.result,e=t.filter(function(t){return d.updateFieldValue(n?i?d.fields.value:d.fields.text:g.isNullOrUndefined(d.value)?d.fields.text:d.fields.value,t)===o});0<e.length&&(a=e[0],s(t),d.updateChangeEvent(a,h,c,l,p,u,n,r),d.gridObj.selectRow(d.index))}):!g.isNullOrUndefined(this.dataSource)&&this.dataSource instanceof Array&&(a=this.dataSource.filter(function(t){return d.updateFieldValue(n?i?d.fields.value:d.fields.text:g.isNullOrUndefined(d.value)?d.fields.text:d.fields.value,t)===o})[0],s(this.dataSource))):g.isNullOrUndefined(this.index)||(!g.isNullOrUndefined(this.dataSource)&&this.dataSource instanceof f.DataManager?this.dataSource.executeQuery(new f.Query).then(function(t){t=t.result;a=t[d.index],s(t),d.updateChangeEvent(a,h,c,l,p,u,n,r),d.gridObj.selectRow(d.index)}):!g.isNullOrUndefined(this.dataSource)&&this.dataSource instanceof Array&&(this.fields.groupBy?setTimeout(function(){var t=d.gridObj.getRows();if(t&&0<t.length)for(var e=d.gridObj.getRowInfo(t[d.index]).rowData,i=d.fields.value,o=0;o<t.length;o++)if(e&&e[parseInt(i.toString(),10)]===d.dataSource[parseInt(o.toString(),10)][parseInt(i.toString(),10)]){a=e,s(d.dataSource),d.updateChangeEvent(a,h,c,l,p,u,n,r),d.gridObj.selectRow(d.index);break}}):(a=this.dataSource[this.index],s(this.dataSource)))),this.dataSource instanceof f.DataManager||this.updateChangeEvent(a,h,c,l,p,u,n,r)},T.prototype.updateChangeEvent=function(t,e,i,o,n,r,s,a){var l=t?this.updateFieldValue(this.fields.value,t):null,t={value:t?l:null,itemData:{text:n,value:o},item:this.getDataByValue(this.value),previousItemData:e,previousItemElement:i,itemElement:this.inputWrapper,event:null,isInteracted:!s};this.updateValues(o,n,r,t,a)},T.prototype.updateCurrentValues=function(t,e){var i,o;return g.isNullOrUndefined(t)?{currentValue:null,currentText:null,currentIndex:null}:(i=this.updateFieldValue(this.fields.text,t),o=this.updateFieldValue(this.fields.value,t),p.Input.setValue(i,this.inputEle,this.floatLabelType,this.showClearButton),{currentValue:o,currentText:i,currentIndex:e.indexOf(t)})},T.prototype.renderPopup=function(){this.popupEle=this.createElement("div",{id:this.element.id+"_options",className:c+" e-popup "+(null!==this.cssClass?this.cssClass:"")}),g.attributes(this.popupEle,{"aria-label":this.element.id,role:"dialog"}),document.body.appendChild(this.popupEle),this.createPopup(this.popupEle),g.prepend([this.popupDiv],this.popupEle),this.footerTemplate&&this.setFooterTemplate();var t,e=this.getSize(!1);this.popupEle.style.maxHeight=e,this.footerTemplate&&(this.footer=this.footer||this.popupEle.querySelector(".e-popup-footer"),t=Math.round(this.footer.getBoundingClientRect().height),e=g.formatUnit(parseInt(e,10)-t+"px")),this.popupDiv.style.maxHeight=e,this.updateGridHeight(),this.popupEle.style.visibility="hidden",this.isInitialRender=!0},T.prototype.updateGridHeight=function(t,e,i){e=t?(t=(t=this.gridObj.getContent().querySelector(".e-content")).offsetHeight-t.clientHeight,i=i*this.popupRowHeight,""===this.fields.groupBy||g.isNullOrUndefined(this.fields.groupBy)||(i+=this.popupRowHeight),e&&i<this.prevGridHeight?i+t+"px":this.prevGridHeight+"px"):(this.prevGridHeight=this.popupDiv.getBoundingClientRect().height-this.popupDiv.querySelector(".e-gridheader").getBoundingClientRect().height,this.prevGridHeight+"px"),i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.gridObj.height=e,this.isProtectedOnChange=i},T.prototype.createPopup=function(t){var e=this;this.popupObj=new i.Popup(t,{width:this.getSize(!0),targetType:"relative",collision:{X:"flip",Y:"flip"},relateTo:this.inputWrapper,enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},targetExitViewport:function(){g.Browser.isDevice||e.hidePopup()},open:function(){e.inputEle.focus(),e.updateClearIconState()}})},T.prototype.setFooterTemplate=function(){this.footer?this.isReact&&"function"==typeof this.footerTemplate?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),g.addClass([this.footer],"e-popup-footer"));var t=this.getTemplateFunction(this.footerTemplate)({count:this.dataSource.length},this,"footerTemplate",this.element.id+"footerTemplate",this.isStringTemplate,void 0,this.footer);t&&(t=Array.prototype.slice.call(t),g.append(t,this.footer)),g.append([this.footer],this.popupEle)},T.prototype.l10nUpdate=function(t){var e,i,o;this.noRecord?this.noRecord.innerHTML="":this.noRecord=this.createElement("div"),"No records found"!==this.noRecordsTemplate||"Request Failed"!==this.actionFailureTemplate?(o=t?this.actionFailureTemplate:this.noRecordsTemplate,e=t?this.element.id+"_actionFailure":this.element.id+"_noRecords",i=t?"actionFailureTemplate":"noRecordsTemplate",(o=this.getTemplateFunction(o)({},this,i,e,this.isStringTemplate,void 0,this.noRecord))&&(o=Array.prototype.slice.call(o),g.append(o,this.noRecord))):(this.l10n=new g.L10n("multicolumncombobox",{noRecordsTemplate:"No records found",actionFailureTemplate:"Request Failed"},this.locale),this.noRecord.innerHTML=t?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate")),g.addClass([this.noRecord],"e-no-records"),g.prepend([this.noRecord],this.popupDiv),this.popupObj.refreshPosition()},T.prototype.getTemplateFunction=function(e){if("string"!=typeof e)return g.compile(e);var i="";try{var t=g.select(e),i=t?"SCRIPT"===t.tagName?t.innerHTML:t.outerHTML:e}catch(t){i=e}return g.compile(i)},T.prototype.getSize=function(t){var e=t?this.popupWidth:this.popupHeight,i=g.formatUnit(e);return i.includes("%")?i=((t?this.inputWrapper.offsetWidth:document.documentElement.clientHeight)*parseFloat(i)/100).toString()+"px":"string"==typeof e&&(i=e.match(/px|em/)?e:i),i},T.prototype.selectedGridRow=function(t,e,i){var o=this,n={isInteracted:!!e,item:this.gridObj.getSelectedRecords()[0],itemElement:t,itemData:this.gridObj.getSelectedRecords()[0],event:e,cancel:!1},r=this.gridObj.getSelectedRecords()[0],s=r?this.updateFieldValue(this.fields.text,r):"",a=r?this.updateFieldValue(this.fields.value,r):"",l={isInteracted:!!e,item:r,itemElement:t,itemData:{text:r?s:"",value:r?a:""},event:e,cancel:!1,value:r?a:"",previousItemData:{text:this.text,value:this.value},previousItemElement:this.previousItemElement};this.trigger("select",n,function(t){!t.cancel&&t.itemData&&(t.itemData,t="Enter"===e.key||"Tab"===e.key||e.shiftKey&&"Tab"===e.key||e.altKey&&"ArrowUp"===e.key,i&&!t||o.updateValues(r?a:"",r?s:"",o.gridObj.selectedRowIndex,l),p.Input.setValue(r?s:"",o.inputEle,o.floatLabelType,o.showClearButton),i&&!t||o.hidePopup(e))})},T.prototype.updateValues=function(t,e,i,o,n){this.previousItemElement=o.itemElement;var r=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.text=e||this.text,this.value=t||this.value,this.index=g.isNullOrUndefined(i)?this.index:i,this.isProtectedOnChange=r,n||this.triggerChangeEvent(o)},T.prototype.triggerChangeEvent=function(t){this.trigger("change",t,function(t){t.cancel})},T.prototype.inputHandler=function(t){var o,n,r,s=this;this.showPopup(null,!0),this.updateClearIconState(),this.allowFiltering&&(o=t.target.value.toLowerCase(),r={preventDefaultAction:n=!1,text:o,updateData:function(t,e,i){r.cancel||(n=!0,s.filterAction(t,o,e,i))},event:t,cancel:!1},this.trigger("filtering",r,function(t){t.cancel||t.preventDefaultAction||n||s.filterAction(s.dataSource,o,s.query,s.fields)})),this.updateInputValue(t.target.value)},T.prototype.updateInputValue=function(r){return a(this,void 0,void 0,function(){var e,i,o,n;return l(this,function(t){switch(t.label){case 0:return this.dataSource instanceof f.DataManager?(o=new f.Query,[4,this.dataSource.executeQuery(o)]):[3,2];case 1:return o=t.sent(),n=o.result,n=this.filterDatas(n,r),i=n.data,n=n.exactData,[3,3];case 2:Array.isArray(this.dataSource)&&(e=this.filterDatas(this.dataSource,r),i=e.data,n=e.exactData),t.label=3;case 3:return this.selectFilteredRows(i,n),[2]}})})},T.prototype.filterDatas=function(t,e){var i=this;return{data:t.filter(function(t){return i.updateFieldValue(i.fields.text,t).toLowerCase().startsWith(e.toLowerCase())}),exactData:t.filter(function(t){return i.updateFieldValue(i.fields.text,t)===e})}},T.prototype.selectFilteredRows=function(t,e){t.length<=0?this.matchedRowEle=this.matchedContent=this.exactMatchedContent=null:(this.matchedContent=t[0],this.exactMatchedContent=e[0],t=this.findIndex(this.gridObj.currentViewData,this.matchedContent),this.matchedRowEle=this.gridObj.getRowByIndex(t))},T.prototype.filterAction=function(t,e,i,o){var n=this,r=i||new f.Query,s=this.filterType.toString().toLowerCase();g.isNullOrUndefined(i)&&g.isNullOrUndefined(o)?this.updateGridDataSource(t):i?t instanceof f.DataManager?this.filteringHandler(t,e,i,o):new f.DataManager(t).executeQuery(i).then(function(t){t=t.result;n.updateGridDataSource(t)}):t instanceof f.DataManager?this.filteringHandler(t,e,r,o):Array.isArray(t)&&(i=t.filter(function(t){return n.filterData(t,s,e,o)}),this.updateGridDataSource(i))},T.prototype.filteringHandler=function(t,i,e,o){var n,r=this,s=this.filterType.toString().toLowerCase();t.executeQuery(e).then(function(t){var t=t.result,e=t.length;n=t.filter(function(t){return r.filterData(t,s,i,o)}),r.updateGridDataSource(n,e)})},T.prototype.filterData=function(t,e,i,o){var n=this.updateFieldValue((o||this.fields).text,t).toLowerCase();switch(e){case"startswith":return n.startsWith(i);case"endswith":return n.endsWith(i);case"contains":return n.includes(i);default:return!1}},T.prototype.updateGridDataSource=function(t,e){var i=!0;0<t.length?(i=(this.dataSource instanceof f.DataManager?e:this.dataSource.length)!==t.length,g.removeClass([this.popupDiv],[r]),(e=this.popupDiv.querySelector(".e-no-records"))&&this.popupDiv.removeChild(e),this.gridObj.dataSource=t,this.isDataFiltered=!0):(this.l10nUpdate(),g.addClass([this.popupDiv],[r])),this.updateGridHeight(!0,i,t.length)},T.prototype.wireEvents=function(){g.isNullOrUndefined(this.inputObj.buttons[0])||(g.EventHandler.add(this.inputObj.buttons[0],"mousedown",this.preventBlur,this),g.EventHandler.add(this.inputObj.buttons[0],"mousedown",this.dropDownClick,this)),g.EventHandler.add(document,"mousedown",this.onDocumentClick,this),g.EventHandler.add(this.gridEle,"click",this.onMouseClick,this),g.EventHandler.add(this.inputEle,"input",this.inputHandler,this),g.EventHandler.add(this.inputEle,"focus",this.focusIn,this),this.showClearButton&&g.EventHandler.add(this.inputObj.clearButton,"mousedown",this.clearText,this),g.EventHandler.add(window,"resize",this.windowResize,this),this.keyboardModule=new g.KeyboardEvents(this.inputWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.keyboardModule=new g.KeyboardEvents(this.gridEle,{keyAction:this.gridKeyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},T.prototype.unWireEvents=function(){g.isNullOrUndefined(this.inputObj.buttons[0])||(g.EventHandler.remove(this.inputObj.buttons[0],"mousedown",this.preventBlur),g.EventHandler.remove(this.inputObj.buttons[0],"mousedown",this.dropDownClick)),g.EventHandler.remove(document,"mousedown",this.onDocumentClick),g.EventHandler.remove(this.inputEle,"input",this.inputHandler),g.EventHandler.remove(this.inputWrapper,"focus",this.focusIn),g.EventHandler.remove(window,"resize",this.windowResize),g.EventHandler.remove(this.gridEle,"click",this.onMouseClick),this.showClearButton&&g.EventHandler.remove(this.inputObj.clearButton,"mousedown",this.clearText),this.keyboardModule&&this.keyboardModule.destroy()},T.prototype.preventBlur=function(t){t.preventDefault()},T.prototype.dropDownClick=function(t){var e;this.disabled||this.readonly||((e=this.gridEle.querySelector(".e-row-focus"))&&e.classList.remove("e-row-focus"),this.isPopupOpen?this.hidePopup(t):this.showPopup(t))},T.prototype.onMouseClick=function(t){var e=t.target,e=g.closest(e,".e-row"),i=this.gridObj.selectedRowIndex;e&&(0<=i?this.selectedGridRow(e,t):(this.gridObj.selectedRowIndex=this.gridObj.getRows().indexOf(e),this.gridObj.selectRow(this.gridObj.selectedRowIndex),this.hidePopup(t)))},T.prototype.onDocumentClick=function(t){var e=t.target;this.disabled||this.readonly||!this.isPopupOpen?e.closest(".e-multicolumn-list")||this.focusOut():e.classList.contains("e-multicolumn-list-icon")||g.closest(e,".e-popup")?t.preventDefault():e.classList.contains("e-multicolumncombobox")||e.classList.contains("e-clear-icon")||(g.isNullOrUndefined(this.text)||this.updateInputValue(this.text),e=""===this.inputEle.value,this.updateValuesOnInput(t,null,e))},T.prototype.updateValuesOnInput=function(t,e,i,o){var n=this,r=t||e,t=(o=void 0===o?!1:o)?this.matchedContent:this.exactMatchedContent;t||(this.inputEle.value=this.value=this.index=this.text=null),this.hidePopup(r),this.matchedRowEle&&!i&&t?setTimeout(function(){var t=n.isProtectedOnChange,e=(n.isProtectedOnChange=!0,n.updateFieldValue(n.fields.text,n.matchedContent)),i=n.updateFieldValue(n.fields.value,n.matchedContent),i=(n.inputEle.value=e,n.value=i,n.findIndex(n.gridObj.currentViewData,n.matchedContent));n.index=i,n.text=e,n.gridObj.selectRow(i),n.selectedGridRow(n.gridObj.getRowByIndex(i),r),n.previousItemElement=n.gridObj.getSelectedRows()[0],n.isProtectedOnChange=t},100):this.isDataFiltered&&(this.inputEle.value="",e={value:null,itemData:{text:null,value:null},item:null,previousItemData:{text:this.text,value:this.value},previousItemElement:this.previousItemElement,itemElement:null,event:r,isInteracted:!0,cancel:!1},o=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.text=this.value=this.index=null,this.gridObj.refreshColumns(),this.isProtectedOnChange=o,this.triggerChangeEvent(e),this.isDataFiltered=!1,this.matchedContent=this.matchedRowEle=null)},T.prototype.clearText=function(t){this.isDataFiltered=!0,this.updateValuesOnInput(t,null,!0)},T.prototype.windowResize=function(){this.popupObj&&(this.popupObj.setProperties({width:this.getSize(!0)}),this.popupObj.refreshPosition())},T.prototype.setCssClass=function(t,e){var i=this.popupObj?[this.inputWrapper,this.popupObj.element]:[this.inputWrapper];g.isNullOrUndefined(e)||""===e||g.removeClass(i,e.split(" ")),g.isNullOrUndefined(t)||""===t||g.addClass(i,t.split(" "))},T.prototype.keyActionHandler=function(t){switch(t.action){case"escape":case"altUp":case"shiftTab":case"tab":this.isPopupOpen?this.hidePopup(t):this.focusOut();break;case"altDown":this.isPopupOpen||(this.showPopup(t),this.updateSelectedItem(t,!1));break;case"moveDown":case"moveUp":this.updateSelectedItem(t,!0,!0);break;case"enter":this.updateValuesOnInput(null,t,!1,!0),this.focusIn(t);break;case"home":case"end":this.updateSelectedItem(t)}},T.prototype.gridKeyActionHandler=function(t,e){switch(e&&(e=(t.altKey?"Alt+":"")+(t.shiftKey?"Shift+":"")+t.key,t.action={ArrowDown:"moveDown",ArrowUp:"moveUp",End:"end",Home:"home",Tab:"tab",Escape:"escape","Shift+Tab":"shiftTab","Alt+ArrowUp":"altUp"}[e]||t.action),t.action){case"escape":case"tab":case"shiftTab":case"altUp":this.isPopupOpen&&(t.preventDefault(),"escape"!==t.action&&this.updateSelectedItem(t),this.hidePopup(t));break;case"moveDown":case"moveUp":case"home":case"end":this.updateSelectedItem(t)}},T.prototype.updateSelectedItem=function(t,e,i){var o,n,r=this;void 0===e&&(e=!0),this.isPopupOpen&&(o=this.fields.groupBy?this.gridObj.selectedRowIndex||0:this.gridObj.selectedRowIndex,n=this.dataSource instanceof f.DataManager?this.remoteDataLength:this.dataSource.length,-1===o&&("moveDown"===t.action||"moveUp"===t.action)||"home"===t.action?o=0:n-1<=o&&"moveDown"===t.action||"end"===t.action?o=n-1:"moveDown"===t.action&&0<=o&&o<=n-1&&(this.fields.groupBy||i)?o+=1:("moveUp"===t.action&&0<o&&this.fields.groupBy||i)&&--o,this.enableVirtualization?setTimeout(function(){r.selectRow(t,e,o)}):this.selectRow(t,e,o))},T.prototype.selectRow=function(t,e,i){void 0===e&&(e=!0),this.gridObj.selectRow(i),this.gridObj.selectedRowIndex=i;var o=this.gridEle.querySelector(".e-row-focus");o&&o.classList.remove("e-row-focus"),e&&this.selectedGridRow(this.gridObj.getRows()[parseInt(i.toString(),10)],t,!0)},T.prototype.updateClearIconState=function(){var t=this.inputWrapper.querySelector(".e-clear-icon");t&&(t.style.display=""===this.inputEle.value?"none":"flex")},T.prototype.updateDynamicDataSource=function(t,e){var i;this.gridObj&&(this.gridObj.dataSource=t,e instanceof f.DataManager?e.executeQuery(new f.Query).then(function(t){i=t.result.length}):i=e.length,0===i)&&this.popupDiv.appendChild(this.gridEle)},T.prototype.focusIn=function(t){this.disabled||this.readonly||(g.addClass([this.inputWrapper],[h]),this.inputEle.focus(),this.updateClearIconState(),this.trigger("focus",t),"Never"!==this.floatLabelType&&p.Input.calculateWidth(this.inputEle,this.inputWrapper))},T.prototype.focusOut=function(t){this.disabled||this.readonly||(this.isPopupOpen&&this.hidePopup(t),this.inputWrapper&&(g.removeClass([this.inputWrapper],[h]),(t=this.inputWrapper.querySelector(".e-clear-icon"))&&(t.style.display="none"),"Never"!==this.floatLabelType)&&p.Input.calculateWidth(this.inputEle,this.inputWrapper))},T.prototype.showPopup=function(n,r){var s=this,t={popup:this.popupObj,event:n,cancel:!1,animation:{name:"FadeIn",duration:100}};this.trigger("open",t,function(t){var i,e,o;t.cancel||s.isPopupOpen||(s.isPopupOpen=!0,s.popupObj.refreshPosition(),g.addClass([s.inputWrapper],[u]),g.attributes(s.inputEle,{"aria-expanded":"true","aria-owns":s.element.id+"_popup","aria-controls":s.element.id}),r||((s.value||s.text||s.index)&&s.gridObj.getRowsObject().forEach(function(t,e){s.fields.groupBy&&g.isNullOrUndefined(t.data.items)&&(g.isNullOrUndefined(i)?i=0:i+=1),s.selectDataRow(t.data,s.fields.groupBy?i:e)}),s.focusIn(n)),(o=s.gridObj.getContent())&&(e=o.querySelector(".e-rowcell.e-active"),o=o.querySelector(".e-row"),e?s.inputEle.setAttribute("aria-activedescendant",e.parentElement.getAttribute("data-uid")):o&&s.inputEle.setAttribute("aria-activedescendant",o.getAttribute("data-uid"))),!g.isNullOrUndefined(s.dataSource)&&s.dataSource instanceof f.DataManager&&s.dataSource.executeQuery(new f.Query).then(function(t){s.remoteDataLength=t.result.length}),s.popupObj.show(new g.Animation(t.animation),s.popupEle))})},T.prototype.hidePopup=function(e){var i=this,t={popup:this.popupObj,event:e||null,cancel:!1,animation:{name:"FadeOut",duration:100}},o=e?e.target:null;this.trigger("close",t,function(t){t.cancel||(i.isPopupOpen=!1,g.removeClass([i.inputWrapper],[u]),g.attributes(i.inputEle,{"aria-expanded":"false"}),i.popupObj.hide(new g.Animation(t.animation)),o&&(o.classList.contains("e-multicolumn-list-icon")||o.classList.contains("e-rowcell"))?(i.value||i.gridObj.refreshColumns(),setTimeout(function(){i.focusIn(e)})):i.focusOut(),i.inputEle.removeAttribute("aria-owns"),i.inputEle.removeAttribute("aria-activedescendant"))}),setTimeout(function(){i.gridObj&&(i.gridObj.dataSource=i.dataSource,i.updateGridHeight(!0,!1))},100)},T.prototype.addItems=function(t,e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.gridObj.editSettings.allowAdding=!0,this.gridObj.dataBind(),this.isProtectedOnChange=i,this.gridObj.addRecord(t,e)},T.prototype.getItems=function(){return this.gridObj.getDataRows()},T.prototype.getDataByValue=function(e){var i=this;return!g.isNullOrUndefined(this.dataSource)&&this.dataSource instanceof Array?this.dataSource.filter(function(t){return i.updateFieldValue(i.fields.value,t)===e})[0]:(!g.isNullOrUndefined(this.dataSource)&&this.dataSource instanceof f.DataManager&&this.dataSource.executeQuery(new f.Query).then(function(t){return t.result.filter(function(t){return i.updateFieldValue(i.fields.value,t)===e})[0]}),null)},T.prototype.destroy=function(){if(this.unWireEvents(),this.gridObj&&(this.gridObj.destroy(),g.detach(this.gridObj.element)),this.inputEle){for(var t=["placeholder","aria-expanded","spellcheck","aria-label","role","type","aria-owns","aria-controls","aria-readonly","autocomplete","autocapitalize","spellcheck","aria-activedescendant"],e=0;e<t.length;e++)this.inputEle.removeAttribute(t[e]);this.inputEle.classList.remove("e-input"),p.Input.setValue("",this.inputEle,this.floatLabelType,this.showClearButton)}this.popupEle&&(this.popupEle.removeAttribute("aria-label"),this.popupEle.removeAttribute("role")),this.popupObj&&(this.popupObj.destroy(),g.detach(this.popupObj.element)),this.element.tagName!==this.getDirective()&&this.inputWrapper.parentElement.insertBefore(this.element,this.inputWrapper),this.inputObj&&(g.detach(this.inputObj.container),this.inputObj=null),p.Input.destroy({element:this.inputEle,floatLabelType:this.floatLabelType,properties:this.properties}),g.detach(this.inputWrapper),g.detach(this.popupDiv),this.inputEle=null,this.previousItemElement=null,this.inputWrapper.innerHTML="",this.inputWrapper=null,this.popupDiv=null,this.popupObj=null,this.gridObj=null,this.gridEle=null,this.popupEle=null,this.footer=null,this.noRecord=null,D.prototype.destroy.call(this)},T.prototype.onPropertyChanged=function(t,e){for(var i=0,o=Object.keys(t);i<o.length;i++){var n,r=o[i];switch(r){case"width":case"popupWidth":"width"===r&&this.setElementWidth(t.width),this.popupObj&&(this.popupObj.element.style.width=this.getSize(!0));break;case"popupHeight":this.popupObj&&(n=this.getSize(!1),this.popupObj.element.style.maxHeight=n,this.popupDiv.style.maxHeight=n,this.gridObj.height=n);break;case"placeholder":p.Input.setPlaceholder(t.placeholder,this.inputEle);break;case"readonly":p.Input.setReadonly(this.readonly,this.inputEle);break;case"disabled":p.Input.setEnabled(!this.disabled,this.inputEle),this.setEnable();break;case"cssClass":this.setCssClass(t.cssClass,e.cssClass);break;case"floatLabelType":p.Input.removeFloating(this.inputObj),p.Input.addFloating(this.inputEle,this.floatLabelType,this.placeholder);break;case"showClearButton":p.Input.setClearButton(t.showClearButton,this.inputEle,this.inputObj);break;case"value":this.initValue(!0,!0);break;case"text":this.initValue(!0,!1);break;case"index":this.initValue(!0);break;case"sortOrder":this.gridObj&&(this.gridObj.sortSettings.columns=[{field:this.fields.text,direction:t.sortOrder===s.SortOrder.Ascending?s.SortOrder.Ascending:s.SortOrder.Descending}]);break;case"htmlAttributes":this.setHTMLAttributes();break;case"noRecordsTemplate":this.l10nUpdate();break;case"actionFailureTemplate":this.l10nUpdate(!0);break;case"footerTemplate":this.setFooterTemplate();break;case"itemTemplate":this.gridObj&&(this.gridObj.rowTemplate=t.itemTemplate);break;case"groupTemplate":this.groupTemplate=t.groupTemplate,this.updateGroupByField();break;case"enableRtl":this.gridObj&&this.popupObj&&(this.gridObj.enableRtl=t.enableRtl,p.Input.setEnableRtl(t.enableRtl,[this.inputWrapper]),this.popupObj.enableRtl=t.enableRtl);break;case"dataSource":this.updateDynamicDataSource(t.dataSource,e.dataSource);break;case"query":this.gridObj&&(this.gridObj.query=t.query);break;case"gridSettings":this.gridObj&&(this.gridObj.gridLines=t.gridSettings.gridLines,this.gridObj.rowHeight=t.gridSettings.rowHeight,this.gridObj.enableAltRow=t.gridSettings.enableAltRow,this.gridObj.allowResizing=t.gridSettings.allowResizing,g.isNullOrUndefined(t.gridSettings.allowTextWrap)||(this.gridObj.allowTextWrap=t.gridSettings.allowTextWrap),g.isNullOrUndefined(t.gridSettings.textWrapMode)||(this.gridObj.textWrapSettings.wrapMode=t.gridSettings.textWrapMode));break;case"fields":this.fields=t.fields,this.updateGroupByField();break;case"filterType":this.filterType=t.filterType;break;case"enableVirtualization":this.gridObj&&(this.enableVirtualization=this.gridObj.enableVirtualization=t.enableVirtualization);break;case"sortType":this.gridObj&&(this.sortType=t.sortType,this.gridObj.allowMultiSorting="multiplecolumns"===this.sortType.toString().toLowerCase()&&this.allowSorting);break;case"allowFiltering":this.allowFiltering=t.allowFiltering;break;case"allowSorting":this.gridObj&&(this.allowSorting=this.gridObj.allowSorting=t.allowSorting);break;case"columns":this.gridObj&&(n=this.getGridColumns(),this.gridObj.columns=n)}}},e([g.Property([])],T.prototype,"dataSource",void 0),e([g.Property(null)],T.prototype,"text",void 0),e([g.Property(null)],T.prototype,"value",void 0),e([g.Property(null)],T.prototype,"index",void 0),e([g.Property("100%")],T.prototype,"width",void 0),e([g.Property("300px")],T.prototype,"popupHeight",void 0),e([g.Property("100%")],T.prototype,"popupWidth",void 0),e([g.Property(null)],T.prototype,"placeholder",void 0),e([g.Property(!0)],T.prototype,"allowFiltering",void 0),e([g.Property(!0)],T.prototype,"allowSorting",void 0),e([g.Property(!1)],T.prototype,"showClearButton",void 0),e([g.Property("")],T.prototype,"cssClass",void 0),e([g.Complex({text:null,value:null,groupBy:null},O)],T.prototype,"fields",void 0),e([g.Collection([],C)],T.prototype,"columns",void 0),e([g.Complex({},j)],T.prototype,"gridSettings",void 0),e([g.Property(s.FilterType.StartsWith)],T.prototype,"filterType",void 0),e([g.Property("Never")],T.prototype,"floatLabelType",void 0),e([g.Property(s.SortOrder.None)],T.prototype,"sortOrder",void 0),e([g.Property(s.SortType.OneColumn)],T.prototype,"sortType",void 0),e([g.Property(!1)],T.prototype,"enableVirtualization",void 0),e([g.Property(!1)],T.prototype,"disabled",void 0),e([g.Property(!1)],T.prototype,"readonly",void 0),e([g.Property(!1)],T.prototype,"enablePersistence",void 0),e([g.Property()],T.prototype,"query",void 0),e([g.Property(null)],T.prototype,"itemTemplate",void 0),e([g.Property(null)],T.prototype,"footerTemplate",void 0),e([g.Property(null)],T.prototype,"groupTemplate",void 0),e([g.Property("Request Failed")],T.prototype,"actionFailureTemplate",void 0),e([g.Property("No records found")],T.prototype,"noRecordsTemplate",void 0),e([g.Property({})],T.prototype,"htmlAttributes",void 0),e([g.Event()],T.prototype,"created",void 0),e([g.Event()],T.prototype,"open",void 0),e([g.Event()],T.prototype,"close",void 0),e([g.Event()],T.prototype,"actionFailure",void 0),e([g.Event()],T.prototype,"actionBegin",void 0),e([g.Event()],T.prototype,"actionComplete",void 0),e([g.Event()],T.prototype,"filtering",void 0),e([g.Event()],T.prototype,"select",void 0),e([g.Event()],T.prototype,"change",void 0);var D,t=e([g.NotifyPropertyChanges],T);function T(t,e){t=D.call(this,t,e)||this;return t.gridInject=new v,t.gridInject.InjectModules(),t}s.Column=C,s.FieldSettings=O,s.GridSettings=j,s.MultiColumnComboBox=t,s.MultiColumnGrid=v,Object.defineProperty(s,"__esModule",{value:!0})});
//# sourceMappingURL=ej2-multicolumn-combobox.umd.min.js.map
