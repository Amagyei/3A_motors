/*!
*  filename: ej2-multicolumn-combobox.min.js
*  version : 28.1.37
*  Copyright Syncfusion Inc. 2001 - 2024. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
this.ej=this.ej||{},this.ej.multicolumncombobox=function(t,e,i,r,o,n){"use strict";var s=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),a=function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s},l=function(t,e,i,r){return new(i||(i=Promise))(function(o,n){function s(t){try{l(r.next(t))}catch(t){n(t)}}function a(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(s,a)}l((r=r.apply(t,e||[])).next())})},p=function(t,e){function i(t){return function(e){return r([t,e])}}function r(i){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,n&&(s=2&i[0]?n.return:i[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,i[1])).done)return s;switch(n=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,n=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){l.label=i[1];break}if(6===i[0]&&l.label<s[1]){l.label=s[1],s=i;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(i);break}s[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(t){i=[6,t],n=0}finally{o=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,n,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},u="e-nodata",d=function(){function t(){}return t.prototype.InjectModules=function(){n.Grid.Inject(n.VirtualScroll,n.Group,n.Edit,n.Sort,n.Resize)},t}();!function(t){t.StartsWith="StartsWith",t.EndsWith="EndsWith",t.Contains="Contains"}(t.FilterType||(t.FilterType={})),function(t){t.None="None",t.Ascending="Ascending",t.Descending="Descending"}(t.SortOrder||(t.SortOrder={})),function(t){t.OneColumn="OneColumn",t.MultipleColumns="MultipleColumns"}(t.SortType||(t.SortType={})),function(t){t.Both="Both",t.Content="Content",t.Header="Header"}(t.WrapMode||(t.WrapMode={}));var h=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return s(i,t),a([e.Property()],i.prototype,"text",void 0),a([e.Property()],i.prototype,"value",void 0),a([e.Property()],i.prototype,"groupBy",void 0),i}(e.ChildProperty),c=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return s(i,t),a([e.Property("")],i.prototype,"field",void 0),a([e.Property("")],i.prototype,"header",void 0),a([e.Property("")],i.prototype,"width",void 0),a([e.Property("")],i.prototype,"textAlign",void 0),a([e.Property(null)],i.prototype,"format",void 0),a([e.Property(!1)],i.prototype,"displayAsCheckBox",void 0),a([e.Property(null)],i.prototype,"template",void 0),a([e.Property(null)],i.prototype,"headerTemplate",void 0),a([e.Property(null)],i.prototype,"customAttributes",void 0),i}(e.ChildProperty),f=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return s(r,i),a([e.Property(!1)],r.prototype,"enableAltRow",void 0),a([e.Property(null)],r.prototype,"rowHeight",void 0),a([e.Property("Default")],r.prototype,"gridLines",void 0),a([e.Property(!1)],r.prototype,"allowTextWrap",void 0),a([e.Property(t.WrapMode.Both)],r.prototype,"textWrapMode",void 0),a([e.Property(!1)],r.prototype,"allowResizing",void 0),a([e.Event()],r.prototype,"resizing",void 0),a([e.Event()],r.prototype,"resizeStart",void 0),a([e.Event()],r.prototype,"resizeStop",void 0),r}(e.ChildProperty),g=function(g){function y(t,e){var i=g.call(this,t,e)||this;return i.gridInject=new d,i.gridInject.InjectModules(),i}return s(y,g),y.prototype.preRender=function(){this.element.id||(this.element.id=e.getUniqueID("e-"+this.getModuleName())),this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",end:"end",enter:"enter",home:"home",moveDown:"downarrow",moveUp:"uparrow"},this.matchedRowEle=this.matchedContent=this.exactMatchedContent=null,this.persistData()},y.prototype.getDirective=function(){return"EJS-MULTICOLUMNCOMBOBOX"},y.prototype.getModuleName=function(){return"multicolumncombobox"},y.prototype.getPersistData=function(){return this.addOnPersist(["value"])},y.prototype.persistData=function(){if(this.enablePersistence){this.element.id+="_wrapper";var t=window.localStorage.getItem(this.getModuleName()+this.element.id);e.isNullOrUndefined(t)||""===t||this.setProperties(JSON.parse(t),!0)}},y.prototype.render=function(){this.renderGrid(),this.renderInput(),this.popupDiv=this.createElement("div",{className:"e-popup-content"}),this.popupDiv.appendChild(this.gridEle),this.setHTMLAttributes(),this.renderPopup(),this.wireEvents()},y.prototype.renderGrid=function(){var i=this,r=this.getGridColumns(),o=this.sortOrder.toString().toLowerCase();this.gridObj=new n.Grid({dataSource:this.dataSource,columns:r,allowSorting:this.allowSorting,enableStickyHeader:!0,gridLines:this.gridSettings.gridLines,rowHeight:this.gridSettings.rowHeight,enableAltRow:this.gridSettings.enableAltRow,enableVirtualization:this.enableVirtualization,enableRtl:this.enableRtl,editSettings:{allowAdding:!1},query:this.query,allowTextWrap:this.gridSettings.allowTextWrap,textWrapSettings:{wrapMode:this.gridSettings.textWrapMode},height:this.popupHeight,allowResizing:this.gridSettings.allowResizing,allowMultiSorting:"multiplecolumns"===this.sortType.toString().toLowerCase()&&this.allowSorting,rowTemplate:this.itemTemplate,dataBound:function(){i.onDataBound()},actionFailure:function(t){i.onActionFailure(t)},actionBegin:function(t){i.trigger("actionBegin",t)},actionComplete:this.handleActionComplete.bind(this),keyPressed:this.handleKeyPressed.bind(this),resizing:function(t){i.gridSettings.resizing&&i.gridSettings.resizing.call(i,t)},resizeStart:function(t){i.gridSettings.resizeStart&&i.gridSettings.resizeStart.call(i,t)},resizeStop:function(t){i.gridSettings.resizeStop&&i.gridSettings.resizeStop.call(i,t)}}),this.gridEle=this.createElement("div",{id:e.getUniqueID("grid"),className:"e-multicolumn-grid"}),this.updateGroupByField(),r.length>0&&(this.gridObj.columns[0].isPrimaryKey=!0),"none"!==o&&(this.gridObj.sortSettings={columns:[{field:this.fields.text,direction:"ascending"===o?t.SortOrder.Ascending:t.SortOrder.Descending}]}),this.gridObj.appendTo(this.gridEle)},y.prototype.handleActionComplete=function(t){this.trigger("actionComplete",t),"sorting"===t.requestType&&this.updateRowSelection(t),this.popupObj.refreshPosition(),this.gridObj.element.querySelector(".e-content").scrollTop=0},y.prototype.handleKeyPressed=function(t){"Enter"===t.key&&(t.cancel=!0,this.isPopupOpen&&(this.selectedGridRow(this.gridObj.getRows()[this.gridObj.selectedRowIndex],t,!0),this.hidePopup(t),this.focusIn(t))),this.fields.groupBy&&(t.cancel=!0,this.gridKeyActionHandler(t,!0))},y.prototype.isRowMatching=function(t,e,i){var r=function(t){var e=[];return t&&"object"==typeof t?Array.isArray(t)?t.forEach(function(t){return e.push.apply(e,r(t))}):Object.keys(t).forEach(function(i){return e.push.apply(e,r(t[""+i]))}):null!=t&&e.push(String(t)),e},o=r(t);return-1!==o.indexOf(e)&&-1!==o.indexOf(i)},y.prototype.updateRowSelection=function(t){var e=this;t&&t.rows.forEach(function(t){e.selectDataRow(t.data,t.index)})},y.prototype.selectDataRow=function(t,e){if(this.isRowMatching(t,this.value?this.value.toString():"",this.text?this.text.toString():"")){this.gridObj.selectRow(e);var i=this.isProtectedOnChange;return this.isProtectedOnChange=!0,this.index=e,void(this.isProtectedOnChange=i)}},y.prototype.findIndex=function(t,e){return t.findIndex(function(t){return Object.keys(e).every(function(i){return t[i]===e[i]})})},y.prototype.getGridColumns=function(){var t=this;return this.columns.map(function(e){var i=e.field,r=e.header,o=e.width,n=e.textAlign,s=e.format,a=e.displayAsCheckBox,l=e.template,p=e.headerTemplate,u=e.customAttributes;return{field:i,headerText:r,width:o,textAlign:""===n.toString()&&t.enableRtl?"Right":n,format:s,displayAsCheckBox:a,template:l,headerTemplate:p,customAttributes:u,type:a&&!s?"boolean":void 0}})},y.prototype.updateGroupByField=function(){var t=this.fields.groupBy,i=""!==t&&!e.isNullOrUndefined(t);if(i){"multiplecolumns"!==this.sortType.toString().toLowerCase()&&this.gridEle.classList.add("e-multicolumn-group");var r=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.gridObj.allowGrouping=!0,this.gridObj.groupSettings={showDropArea:!1,columns:[t]},this.groupTemplate&&i&&(this.gridObj.groupSettings.captionTemplate=this.groupTemplate),this.isVue&&(this.gridObj.isVue=this.isVue),this.isProtectedOnChange=r}},y.prototype.onDataBound=function(){var t=this.dataSource.length,i=this.popupDiv.querySelector(".e-multicolumn-grid"),r=this.popupDiv.classList.contains(u);if(t<=0&&i)this.l10nUpdate(),this.popupDiv.removeChild(this.gridEle),e.addClass([this.popupDiv],[u]);else if(r&&t>=1){e.removeClass([this.popupDiv],[u]);var o=this.popupDiv.querySelector(".e-no-records");o&&this.popupDiv.removeChild(o)}if(this.isInitialRender){var n=this.popupDiv.querySelector(".e-gridcontent tr"),s=r?this.popupDiv.getBoundingClientRect().height:n?n.getBoundingClientRect().height:0;this.popupRowHeight=s,this.popupObj.hide(),this.popupEle.style.visibility="unset",this.isInitialRender=!1}var a=this.gridObj.element.querySelectorAll(".e-row");this.isDataFiltered&&a.length>0&&""!==this.inputEle.value&&a[0].classList.add("e-row-focus")},y.prototype.onActionFailure=function(t){this.trigger("actionFailure",t),this.l10nUpdate(!0),e.addClass([this.popupDiv],[u])},y.prototype.renderInput=function(){var t=["aria-expanded","aria-readOnly","aria-disabled","autocomplete","autocapitalize","spellcheck","tabindex"];"INPUT"===this.element.tagName?(this.inputEle=this.element,e.isNullOrUndefined(this.inputEle.getAttribute("role"))&&this.inputEle.setAttribute("role","combobox"),e.isNullOrUndefined(this.inputEle.getAttribute("type"))&&this.inputEle.setAttribute("type","text"),function(i,r){for(var o in r)r.hasOwnProperty(o)&&-1!==t.indexOf(o)&&e.isNullOrUndefined(i.getAttribute(o))&&i.setAttribute(o,r[o])}(this.inputEle,{"aria-expanded":"false","aria-readOnly":this.readonly.toString(),"aria-disabled":this.disabled.toString(),autocomplete:"off",autocapitalize:"off",spellcheck:"false",tabindex:"0"})):(this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.parentElement.insertBefore(this.inputEle,this.element)),this.inputObj=i.Input.createInput({element:this.inputEle,buttons:["e-input-group-icon e-multicolumn-list-icon e-icons"],floatLabelType:this.floatLabelType,properties:{enabled:!this.disabled,readonly:this.readonly,placeholder:this.placeholder,enableRtl:this.enableRtl,showClearButton:this.showClearButton,cssClass:this.cssClass}},this.createElement),this.inputWrapper=this.inputObj.container,this.inputWrapper.classList.add("e-multicolumn-list"),this.inputWrapper.setAttribute("spellcheck","false"),this.element.tagName===this.getDirective()&&this.element.appendChild(this.inputWrapper),this.setElementWidth(this.width),e.isNullOrUndefined(this.value)&&e.isNullOrUndefined(this.text)&&e.isNullOrUndefined(this.index)||this.initValue(null,null,!0)},y.prototype.setElementWidth=function(t){if(!e.isNullOrUndefined(t)){var i=this.inputWrapper;"number"==typeof t?i.style.width=e.formatUnit(t):"string"==typeof t&&(i.style.width=t.match(/px|%|em/)?t:e.formatUnit(t))}},y.prototype.setHTMLAttributes=function(){var t=this.htmlAttributes,e=this.inputEle;if(Object.keys(t).length)for(var r=0,o=Object.keys(t);r<o.length;r++){var n=o[r];switch(n){case"class":this.inputWrapper.classList.add(t[n]);break;case"disabled":this.setProperties({enabled:!1},!0),this.setEnable();break;case"readonly":this.setProperties({readonly:!0},!0),this.dataBind();break;case"style":this.inputWrapper.setAttribute("style",t[n]);break;default:["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"].indexOf(n)>-1&&"placeholder"===n?i.Input.setPlaceholder(t[n],e):e.setAttribute(n,t[n])}}},y.prototype.setEnable=function(){i.Input.setEnabled(!this.disabled,this.inputEle),this.disabled?(this.isPopupOpen&&this.hidePopup(),e.addClass([this.inputWrapper],"e-disabled"),this.inputWrapper&&this.inputWrapper.classList.contains("e-input-focus")&&e.removeClass([this.inputWrapper],["e-input-focus"]),this.setAriaDisabled("true")):(e.removeClass([this.inputWrapper],"e-disabled"),this.setAriaDisabled("false"))},y.prototype.setAriaDisabled=function(t){this.inputEle.setAttribute("aria-disabled",t),this.inputWrapper.setAttribute("aria-disabled",t)},y.prototype.updateFieldValue=function(t,i){return e.getValue(t,i).toString()},y.prototype.initValue=function(t,i,o){var n,s,a,l,p=this,u=this.gridObj.getSelectedRecords()[0],d=this.gridObj.getSelectedRows()[0],h=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=this.value?this.value.toString():this.value,this.isProtectedOnChange=h;var c=function(t){var e=p.updateCurrentValues(n,t);s=e.currentValue,a=e.currentText,l=e.currentIndex};if(!t&&(!e.isNullOrUndefined(this.value)||!e.isNullOrUndefined(this.text))||t&&void 0!==i){var f=t?i?this.value:this.text:e.isNullOrUndefined(this.value)?this.text:this.value;!e.isNullOrUndefined(this.dataSource)&&this.dataSource instanceof r.DataManager?this.dataSource.executeQuery(new r.Query).then(function(r){var h=r.result,g=h.filter(function(r){return p.updateFieldValue(t?i?p.fields.value:p.fields.text:e.isNullOrUndefined(p.value)?p.fields.text:p.fields.value,r)===f});g.length>0&&(n=g[0],c(h),p.updateChangeEvent(n,u,d,s,a,l,t,o),p.gridObj.selectRow(p.index))}):!e.isNullOrUndefined(this.dataSource)&&this.dataSource instanceof Array&&(n=this.dataSource.filter(function(r){return p.updateFieldValue(t?i?p.fields.value:p.fields.text:e.isNullOrUndefined(p.value)?p.fields.text:p.fields.value,r)===f})[0],c(this.dataSource))}else e.isNullOrUndefined(this.index)||(!e.isNullOrUndefined(this.dataSource)&&this.dataSource instanceof r.DataManager?this.dataSource.executeQuery(new r.Query).then(function(e){var i=e.result;n=i[p.index],c(i),p.updateChangeEvent(n,u,d,s,a,l,t,o),p.gridObj.selectRow(p.index)}):!e.isNullOrUndefined(this.dataSource)&&this.dataSource instanceof Array&&(this.fields.groupBy?setTimeout(function(){var e=p.gridObj.getRows();if(e&&e.length>0)for(var i=p.gridObj.getRowInfo(e[p.index]).rowData,r=p.fields.value,h=0;h<e.length;h++)if(i&&i[parseInt(r.toString(),10)]===p.dataSource[parseInt(h.toString(),10)][parseInt(r.toString(),10)]){n=i,c(p.dataSource),p.updateChangeEvent(n,u,d,s,a,l,t,o),p.gridObj.selectRow(p.index);break}}):(n=this.dataSource[this.index],c(this.dataSource))));this.dataSource instanceof r.DataManager||this.updateChangeEvent(n,u,d,s,a,l,t,o)},y.prototype.updateChangeEvent=function(t,e,i,r,o,n,s,a){var l=t?this.updateFieldValue(this.fields.value,t):null,p={value:t?l:null,itemData:{text:o,value:r},item:this.getDataByValue(this.value),previousItemData:e,previousItemElement:i,itemElement:this.inputWrapper,event:null,isInteracted:!s};this.updateValues(r,o,n,p,a)},y.prototype.updateCurrentValues=function(t,r){if(!e.isNullOrUndefined(t)){var o=this.updateFieldValue(this.fields.text,t),n=this.updateFieldValue(this.fields.value,t);return i.Input.setValue(o,this.inputEle,this.floatLabelType,this.showClearButton),{currentValue:n,currentText:o,currentIndex:r.indexOf(t)}}return{currentValue:null,currentText:null,currentIndex:null}},y.prototype.renderPopup=function(){this.popupEle=this.createElement("div",{id:this.element.id+"_options",className:"e-multicolumn-list e-popup "+(null!==this.cssClass?this.cssClass:"")}),e.attributes(this.popupEle,{"aria-label":this.element.id,role:"dialog"}),document.body.appendChild(this.popupEle),this.createPopup(this.popupEle),e.prepend([this.popupDiv],this.popupEle),this.footerTemplate&&this.setFooterTemplate();var t=this.getSize(!1);if(this.popupEle.style.maxHeight=t,this.footerTemplate){this.footer=this.footer?this.footer:this.popupEle.querySelector(".e-popup-footer");var i=Math.round(this.footer.getBoundingClientRect().height);t=e.formatUnit(parseInt(t,10)-i+"px")}this.popupDiv.style.maxHeight=t,this.updateGridHeight(),this.popupEle.style.visibility="hidden",this.isInitialRender=!0},y.prototype.updateGridHeight=function(t,i,r){var o;if(t){var n=this.gridObj.getContent().querySelector(".e-content"),s=n.offsetHeight-n.clientHeight,a=r*this.popupRowHeight;""===this.fields.groupBy||e.isNullOrUndefined(this.fields.groupBy)||(a+=this.popupRowHeight),o=i&&a<this.prevGridHeight?a+s+"px":this.prevGridHeight+"px"}else this.prevGridHeight=this.popupDiv.getBoundingClientRect().height-this.popupDiv.querySelector(".e-gridheader").getBoundingClientRect().height,o=this.prevGridHeight+"px";var l=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.gridObj.height=o,this.isProtectedOnChange=l},y.prototype.createPopup=function(t){var i=this;this.popupObj=new o.Popup(t,{width:this.getSize(!0),targetType:"relative",collision:{X:"flip",Y:"flip"},relateTo:this.inputWrapper,enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},targetExitViewport:function(){e.Browser.isDevice||i.hidePopup()},open:function(){i.inputEle.focus(),i.updateClearIconState()}})},y.prototype.setFooterTemplate=function(){this.footer?this.isReact&&"function"==typeof this.footerTemplate?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),e.addClass([this.footer],"e-popup-footer"));var t=this.getTemplateFunction(this.footerTemplate)({count:this.dataSource.length},this,"footerTemplate",this.element.id+"footerTemplate",this.isStringTemplate,void 0,this.footer);t&&(t=Array.prototype.slice.call(t),e.append(t,this.footer)),e.append([this.footer],this.popupEle)},y.prototype.l10nUpdate=function(t){if(this.noRecord?this.noRecord.innerHTML="":this.noRecord=this.createElement("div"),"No records found"!==this.noRecordsTemplate||"Request Failed"!==this.actionFailureTemplate){var i=t?this.actionFailureTemplate:this.noRecordsTemplate,r=t?this.element.id+"_actionFailure":this.element.id+"_noRecords",o=t?"actionFailureTemplate":"noRecordsTemplate",n=this.getTemplateFunction(i)({},this,o,r,this.isStringTemplate,void 0,this.noRecord);n&&(n=Array.prototype.slice.call(n),e.append(n,this.noRecord))}else{var s={noRecordsTemplate:"No records found",actionFailureTemplate:"Request Failed"};this.l10n=new e.L10n("multicolumncombobox",s,this.locale),this.noRecord.innerHTML=t?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate")}e.addClass([this.noRecord],"e-no-records"),e.prepend([this.noRecord],this.popupDiv),this.popupObj.refreshPosition()},y.prototype.getTemplateFunction=function(t){if("string"==typeof t){var i="";try{var r=e.select(t);i=r?"SCRIPT"===r.tagName?r.innerHTML:r.outerHTML:t}catch(e){i=t}return e.compile(i)}return e.compile(t)},y.prototype.getSize=function(t){var i=t?this.popupWidth:this.popupHeight,r=e.formatUnit(i);return r.includes("%")?r=((t?this.inputWrapper.offsetWidth:document.documentElement.clientHeight)*parseFloat(r)/100).toString()+"px":"string"==typeof i&&(r=i.match(/px|em/)?i:r),r},y.prototype.selectedGridRow=function(t,e,r){var o=this,n={isInteracted:!!e,item:this.gridObj.getSelectedRecords()[0],itemElement:t,itemData:this.gridObj.getSelectedRecords()[0],event:e,cancel:!1},s=this.gridObj.getSelectedRecords()[0],a=s?this.updateFieldValue(this.fields.text,s):"",l=s?this.updateFieldValue(this.fields.value,s):"",p={isInteracted:!!e,item:s,itemElement:t,itemData:{text:s?a:"",value:s?l:""},event:e,cancel:!1,value:s?l:"",previousItemData:{text:this.text,value:this.value},previousItemElement:this.previousItemElement};this.trigger("select",n,function(t){if(!t.cancel&&t.itemData){t.itemData;var n=e,u="Enter"===n.key||"Tab"===n.key||n.shiftKey&&"Tab"===n.key||n.altKey&&"ArrowUp"===n.key;(!r||r&&u)&&o.updateValues(s?l:"",s?a:"",o.gridObj.selectedRowIndex,p),i.Input.setValue(s?a:"",o.inputEle,o.floatLabelType,o.showClearButton),(!r||r&&u)&&o.hidePopup(e)}})},y.prototype.updateValues=function(t,i,r,o,n){this.previousItemElement=o.itemElement;var s=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.text=i||this.text,this.value=t||this.value,this.index=e.isNullOrUndefined(r)?this.index:r,this.isProtectedOnChange=s,n||this.triggerChangeEvent(o)},y.prototype.triggerChangeEvent=function(t){this.trigger("change",t,function(t){t.cancel})},y.prototype.inputHandler=function(t){var e=this;if(this.showPopup(null,!0),this.updateClearIconState(),this.allowFiltering){var i=t.target.value.toLowerCase(),r=!1,o={preventDefaultAction:!1,text:i,updateData:function(t,n,s){o.cancel||(r=!0,e.filterAction(t,i,n,s))},event:t,cancel:!1};this.trigger("filtering",o,function(t){t.cancel||t.preventDefaultAction||r||e.filterAction(e.dataSource,i,e.query,e.fields)})}this.updateInputValue(t.target.value)},y.prototype.updateInputValue=function(t){return l(this,void 0,void 0,function(){var e,i,o,n,s,a,l;return p(this,function(p){switch(p.label){case 0:return this.dataSource instanceof r.DataManager?(s=new r.Query,[4,this.dataSource.executeQuery(s)]):[3,2];case 1:return a=p.sent(),l=a.result,e=this.filterDatas(l,t),o=e.data,n=e.exactData,[3,3];case 2:Array.isArray(this.dataSource)&&(i=this.filterDatas(this.dataSource,t),o=i.data,n=i.exactData),p.label=3;case 3:return this.selectFilteredRows(o,n),[2]}})})},y.prototype.filterDatas=function(t,e){var i=this;return{data:t.filter(function(t){return i.updateFieldValue(i.fields.text,t).toLowerCase().startsWith(e.toLowerCase())}),exactData:t.filter(function(t){return i.updateFieldValue(i.fields.text,t)===e})}},y.prototype.selectFilteredRows=function(t,e){if(t.length<=0)return void(this.matchedRowEle=this.matchedContent=this.exactMatchedContent=null);this.matchedContent=t[0],this.exactMatchedContent=e[0];var i=this.findIndex(this.gridObj.currentViewData,this.matchedContent);this.matchedRowEle=this.gridObj.getRowByIndex(i)},y.prototype.filterAction=function(t,i,o,n){var s=this,a=o||new r.Query,l=this.filterType.toString().toLowerCase();if(e.isNullOrUndefined(o)&&e.isNullOrUndefined(n))this.updateGridDataSource(t);else if(o)t instanceof r.DataManager?this.filteringHandler(t,i,o,n):new r.DataManager(t).executeQuery(o).then(function(t){var e=t.result;s.updateGridDataSource(e)});else if(t instanceof r.DataManager)this.filteringHandler(t,i,a,n);else if(Array.isArray(t)){var p=t.filter(function(t){return s.filterData(t,l,i,n)});this.updateGridDataSource(p)}},y.prototype.filteringHandler=function(t,e,i,r){var o,n=this,s=this.filterType.toString().toLowerCase();t.executeQuery(i).then(function(t){var i=t.result,a=i.length;o=i.filter(function(t){return n.filterData(t,s,e,r)}),n.updateGridDataSource(o,a)})},y.prototype.filterData=function(t,e,i,r){var o=this.updateFieldValue(r?r.text:this.fields.text,t).toLowerCase();switch(e){case"startswith":return o.startsWith(i);case"endswith":return o.endsWith(i);case"contains":return o.includes(i);default:return!1}},y.prototype.updateGridDataSource=function(t,i){var o=!0;if(t.length>0){o=(this.dataSource instanceof r.DataManager?i:this.dataSource.length)!==t.length,e.removeClass([this.popupDiv],[u]);var n=this.popupDiv.querySelector(".e-no-records");n&&this.popupDiv.removeChild(n),this.gridObj.dataSource=t,this.isDataFiltered=!0}else this.l10nUpdate(),e.addClass([this.popupDiv],[u]);this.updateGridHeight(!0,o,t.length)},y.prototype.wireEvents=function(){e.isNullOrUndefined(this.inputObj.buttons[0])||(e.EventHandler.add(this.inputObj.buttons[0],"mousedown",this.preventBlur,this),e.EventHandler.add(this.inputObj.buttons[0],"mousedown",this.dropDownClick,this)),e.EventHandler.add(document,"mousedown",this.onDocumentClick,this),e.EventHandler.add(this.gridEle,"click",this.onMouseClick,this),e.EventHandler.add(this.inputEle,"input",this.inputHandler,this),e.EventHandler.add(this.inputEle,"focus",this.focusIn,this),this.showClearButton&&e.EventHandler.add(this.inputObj.clearButton,"mousedown",this.clearText,this),e.EventHandler.add(window,"resize",this.windowResize,this),this.keyboardModule=new e.KeyboardEvents(this.inputWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.keyboardModule=new e.KeyboardEvents(this.gridEle,{keyAction:this.gridKeyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},y.prototype.unWireEvents=function(){e.isNullOrUndefined(this.inputObj.buttons[0])||(e.EventHandler.remove(this.inputObj.buttons[0],"mousedown",this.preventBlur),e.EventHandler.remove(this.inputObj.buttons[0],"mousedown",this.dropDownClick)),e.EventHandler.remove(document,"mousedown",this.onDocumentClick),e.EventHandler.remove(this.inputEle,"input",this.inputHandler),e.EventHandler.remove(this.inputWrapper,"focus",this.focusIn),e.EventHandler.remove(window,"resize",this.windowResize),e.EventHandler.remove(this.gridEle,"click",this.onMouseClick),this.showClearButton&&e.EventHandler.remove(this.inputObj.clearButton,"mousedown",this.clearText),this.keyboardModule&&this.keyboardModule.destroy()},y.prototype.preventBlur=function(t){t.preventDefault()},y.prototype.dropDownClick=function(t){if(!this.disabled&&!this.readonly){var e=this.gridEle.querySelector(".e-row-focus");e&&e.classList.remove("e-row-focus"),this.isPopupOpen?this.hidePopup(t):this.showPopup(t)}},y.prototype.onMouseClick=function(t){var i=t.target,r=e.closest(i,".e-row"),o=this.gridObj.selectedRowIndex;r&&(o>=0?this.selectedGridRow(r,t):(this.gridObj.selectedRowIndex=this.gridObj.getRows().indexOf(r),this.gridObj.selectRow(this.gridObj.selectedRowIndex),this.hidePopup(t)))},y.prototype.onDocumentClick=function(t){var i=t.target;if(this.disabled||this.readonly||!this.isPopupOpen)return void(i.closest(".e-multicolumn-list")||this.focusOut());if(i.classList.contains("e-multicolumn-list-icon")||e.closest(i,".e-popup"))t.preventDefault();else if(!i.classList.contains("e-multicolumncombobox")&&!i.classList.contains("e-clear-icon")){e.isNullOrUndefined(this.text)||this.updateInputValue(this.text);var r=""===this.inputEle.value;this.updateValuesOnInput(t,null,r)}},y.prototype.updateValuesOnInput=function(t,e,i,r){var o=this;void 0===r&&(r=!1);var n=t||e,s=r?this.matchedContent:this.exactMatchedContent;if(s||(this.inputEle.value=this.value=this.index=this.text=null),this.hidePopup(n),this.matchedRowEle&&!i&&s)setTimeout(function(){var t=o.isProtectedOnChange;o.isProtectedOnChange=!0;var e=o.updateFieldValue(o.fields.text,o.matchedContent),i=o.updateFieldValue(o.fields.value,o.matchedContent);o.inputEle.value=e,o.value=i;var r=o.findIndex(o.gridObj.currentViewData,o.matchedContent);o.index=r,o.text=e,o.gridObj.selectRow(r),o.selectedGridRow(o.gridObj.getRowByIndex(r),n),o.previousItemElement=o.gridObj.getSelectedRows()[0],o.isProtectedOnChange=t},100);else if(this.isDataFiltered){this.inputEle.value="";var a={value:null,itemData:{text:null,value:null},item:null,previousItemData:{text:this.text,value:this.value},previousItemElement:this.previousItemElement,itemElement:null,event:n,isInteracted:!0,cancel:!1},l=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.text=this.value=this.index=null,this.gridObj.refreshColumns(),this.isProtectedOnChange=l,this.triggerChangeEvent(a),this.isDataFiltered=!1,this.matchedContent=this.matchedRowEle=null}},y.prototype.clearText=function(t){this.isDataFiltered=!0,this.updateValuesOnInput(t,null,!0)},y.prototype.windowResize=function(){this.popupObj&&(this.popupObj.setProperties({width:this.getSize(!0)}),this.popupObj.refreshPosition())},y.prototype.setCssClass=function(t,i){var r=this.popupObj?[this.inputWrapper,this.popupObj.element]:[this.inputWrapper];e.isNullOrUndefined(i)||""===i||e.removeClass(r,i.split(" ")),e.isNullOrUndefined(t)||""===t||e.addClass(r,t.split(" "))},y.prototype.keyActionHandler=function(t){switch(t.action){case"escape":case"altUp":case"shiftTab":case"tab":this.isPopupOpen?this.hidePopup(t):this.focusOut();break;case"altDown":this.isPopupOpen||(this.showPopup(t),this.updateSelectedItem(t,!1));break;case"moveDown":case"moveUp":this.updateSelectedItem(t,!0,!0);break;case"enter":this.updateValuesOnInput(null,t,!1,!0),this.focusIn(t);break;case"home":case"end":this.updateSelectedItem(t)}},y.prototype.gridKeyActionHandler=function(t,e){var i={ArrowDown:"moveDown",ArrowUp:"moveUp",End:"end",Home:"home",Tab:"tab",Escape:"escape","Shift+Tab":"shiftTab","Alt+ArrowUp":"altUp"};if(e){var r=(t.altKey?"Alt+":"")+(t.shiftKey?"Shift+":"")+t.key;t.action=i[r]||t.action}switch(t.action){case"escape":case"tab":case"shiftTab":case"altUp":this.isPopupOpen&&(t.preventDefault(),"escape"!==t.action&&this.updateSelectedItem(t),this.hidePopup(t));break;case"moveDown":case"moveUp":case"home":case"end":this.updateSelectedItem(t)}},y.prototype.updateSelectedItem=function(t,e,i){var o=this;if(void 0===e&&(e=!0),this.isPopupOpen){var n=this.fields.groupBy?this.gridObj.selectedRowIndex||0:this.gridObj.selectedRowIndex,s=this.dataSource instanceof r.DataManager?this.remoteDataLength:this.dataSource.length;-1===n&&("moveDown"===t.action||"moveUp"===t.action)||"home"===t.action?n=0:n>=s-1&&"moveDown"===t.action||"end"===t.action?n=s-1:"moveDown"===t.action&&n>=0&&n<=s-1&&(this.fields.groupBy||i)?n+=1:("moveUp"===t.action&&n>0&&this.fields.groupBy||i)&&(n-=1),this.enableVirtualization?setTimeout(function(){o.selectRow(t,e,n)}):this.selectRow(t,e,n)}},y.prototype.selectRow=function(t,e,i){void 0===e&&(e=!0),this.gridObj.selectRow(i),this.gridObj.selectedRowIndex=i;var r=this.gridEle.querySelector(".e-row-focus");r&&r.classList.remove("e-row-focus"),e&&this.selectedGridRow(this.gridObj.getRows()[parseInt(i.toString(),10)],t,!0)},y.prototype.updateClearIconState=function(){var t=this.inputWrapper.querySelector(".e-clear-icon");t&&(t.style.display=""===this.inputEle.value?"none":"flex")},y.prototype.updateDynamicDataSource=function(t,e){if(this.gridObj){var i;this.gridObj.dataSource=t,e instanceof r.DataManager?e.executeQuery(new r.Query).then(function(t){i=t.result.length}):i=e.length,0===i&&this.popupDiv.appendChild(this.gridEle)}},y.prototype.focusIn=function(t){this.disabled||this.readonly||(e.addClass([this.inputWrapper],["e-input-focus"]),this.inputEle.focus(),this.updateClearIconState(),this.trigger("focus",t),"Never"!==this.floatLabelType&&i.Input.calculateWidth(this.inputEle,this.inputWrapper))},y.prototype.focusOut=function(t){if(!this.disabled&&!this.readonly&&(this.isPopupOpen&&this.hidePopup(t),this.inputWrapper)){e.removeClass([this.inputWrapper],["e-input-focus"]);var r=this.inputWrapper.querySelector(".e-clear-icon");r&&(r.style.display="none"),"Never"!==this.floatLabelType&&i.Input.calculateWidth(this.inputEle,this.inputWrapper)}},y.prototype.showPopup=function(t,i){var o=this,n={name:"FadeIn",duration:100},s={popup:this.popupObj,event:t,cancel:!1,animation:n};this.trigger("open",s,function(n){if(!n.cancel&&!o.isPopupOpen){if(o.isPopupOpen=!0,o.popupObj.refreshPosition(),e.addClass([o.inputWrapper],["e-icon-anim"]),e.attributes(o.inputEle,{"aria-expanded":"true","aria-owns":o.element.id+"_popup","aria-controls":o.element.id}),!i){if(o.value||o.text||o.index){var s;o.gridObj.getRowsObject().forEach(function(t,i){o.fields.groupBy&&e.isNullOrUndefined(t.data.items)&&(e.isNullOrUndefined(s)?s=0:s+=1),o.selectDataRow(t.data,o.fields.groupBy?s:i)})}o.focusIn(t)}var a=o.gridObj.getContent();if(a){var l=a.querySelector(".e-rowcell.e-active"),p=a.querySelector(".e-row");l?o.inputEle.setAttribute("aria-activedescendant",l.parentElement.getAttribute("data-uid")):p&&o.inputEle.setAttribute("aria-activedescendant",p.getAttribute("data-uid"))}!e.isNullOrUndefined(o.dataSource)&&o.dataSource instanceof r.DataManager&&o.dataSource.executeQuery(new r.Query).then(function(t){o.remoteDataLength=t.result.length}),o.popupObj.show(new e.Animation(n.animation),o.popupEle)}})},y.prototype.hidePopup=function(t){var i=this,r={name:"FadeOut",duration:100},o={popup:this.popupObj,event:t||null,cancel:!1,animation:r},n=t?t.target:null;this.trigger("close",o,function(r){r.cancel||(i.isPopupOpen=!1,e.removeClass([i.inputWrapper],["e-icon-anim"]),e.attributes(i.inputEle,{"aria-expanded":"false"}),i.popupObj.hide(new e.Animation(r.animation)),n&&(n.classList.contains("e-multicolumn-list-icon")||n.classList.contains("e-rowcell"))?(i.value||i.gridObj.refreshColumns(),setTimeout(function(){i.focusIn(t)})):i.focusOut(),i.inputEle.removeAttribute("aria-owns"),i.inputEle.removeAttribute("aria-activedescendant"))}),setTimeout(function(){i.gridObj&&(i.gridObj.dataSource=i.dataSource,i.updateGridHeight(!0,!1))},100)},y.prototype.addItems=function(t,e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.gridObj.editSettings.allowAdding=!0,this.gridObj.dataBind(),this.isProtectedOnChange=i,this.gridObj.addRecord(t,e)},y.prototype.getItems=function(){return this.gridObj.getDataRows()},y.prototype.getDataByValue=function(t){var i=this;return!e.isNullOrUndefined(this.dataSource)&&this.dataSource instanceof Array?this.dataSource.filter(function(e){return i.updateFieldValue(i.fields.value,e)===t})[0]:(!e.isNullOrUndefined(this.dataSource)&&this.dataSource instanceof r.DataManager&&this.dataSource.executeQuery(new r.Query).then(function(e){return e.result.filter(function(e){return i.updateFieldValue(i.fields.value,e)===t})[0]}),null)},y.prototype.destroy=function(){if(this.unWireEvents(),this.gridObj&&(this.gridObj.destroy(),e.detach(this.gridObj.element)),this.inputEle){for(var t=["placeholder","aria-expanded","spellcheck","aria-label","role","type","aria-owns","aria-controls","aria-readonly","autocomplete","autocapitalize","spellcheck","aria-activedescendant"],r=0;r<t.length;r++)this.inputEle.removeAttribute(t[r]);this.inputEle.classList.remove("e-input"),i.Input.setValue("",this.inputEle,this.floatLabelType,this.showClearButton)}this.popupEle&&(this.popupEle.removeAttribute("aria-label"),this.popupEle.removeAttribute("role")),this.popupObj&&(this.popupObj.destroy(),e.detach(this.popupObj.element)),this.element.tagName!==this.getDirective()&&this.inputWrapper.parentElement.insertBefore(this.element,this.inputWrapper),this.inputObj&&(e.detach(this.inputObj.container),this.inputObj=null),i.Input.destroy({element:this.inputEle,floatLabelType:this.floatLabelType,properties:this.properties}),e.detach(this.inputWrapper),e.detach(this.popupDiv),this.inputEle=null,this.previousItemElement=null,this.inputWrapper.innerHTML="",this.inputWrapper=null,this.popupDiv=null,this.popupObj=null,this.gridObj=null,this.gridEle=null,this.popupEle=null,this.footer=null,this.noRecord=null,g.prototype.destroy.call(this)},y.prototype.onPropertyChanged=function(r,o){for(var n=0,s=Object.keys(r);n<s.length;n++){var a=s[n],l=void 0;switch(a){case"width":case"popupWidth":"width"===a&&this.setElementWidth(r.width),this.popupObj&&(this.popupObj.element.style.width=this.getSize(!0));break;case"popupHeight":if(this.popupObj){var p=this.getSize(!1);this.popupObj.element.style.maxHeight=p,this.popupDiv.style.maxHeight=p,this.gridObj.height=p}break;case"placeholder":i.Input.setPlaceholder(r.placeholder,this.inputEle);break;case"readonly":i.Input.setReadonly(this.readonly,this.inputEle);break;case"disabled":i.Input.setEnabled(!this.disabled,this.inputEle),this.setEnable();break;case"cssClass":this.setCssClass(r.cssClass,o.cssClass);break;case"floatLabelType":i.Input.removeFloating(this.inputObj),i.Input.addFloating(this.inputEle,this.floatLabelType,this.placeholder);break;case"showClearButton":i.Input.setClearButton(r.showClearButton,this.inputEle,this.inputObj);break;case"value":this.initValue(!0,!0);break;case"text":this.initValue(!0,!1);break;case"index":this.initValue(!0);break;case"sortOrder":this.gridObj&&(this.gridObj.sortSettings.columns=[{field:this.fields.text,direction:r.sortOrder===t.SortOrder.Ascending?t.SortOrder.Ascending:t.SortOrder.Descending}]);break;case"htmlAttributes":this.setHTMLAttributes();break;case"noRecordsTemplate":this.l10nUpdate();break;case"actionFailureTemplate":this.l10nUpdate(!0);break;case"footerTemplate":this.setFooterTemplate();break;case"itemTemplate":this.gridObj&&(this.gridObj.rowTemplate=r.itemTemplate);break;case"groupTemplate":this.groupTemplate=r.groupTemplate,this.updateGroupByField();break;case"enableRtl":this.gridObj&&this.popupObj&&(this.gridObj.enableRtl=r.enableRtl,i.Input.setEnableRtl(r.enableRtl,[this.inputWrapper]),this.popupObj.enableRtl=r.enableRtl);break;case"dataSource":this.updateDynamicDataSource(r.dataSource,o.dataSource);break;case"query":this.gridObj&&(this.gridObj.query=r.query);break;case"gridSettings":this.gridObj&&(this.gridObj.gridLines=r.gridSettings.gridLines,this.gridObj.rowHeight=r.gridSettings.rowHeight,this.gridObj.enableAltRow=r.gridSettings.enableAltRow,this.gridObj.allowResizing=r.gridSettings.allowResizing,e.isNullOrUndefined(r.gridSettings.allowTextWrap)||(this.gridObj.allowTextWrap=r.gridSettings.allowTextWrap),e.isNullOrUndefined(r.gridSettings.textWrapMode)||(this.gridObj.textWrapSettings.wrapMode=r.gridSettings.textWrapMode));break;case"fields":this.fields=r.fields,this.updateGroupByField();break;case"filterType":this.filterType=r.filterType;break;case"enableVirtualization":this.gridObj&&(this.enableVirtualization=this.gridObj.enableVirtualization=r.enableVirtualization);break;case"sortType":this.gridObj&&(this.sortType=r.sortType,this.gridObj.allowMultiSorting="multiplecolumns"===this.sortType.toString().toLowerCase()&&this.allowSorting);break;case"allowFiltering":this.allowFiltering=r.allowFiltering;break;case"allowSorting":this.gridObj&&(this.allowSorting=this.gridObj.allowSorting=r.allowSorting);break;case"columns":this.gridObj&&(l=this.getGridColumns(),this.gridObj.columns=l)}}},a([e.Property([])],y.prototype,"dataSource",void 0),a([e.Property(null)],y.prototype,"text",void 0),a([e.Property(null)],y.prototype,"value",void 0),a([e.Property(null)],y.prototype,"index",void 0),a([e.Property("100%")],y.prototype,"width",void 0),a([e.Property("300px")],y.prototype,"popupHeight",void 0),a([e.Property("100%")],y.prototype,"popupWidth",void 0),a([e.Property(null)],y.prototype,"placeholder",void 0),a([e.Property(!0)],y.prototype,"allowFiltering",void 0),a([e.Property(!0)],y.prototype,"allowSorting",void 0),a([e.Property(!1)],y.prototype,"showClearButton",void 0),a([e.Property("")],y.prototype,"cssClass",void 0),a([e.Complex({text:null,value:null,groupBy:null},h)],y.prototype,"fields",void 0),a([e.Collection([],c)],y.prototype,"columns",void 0),a([e.Complex({},f)],y.prototype,"gridSettings",void 0),a([e.Property(t.FilterType.StartsWith)],y.prototype,"filterType",void 0),a([e.Property("Never")],y.prototype,"floatLabelType",void 0),a([e.Property(t.SortOrder.None)],y.prototype,"sortOrder",void 0),a([e.Property(t.SortType.OneColumn)],y.prototype,"sortType",void 0),a([e.Property(!1)],y.prototype,"enableVirtualization",void 0),a([e.Property(!1)],y.prototype,"disabled",void 0),a([e.Property(!1)],y.prototype,"readonly",void 0),a([e.Property(!1)],y.prototype,"enablePersistence",void 0),a([e.Property()],y.prototype,"query",void 0),a([e.Property(null)],y.prototype,"itemTemplate",void 0),a([e.Property(null)],y.prototype,"footerTemplate",void 0),a([e.Property(null)],y.prototype,"groupTemplate",void 0),a([e.Property("Request Failed")],y.prototype,"actionFailureTemplate",void 0),a([e.Property("No records found")],y.prototype,"noRecordsTemplate",void 0),a([e.Property({})],y.prototype,"htmlAttributes",void 0),a([e.Event()],y.prototype,"created",void 0),a([e.Event()],y.prototype,"open",void 0),a([e.Event()],y.prototype,"close",void 0),a([e.Event()],y.prototype,"actionFailure",void 0),a([e.Event()],y.prototype,"actionBegin",void 0),a([e.Event()],y.prototype,"actionComplete",void 0),a([e.Event()],y.prototype,"filtering",void 0),a([e.Event()],y.prototype,"select",void 0),a([e.Event()],y.prototype,"change",void 0),y=a([e.NotifyPropertyChanges],y)}(e.Component);return t.Column=c,t.FieldSettings=h,t.GridSettings=f,t.MultiColumnComboBox=g,t.MultiColumnGrid=d,t}({},ej.base,ej.inputs,ej.data,ej.popups,ej.grids),this.ejs=ej;
//# sourceMappingURL=ej2-multicolumn-combobox.min.js.map
