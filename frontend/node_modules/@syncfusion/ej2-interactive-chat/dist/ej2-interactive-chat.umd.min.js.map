{"version":3,"file":"ej2-interactive-chat.umd.min.js","sources":["../src/interactive-chat-base/interactive-chat-base.js","../src/ai-assistview/ai-assistview.js","../src/chat-ui/chat-ui.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, select, compile, NotifyPropertyChanges, isNullOrUndefined as isNOU, formatUnit, Event, append, addClass, removeClass, Property, ChildProperty, Collection } from '@syncfusion/ej2-base';\nimport { attributes, EventHandler, remove } from '@syncfusion/ej2-base';\nimport { TextArea } from '@syncfusion/ej2-inputs';\n/**\n * Represents a toolbar item model in the component.\n */\nvar ToolbarItem = /** @class */ (function (_super) {\n    __extends(ToolbarItem, _super);\n    function ToolbarItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property()\n    ], ToolbarItem.prototype, \"text\", void 0);\n    __decorate([\n        Property('Button')\n    ], ToolbarItem.prototype, \"type\", void 0);\n    __decorate([\n        Property('Left')\n    ], ToolbarItem.prototype, \"align\", void 0);\n    __decorate([\n        Property(true)\n    ], ToolbarItem.prototype, \"visible\", void 0);\n    __decorate([\n        Property(false)\n    ], ToolbarItem.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"tooltip\", void 0);\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(null)\n    ], ToolbarItem.prototype, \"template\", void 0);\n    __decorate([\n        Property(-1)\n    ], ToolbarItem.prototype, \"tabIndex\", void 0);\n    return ToolbarItem;\n}(ChildProperty));\nexport { ToolbarItem };\n/**\n * Represents the settings for the toolbar in the component.\n */\nvar ToolbarSettings = /** @class */ (function (_super) {\n    __extends(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], ToolbarItem)\n    ], ToolbarSettings.prototype, \"items\", void 0);\n    __decorate([\n        Event()\n    ], ToolbarSettings.prototype, \"itemClicked\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\nexport { ToolbarSettings };\n/**\n * ChatBase component act as base class.\n */\nvar InterActiveChatBase = /** @class */ (function (_super) {\n    __extends(InterActiveChatBase, _super);\n    /**\n     * * Constructor for Base class\n     *\n     * @param {InterActiveChatBaseModel} options - Specifies the Base model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function InterActiveChatBase(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    InterActiveChatBase.prototype.preRender = function () {\n    };\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @private\n     * @returns {string} - It returns the current module name.\n     */\n    InterActiveChatBase.prototype.getModuleName = function () {\n        return 'interactivechatBase';\n    };\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @private\n     * @returns {string} - It returns the persisted data.\n     */\n    InterActiveChatBase.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    InterActiveChatBase.prototype.render = function () {\n    };\n    /* To calculate the width when change via set model */\n    InterActiveChatBase.prototype.setDimension = function (element, width, height) {\n        element.style.width = !isNOU(width) ? formatUnit(width) : element.style.width;\n        element.style.height = !isNOU(height) ? formatUnit(height) : element.style.height;\n    };\n    InterActiveChatBase.prototype.addCssClass = function (element, cssClass) {\n        if (cssClass) {\n            element.classList.add(cssClass);\n        }\n    };\n    InterActiveChatBase.prototype.addRtlClass = function (element, isRtl) {\n        if (isRtl) {\n            element.classList.add('e-rtl');\n        }\n    };\n    InterActiveChatBase.prototype.updateCssClass = function (element, newClass, oldClass) {\n        if (oldClass) {\n            removeClass([element], oldClass.trim().split(' '));\n        }\n        if (newClass) {\n            addClass([element], newClass.trim().split(' '));\n        }\n    };\n    InterActiveChatBase.prototype.updateHeader = function (showHeader, headerElement, viewWrapper) {\n        if (!showHeader) {\n            headerElement.hidden = true;\n            viewWrapper.style.height = '100%';\n        }\n        else {\n            headerElement.hidden = false;\n            viewWrapper.style.height = '';\n        }\n    };\n    InterActiveChatBase.prototype.renderViewSections = function (element, headerClassName, viewClassName) {\n        var headerWrapper = this.createElement('div', { attrs: { class: headerClassName } });\n        element.appendChild(headerWrapper);\n        var viewWrapper = this.createElement('div', { attrs: { class: viewClassName } });\n        element.appendChild(viewWrapper);\n    };\n    InterActiveChatBase.prototype.createViewComponents = function (viewWrapper) {\n        var contentWrapper = this.createElement('div', { attrs: { class: 'e-views' } });\n        var viewContainer = this.createElement('div', { attrs: { class: 'e-view-container' } });\n        contentWrapper.appendChild(viewContainer);\n        viewWrapper.appendChild(contentWrapper);\n    };\n    InterActiveChatBase.prototype.updateScroll = function (scrollElement) {\n        scrollElement.scrollTo(0, scrollElement.scrollHeight);\n    };\n    InterActiveChatBase.prototype.getElement = function (element) {\n        var className;\n        switch (element) {\n            case 'footer':\n                className = 'e-footer';\n                break;\n            case 'contentContainer':\n                className = 'e-content-container';\n                break;\n            case 'outputElement':\n                className = 'e-content';\n                break;\n            default:\n                className = '';\n                break;\n        }\n        return this.createElement('div', { attrs: { class: className } });\n    };\n    InterActiveChatBase.prototype.createSuggestionElement = function (suggestionHeader) {\n        var suggestionContainer = this.createElement('div', { attrs: { class: 'e-suggestions' } });\n        var suggestionHeaderElement = this.createElement('div', { attrs: { class: 'e-suggestion-header' } });\n        var suggestionListElement = this.createElement('div', { attrs: { class: 'e-suggestion-list' } });\n        if (suggestionHeader) {\n            suggestionContainer.appendChild(suggestionHeaderElement);\n        }\n        suggestionContainer.appendChild(suggestionListElement);\n        return { suggestionContainer: suggestionContainer, suggestionHeaderElement: suggestionHeaderElement, suggestionListElement: suggestionListElement };\n    };\n    InterActiveChatBase.prototype.renderSuggestions = function (suggestionsArray, suggestionHeader, suggestionTemplate, contextName, templateName, onSuggestionClick) {\n        var isSuggestionTemplate = suggestionTemplate ? true : false;\n        if (suggestionsArray && suggestionsArray.length > 0) {\n            var _a = this.createSuggestionElement(suggestionHeader), suggestionContainer = _a.suggestionContainer, suggestionHeaderElement = _a.suggestionHeaderElement, suggestionListElement = _a.suggestionListElement;\n            this.suggestionsElement = suggestionContainer;\n            var suggestionContainerClass = \"e-suggestions \" + (isSuggestionTemplate ? 'e-suggestion-item-template' : '');\n            this.suggestionsElement.className = suggestionContainerClass;\n            this.suggestionHeader = suggestionHeaderElement;\n            var suggestionList = suggestionListElement;\n            this.renderSuggestionList(suggestionsArray, suggestionList, isSuggestionTemplate, contextName, suggestionTemplate, templateName, onSuggestionClick);\n            if (suggestionHeader) {\n                this.suggestionHeader.innerHTML = suggestionHeader;\n            }\n            this.suggestionsElement.append(suggestionList);\n            this.content.append(this.suggestionsElement);\n        }\n    };\n    InterActiveChatBase.prototype.renderSuggestionList = function (suggestionsArray, suggestionWrapper, isSuggestionTemplate, contextName, suggestionTemplate, templateName, onSuggestionClick) {\n        var _this = this;\n        var suggestionsListElement = this.createElement('ul', { attrs: { 'tabindex': '-1' } });\n        suggestionsArray.forEach(function (suggestion, i) {\n            var _a;\n            var suggestionList = _this.createElement('li');\n            attributes(suggestionList, { 'tabindex': '0' });\n            EventHandler.add(suggestionList, 'click', onSuggestionClick, _this);\n            EventHandler.add(suggestionList, 'keydown', _this.suggestionItemHandler, _this);\n            if (isSuggestionTemplate) {\n                var suggestionContext = (_a = { index: i }, _a[contextName] = suggestionsArray[parseInt(i.toString(), 10)], _a);\n                _this.updateContent(suggestionTemplate, suggestionList, suggestionContext, templateName);\n            }\n            else {\n                suggestionList.innerHTML = suggestion;\n            }\n            suggestionsListElement.append(suggestionList);\n        });\n        suggestionWrapper.appendChild(suggestionsListElement);\n    };\n    InterActiveChatBase.prototype.suggestionItemHandler = function (event) {\n        if (event.key === 'Enter' && !event.shiftKey) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.onSuggestionClick(event);\n        }\n    };\n    InterActiveChatBase.prototype.renderBannerView = function (bannerTemplate, parentElement, templateName) {\n        if (bannerTemplate) {\n            var className = templateName === 'emptyChatTemplate' ? 'e-empty-chat-template' : 'e-banner-view';\n            var introContainer = this.createElement('div', { attrs: { class: className } });\n            this.updateContent(bannerTemplate, introContainer, {}, templateName);\n            parentElement.prepend(introContainer);\n        }\n    };\n    InterActiveChatBase.prototype.updateContent = function (template, contentElement, context, templateName) {\n        if (this.isReact) {\n            this.clearTemplate([templateName]);\n        }\n        var notCompile = !(this.isReact || this.isVue);\n        var ctn = this.getTemplateFunction(template, notCompile);\n        if (typeof ctn === 'string') {\n            contentElement.innerHTML = ctn;\n        }\n        else {\n            append(ctn(context, this), contentElement);\n        }\n        this.renderReactTemplates();\n    };\n    InterActiveChatBase.prototype.renderFooterContent = function (footerTemplate, footer, prompt, promptPlaceholder, showClearButton, rowCount, className) {\n        if (footerTemplate) {\n            this.updateContent(footerTemplate, footer, {}, 'footerTemplate');\n            return null;\n        }\n        else {\n            var textareaEle = this.createElement('textarea', { attrs: { class: className } });\n            footer.appendChild(textareaEle);\n            return this.renderFooter(textareaEle, prompt, promptPlaceholder, showClearButton, rowCount);\n        }\n    };\n    InterActiveChatBase.prototype.renderFooter = function (textareaElement, prompt, promptPlaceholder, showClearButton, rowCount) {\n        if (showClearButton === void 0) { showClearButton = false; }\n        var textareaObj = new TextArea({\n            rows: rowCount,\n            cols: 300,\n            cssClass: rowCount >= 10 ? 'show-scrollbar' : 'hide-scrollbar',\n            placeholder: promptPlaceholder,\n            resizeMode: 'None',\n            value: prompt,\n            showClearButton: showClearButton\n        });\n        textareaObj.appendTo(textareaElement);\n        return textareaObj;\n    };\n    InterActiveChatBase.prototype.renderSendIcon = function (sendIconClass, footer) {\n        var sendIcon = this.createElement('span', { attrs: { class: sendIconClass, role: 'button', 'aria-label': 'Submit', tabindex: '0' } });\n        footer.appendChild(sendIcon);\n        return sendIcon;\n    };\n    InterActiveChatBase.prototype.appendChildren = function (target) {\n        var children = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            children[_i - 1] = arguments[_i];\n        }\n        target.append.apply(target, children);\n    };\n    InterActiveChatBase.prototype.insertBeforeChildren = function (target) {\n        var children = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            children[_i - 1] = arguments[_i];\n        }\n        target.prepend.apply(target, children);\n    };\n    InterActiveChatBase.prototype.wireFooterEvents = function (sendIcon, footer, footerTemplate) {\n        if (sendIcon) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            EventHandler.add(sendIcon, 'click', this.onSendIconClick, this);\n        }\n        if (footer && !footerTemplate) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            EventHandler.add(footer, 'keydown', this.footerKeyHandler, this);\n        }\n    };\n    InterActiveChatBase.prototype.unWireFooterEvents = function (sendIcon, footer, footerTemplate) {\n        if (sendIcon) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            EventHandler.remove(sendIcon, 'click', this.onSendIconClick);\n        }\n        if (footer && !footerTemplate) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            EventHandler.remove(footer, 'keydown', this.footerKeyHandler);\n        }\n    };\n    InterActiveChatBase.prototype.removeAndNullify = function (element) {\n        if (element) {\n            if (!isNOU(element.parentNode)) {\n                remove(element);\n            }\n            else {\n                element.innerHTML = '';\n            }\n        }\n    };\n    // eslint-disable-next-line  @typescript-eslint/no-explicit-any\n    InterActiveChatBase.prototype.destroyAndNullify = function (obj) {\n        if (obj) {\n            obj.destroy();\n            obj = null;\n        }\n    };\n    /**\n     * Gets template content based on the template property value.\n     *\n     * @param {string | Function} template - Template property value.\n     * @param {boolean} notCompile - Compile property value.\n     * @returns {Function} - Return template function.\n     * @hidden\n     */\n    InterActiveChatBase.prototype.getTemplateFunction = function (template, notCompile) {\n        if (typeof template === 'string') {\n            var content = '';\n            try {\n                var tempEle = select(template);\n                if (tempEle) {\n                    //Return innerHTML incase of jsrenderer script else outerHTML\n                    content = tempEle.tagName === 'SCRIPT' ? tempEle.innerHTML : tempEle.outerHTML;\n                    notCompile = false;\n                }\n                else {\n                    content = template;\n                }\n            }\n            catch (e) {\n                content = template;\n            }\n            return notCompile ? content : compile(content);\n        }\n        else {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            return compile(template);\n        }\n    };\n    /**\n     * This method is abstract member of the Component<HTMLElement>.\n     *\n     * @param  {InterActiveChatBaseModel} newProp - Specifies new properties\n     * @param  {InterActiveChatBaseModel} oldProp - Specifies old properties\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars\n    InterActiveChatBase.prototype.onPropertyChanged = function (newProp, oldProp) {\n    };\n    __decorate([\n        Event()\n    ], InterActiveChatBase.prototype, \"created\", void 0);\n    InterActiveChatBase = __decorate([\n        NotifyPropertyChanges\n    ], InterActiveChatBase);\n    return InterActiveChatBase;\n}(Component));\nexport { InterActiveChatBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n///<reference path='../interactive-chat-base/interactive-chat-base-model.d.ts'/>\nimport { EventHandler, Property, NotifyPropertyChanges, Collection, Event, remove, L10n } from '@syncfusion/ej2-base';\nimport { ChildProperty, getUniqueID, isNullOrUndefined as isNOU, Complex, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { InterActiveChatBase, ToolbarSettings, ToolbarItem } from '../interactive-chat-base/interactive-chat-base';\nvar ASSISTHEADER = 'e-aiassist-header-text e-assist-view-header';\n/* eslint-enable @typescript-eslint/no-misused-new, no-redeclare */\n/**\n * The prompts property maps the list of the prompts and binds the data to the suggestions.\n */\nvar Prompt = /** @class */ (function (_super) {\n    __extends(Prompt, _super);\n    function Prompt() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], Prompt.prototype, \"prompt\", void 0);\n    __decorate([\n        Property('')\n    ], Prompt.prototype, \"response\", void 0);\n    __decorate([\n        Property(null)\n    ], Prompt.prototype, \"isResponseHelpful\", void 0);\n    return Prompt;\n}(ChildProperty));\nexport { Prompt };\n/**\n * Specifies the type of assist view.\n */\nexport var AssistViewType;\n(function (AssistViewType) {\n    /**\n     * Represents the default assist view type.\n     */\n    AssistViewType[\"Assist\"] = \"Assist\";\n    /**\n     * Represents a custom assist view type.\n     */\n    AssistViewType[\"Custom\"] = \"Custom\";\n})(AssistViewType || (AssistViewType = {}));\n/**\n * The assistView property maps the customized AiAssistView.\n */\nvar AssistView = /** @class */ (function (_super) {\n    __extends(AssistView, _super);\n    function AssistView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Assist')\n    ], AssistView.prototype, \"type\", void 0);\n    __decorate([\n        Property('')\n    ], AssistView.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], AssistView.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property()\n    ], AssistView.prototype, \"viewTemplate\", void 0);\n    return AssistView;\n}(ChildProperty));\nexport { AssistView };\n/**\n * The promptToolbarSettings property maps the list of the promptToolbarSettings and binds the data to the prompt.\n */\nvar PromptToolbarSettings = /** @class */ (function (_super) {\n    __extends(PromptToolbarSettings, _super);\n    function PromptToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('100%')\n    ], PromptToolbarSettings.prototype, \"width\", void 0);\n    __decorate([\n        Collection([], ToolbarItem)\n    ], PromptToolbarSettings.prototype, \"items\", void 0);\n    __decorate([\n        Event()\n    ], PromptToolbarSettings.prototype, \"itemClicked\", void 0);\n    return PromptToolbarSettings;\n}(ChildProperty));\nexport { PromptToolbarSettings };\n/**\n * The responseToolbarSettings property maps the list of the responseToolbarSettings and binds the data to the output items.\n */\nvar ResponseToolbarSettings = /** @class */ (function (_super) {\n    __extends(ResponseToolbarSettings, _super);\n    function ResponseToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('100%')\n    ], ResponseToolbarSettings.prototype, \"width\", void 0);\n    __decorate([\n        Collection([], ToolbarItem)\n    ], ResponseToolbarSettings.prototype, \"items\", void 0);\n    __decorate([\n        Event()\n    ], ResponseToolbarSettings.prototype, \"itemClicked\", void 0);\n    return ResponseToolbarSettings;\n}(ChildProperty));\nexport { ResponseToolbarSettings };\n/**\n * The `AIAssistView` component is designed to enhance user interaction by integrating AI driven assistance features.\n * It provides a seamless interface for incorporating suggestions & AI responses.\n *\n * ```html\n *  <div id='defaultAIAssistView'></div>\n * ```\n * ```typescript\n *  let aiAssistObj: AIAssistView = new AIAssistView();\n *  aiAssistObj.appendTo('#defaultAIAssistView');\n * ```\n */\nvar AIAssistView = /** @class */ (function (_super) {\n    __extends(AIAssistView, _super);\n    /**\n     * Constructor for creating the component\n     *\n     * @param {AIAssistViewModel} options - Specifies the AIAssistViewModel model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function AIAssistView(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.toolbarItems = [];\n        _this.displayContents = [];\n        _this.preTagElements = [];\n        return _this;\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    AIAssistView.prototype.preRender = function () {\n        if (!this.element.id) {\n            this.element.id = getUniqueID('e-' + this.getModuleName());\n        }\n    };\n    AIAssistView.prototype.getDirective = function () {\n        return 'EJS-AIASSISTVIEW';\n    };\n    /**\n     * To get component name.\n     *\n     * @returns {string} - It returns the current module name.\n     * @private\n     */\n    AIAssistView.prototype.getModuleName = function () {\n        return 'aiassistview';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @private\n     * @returns {string} - It returns the persisted data.\n     */\n    AIAssistView.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    AIAssistView.prototype.render = function () {\n        this.renderPromptView();\n    };\n    AIAssistView.prototype.renderPromptView = function () {\n        this.setDimension(this.element, this.width, this.height);\n        this.renderViews();\n        this.renderToolbar();\n        this.wireEvents();\n    };\n    AIAssistView.prototype.renderToolbar = function () {\n        this.updateHeaderToolbar();\n        if (this.assistViewTemplateIndex < 0) {\n            this.displayContents.unshift(this.contentWrapper);\n        }\n        else {\n            this.displayContents.unshift(this.assistCustomSection);\n        }\n        this.previousElement = this.displayContents[this.activeView];\n        this.renderHeaderToolbar();\n        this.viewWrapper = this.element.querySelector('.e-view-content');\n        this.updateActiveView();\n        this.addCssClass(this.element, this.cssClass);\n        this.updateHeader(this.showHeader, this.toolbarHeader, this.viewWrapper);\n        this.aiAssistViewRendered = true;\n        this.addRtlClass(this.element, this.enableRtl);\n    };\n    AIAssistView.prototype.renderViews = function () {\n        this.assistViewTemplateIndex = -1;\n        this.aiAssistViewRendered = false;\n        this.isAssistView = false;\n        this.isOutputRenderingStop = false;\n        this.isResponseRequested = false;\n        this.renderViewSections(this.element, 'e-view-header', 'e-view-content');\n        var isAssistViewAssigned = false;\n        var assistView;\n        var customViewTemplate;\n        var customViewCount = 1;\n        if (this.views.length > 0) {\n            for (var index = 0; index < this.views.length; index++) {\n                if (this.views[parseInt(index.toString(), 10)].type.toLocaleLowerCase() === 'assist' && !isAssistViewAssigned) {\n                    assistView = {\n                        text: this.views[parseInt(index.toString(), 10)].name || 'AI Assist',\n                        prefixIcon: this.views[parseInt(index.toString(), 10)].iconCss || 'e-icons e-assistview-icon',\n                        cssClass: ASSISTHEADER,\n                        htmlAttributes: { 'data-index': this.element.id + '_view_0' }\n                    };\n                    this.toolbarItems.unshift(assistView);\n                    if (this.views[parseInt(index.toString(), 10)].viewTemplate) {\n                        this.assistViewTemplateIndex = index;\n                    }\n                    isAssistViewAssigned = true;\n                    this.isAssistView = true;\n                }\n                else if (this.views[parseInt(index.toString(), 10)].type.toLocaleLowerCase() === 'custom') {\n                    customViewTemplate = this.createElement('div', { attrs: { class: 'e-customview-content-section-' + customViewCount + ' e-custom-view' } });\n                    this.getContextObject('customViewTemplate', customViewTemplate, -1, index);\n                    this.displayContents.push(customViewTemplate);\n                    this.toolbarItems.push({\n                        text: this.views[parseInt(index.toString(), 10)].name || '',\n                        prefixIcon: this.views[parseInt(index.toString(), 10)].iconCss || '',\n                        cssClass: 'e-aiassist-header-text e-custom-view-header',\n                        htmlAttributes: { 'data-index': this.element.id + '_view_' + customViewCount.toString() }\n                    });\n                    customViewCount++;\n                }\n            }\n        }\n        if (this.views.length === 0 || !isAssistViewAssigned) {\n            assistView = {\n                text: 'AI Assist',\n                prefixIcon: 'e-icons e-assistview-icon',\n                cssClass: ASSISTHEADER,\n                htmlAttributes: { 'data-index': this.element.id + '_view_0' }\n            };\n            this.toolbarItems.unshift(assistView);\n            isAssistViewAssigned = true;\n        }\n        if (this.assistViewTemplateIndex >= 0 && this.views[this.assistViewTemplateIndex].viewTemplate) {\n            this.assistCustomSection = this.createElement('div', { attrs: { class: 'e-assistview-content-section', 'data-index': this.element.id + '_view_0' } });\n            this.getContextObject('assistViewTemplate', this.assistCustomSection, -1, this.assistViewTemplateIndex);\n        }\n        else {\n            this.renderDefaultView();\n        }\n    };\n    AIAssistView.prototype.renderHeaderToolbar = function () {\n        var _this = this;\n        this.toolbar = new Toolbar({\n            items: this.toolbarItems,\n            height: '100%',\n            enableRtl: this.enableRtl,\n            clicked: function (args) {\n                var eventItemArgs = {\n                    type: args.item.type,\n                    text: args.item.text,\n                    iconCss: args.item.prefixIcon,\n                    cssClass: args.item.cssClass,\n                    tooltip: args.item.tooltipText,\n                    template: args.item.template,\n                    disabled: args.item.disabled,\n                    visible: args.item.visible,\n                    align: args.item.align,\n                    tabIndex: args.item.tabIndex\n                };\n                var eventArgs = {\n                    item: eventItemArgs,\n                    event: args.originalEvent,\n                    cancel: false\n                };\n                if (_this.toolbarSettings.itemClicked) {\n                    _this.toolbarSettings.itemClicked.call(_this, eventArgs);\n                }\n                if (!eventArgs.cancel) {\n                    if (args.item.htmlAttributes) {\n                        var currentIndex = parseInt(args.item.htmlAttributes['data-index'].split(_this.element.id + '_view_')[1], 10);\n                        if (currentIndex !== _this.activeView) {\n                            var prevOnChange = _this.isProtectedOnChange;\n                            _this.isProtectedOnChange = true;\n                            var previousIndex = _this.getIndex(_this.activeView);\n                            _this.activeView = parseInt(args.item.htmlAttributes['data-index'].split(_this.element.id + '_view_')[1], 10);\n                            _this.updateActiveView(previousIndex);\n                            _this.isProtectedOnChange = prevOnChange;\n                        }\n                    }\n                }\n            }\n        });\n        this.toolbarHeader = this.element.querySelector('.e-view-header');\n        var toolbarEle = this.createElement('div');\n        this.toolbar.appendTo(toolbarEle);\n        this.toolbar.element.setAttribute('aria-label', 'assist-view-toolbar-header');\n        this.toolbarHeader.appendChild(toolbarEle);\n    };\n    AIAssistView.prototype.updateHeaderToolbar = function () {\n        if (this.toolbarSettings.items.length > 0) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var pushToolbar = this.toolbarSettings.items.map(function (item) { return ({\n                type: item.type,\n                template: item.template,\n                disabled: item.disabled,\n                cssClass: item.cssClass,\n                visible: item.visible,\n                tooltipText: item.tooltip,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                align: item.align\n            }); });\n            this.toolbarItems = this.toolbarItems.concat(pushToolbar);\n        }\n    };\n    AIAssistView.prototype.getIndex = function (currentIndex) {\n        return (((currentIndex) > (this.views.length - (this.isAssistView ? 1 : 0))) || (currentIndex < 0)) ?\n            0 : currentIndex;\n    };\n    AIAssistView.prototype.updateActiveView = function (previousIndex) {\n        var activeViewIndex = this.getIndex(this.activeView);\n        if (!this.aiAssistViewRendered) {\n            this.appendView(activeViewIndex);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (this.toolbar.tbarEle[parseInt(activeViewIndex.toString(), 10)]) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this.toolbar.tbarEle[parseInt(activeViewIndex.toString(), 10)].classList.add('e-active');\n            }\n        }\n        else if (previousIndex !== activeViewIndex) {\n            this.removePreviousView(previousIndex, activeViewIndex);\n            this.appendView(activeViewIndex);\n        }\n        this.previousElement = this.displayContents[parseInt(activeViewIndex.toString(), 10)];\n    };\n    AIAssistView.prototype.appendView = function (activeViewIndex) {\n        //updating the new view section according to the activeView property\n        if (activeViewIndex === 0 && this.assistViewTemplateIndex < 0) {\n            this.viewWrapper.append(this.contentWrapper, this.stopResponding, this.footer);\n        }\n        else if (activeViewIndex === 0 && this.assistViewTemplateIndex >= 0) {\n            this.viewWrapper.append(this.assistCustomSection);\n        }\n        else {\n            this.viewWrapper.append(this.displayContents[parseInt(activeViewIndex.toString(), 10)]);\n        }\n    };\n    AIAssistView.prototype.removePreviousView = function (previousIndex, activeViewIndex) {\n        // removing the previously binded element\n        this.viewWrapper.removeChild(this.previousElement);\n        if (previousIndex === 0 && this.assistViewTemplateIndex < 0) {\n            this.viewWrapper.removeChild(this.stopResponding);\n            this.viewWrapper.removeChild(this.footer);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.toolbar.tbarEle[parseInt(activeViewIndex.toString(), 10)]) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.toolbar.tbarEle[parseInt(activeViewIndex.toString(), 10)].classList.add('e-active');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (previousIndex >= 0 && this.toolbar.tbarEle[parseInt(previousIndex.toString(), 10)]) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.toolbar.tbarEle[parseInt(previousIndex.toString(), 10)].classList.remove('e-active');\n        }\n    };\n    AIAssistView.prototype.renderDefaultView = function () {\n        var viewWrapper = this.element.querySelector('.e-view-content');\n        this.createViewComponents(viewWrapper);\n        this.contentWrapper = this.element.querySelector('.e-views');\n        this.contentWrapper.setAttribute('data-index', this.element.id + '_view_0');\n        var contentContainer = this.element.querySelector('.e-view-container');\n        this.content = this.getElement('contentContainer');\n        this.footer = this.getElement('footer');\n        var footerClass = \"e-footer \" + (this.footerTemplate ? 'e-footer-template' : '');\n        this.footer.className = footerClass;\n        this.renderContent();\n        this.renderAssistViewFooter();\n        this.renderBannerView(this.bannerTemplate, contentContainer, 'bannerTemplate');\n        contentContainer.append(this.content);\n        this.renderStopResponding();\n    };\n    AIAssistView.prototype.renderStopResponding = function () {\n        this.stopResponding = this.createElement('div', { attrs: { class: 'e-stop-response', tabIndex: '0', 'aria-label': 'Stop Responding', role: 'button' } });\n        var stopRespondingIcon = this.createElement('span', { attrs: { class: 'e-icons e-assist-stop' } });\n        this.stopRespondingContent = this.createElement('span', { attrs: { class: 'e-stop-response-text' } });\n        this.l10n = new L10n('aiassistview', { stopResponseText: 'Stop Responding' }, this.locale);\n        this.updateStopRespondingTitle();\n        this.appendChildren(this.stopResponding, stopRespondingIcon, this.stopRespondingContent);\n    };\n    AIAssistView.prototype.updateStopRespondingTitle = function () {\n        this.l10n.setLocale(this.locale);\n        this.stopRespondingContent.textContent = this.l10n.getConstant('stopResponseText');\n    };\n    AIAssistView.prototype.renderContent = function () {\n        this.renderSuggestions(this.promptSuggestions, this.promptSuggestionsHeader, this.promptSuggestionItemTemplate, 'promptSuggestion', 'promptSuggestionItemTemplate', this.onSuggestionClick);\n        this.renderOutputContent();\n        if (this.outputElement) {\n            this.renderSkeleton();\n        }\n    };\n    AIAssistView.prototype.renderOutputContent = function (isMethodCall) {\n        var _this = this;\n        this.outputElement = this.getElement('outputElement');\n        if (this.responseToolbarSettings.items.length === 0) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.responseToolbarSettings.items = [\n                { iconCss: 'e-icons e-assist-copy', tooltip: 'Copy', cssClass: 'check' },\n                { iconCss: 'e-icons e-assist-like', tooltip: 'Like' },\n                { iconCss: 'e-icons e-assist-dislike', tooltip: 'Dislike' }\n            ];\n            this.isProtectedOnChange = prevOnChange;\n        }\n        if (this.prompts) {\n            this.prompts.forEach(function (prompt, i) {\n                _this.renderOutputContainer(prompt.prompt, prompt.response, i);\n            });\n        }\n        if (this.suggestionsElement && this.content.contains(this.suggestionsElement)) {\n            this.content.insertBefore(this.outputElement, this.suggestionsElement);\n        }\n        else {\n            this.content.appendChild(this.outputElement);\n        }\n        if (isMethodCall) {\n            this.aiAssistViewRendered = true;\n        }\n    };\n    AIAssistView.prototype.renderAssistViewFooter = function () {\n        this.textareaObj = this.renderFooterContent(this.footerTemplate, this.footer, this.prompt, this.promptPlaceholder, this.showClearButton, this.getRowCount(this.prompt), 'e-assist-textarea');\n        var sendIconClass = 'e-assist-send e-icons disabled';\n        if (!this.footerTemplate) {\n            this.sendIcon = this.renderSendIcon(sendIconClass, this.footer);\n        }\n        if (this.textareaObj) {\n            this.textareaObj.input = this.handleInput.bind(this);\n            this.activateSendIcon(this.textareaObj.value.length);\n        }\n    };\n    AIAssistView.prototype.handleInput = function (args) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.prompt = args.value;\n        this.isProtectedOnChange = prevOnChange;\n        this.activateSendIcon(args.value.length);\n        this.updateTextAreaObject(args.value);\n        var eventArgs = {\n            value: args.value,\n            previousValue: args.previousValue,\n            event: args.event,\n            element: this.textareaObj.element\n        };\n        this.trigger('promptChanged', eventArgs);\n    };\n    AIAssistView.prototype.updateTextAreaObject = function (textValue) {\n        var rowCount = this.getRowCount(textValue);\n        this.textareaObj.rows = rowCount;\n        this.textareaObj.cssClass = (rowCount >= 10) ? 'show-scrollbar' : 'hide-scrollbar';\n    };\n    AIAssistView.prototype.getRowCount = function (textValue) {\n        var lines = textValue.split('\\n').length;\n        return (lines < 10 ? (lines >= 1 ? lines : 1) : 10);\n    };\n    AIAssistView.prototype.activateSendIcon = function (value) {\n        this.sendIcon.classList.toggle('disabled', value === 0);\n        this.sendIcon.classList.toggle('enabled', value > 0);\n    };\n    AIAssistView.prototype.footerKeyHandler = function (e) {\n        this.keyHandler(e, 'footer');\n    };\n    AIAssistView.prototype.stopResponseKeyHandler = function (e) {\n        this.keyHandler(e, 'stopresponse');\n    };\n    AIAssistView.prototype.wireEvents = function () {\n        this.wireFooterEvents(this.sendIcon, this.footer, this.footerTemplate);\n        if (this.stopResponding) {\n            EventHandler.add(this.stopResponding, 'click', this.respondingStopper, this);\n            EventHandler.add(this.stopResponding, 'keydown', this.stopResponseKeyHandler, this);\n        }\n    };\n    AIAssistView.prototype.unWireEvents = function () {\n        this.unWireFooterEvents(this.sendIcon, this.footer, this.footerTemplate);\n        if (this.stopResponding) {\n            EventHandler.remove(this.stopResponding, 'click', this.respondingStopper);\n            EventHandler.remove(this.stopResponding, 'keydown', this.stopResponseKeyHandler);\n        }\n        this.detachCodeCopyEventHandler();\n    };\n    AIAssistView.prototype.detachCodeCopyEventHandler = function () {\n        this.preTagElements.forEach(function (_a) {\n            var preTag = _a.preTag, handler = _a.handler;\n            var copyIcon = preTag.querySelector('.e-code-copy');\n            EventHandler.remove(copyIcon, 'click', handler);\n        });\n        this.preTagElements = [];\n    };\n    AIAssistView.prototype.keyHandler = function (event, value) {\n        if (event.key === 'Enter' && !event.shiftKey) {\n            switch (value) {\n                case 'footer':\n                    event.preventDefault();\n                    if (!this.isResponseRequested) {\n                        this.textareaObj.value = '';\n                        this.updateTextAreaObject(this.textareaObj.value);\n                        this.onSendIconClick();\n                    }\n                    break;\n                case 'stopresponse':\n                    this.respondingStopper();\n                    break;\n            }\n        }\n    };\n    AIAssistView.prototype.respondingStopper = function () {\n        this.isOutputRenderingStop = true;\n        this.isResponseRequested = false;\n        if (this.outputElement.hasChildNodes) {\n            this.outputElement.removeChild(this.skeletonContainer);\n        }\n        this.stopResponding.classList.remove('e-btn-active');\n    };\n    AIAssistView.prototype.onSuggestionClick = function (e) {\n        this.suggestionsElement.hidden = true;\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.prompt = e.target.innerText;\n        this.isProtectedOnChange = prevOnChange;\n        this.onSendIconClick();\n    };\n    AIAssistView.prototype.onSendIconClick = function () {\n        if (this.isResponseRequested || !this.prompt.trim()) {\n            return;\n        }\n        this.isResponseRequested = true;\n        if (this.suggestionsElement) {\n            this.suggestionsElement.hidden = true;\n        }\n        this.isOutputRenderingStop = false;\n        this.stopResponding.classList.add('e-btn-active');\n        this.addPrompt();\n        this.createOutputElement();\n        var eventArgs = {\n            cancel: false,\n            responseToolbarItems: this.responseToolbarSettings.items,\n            prompt: this.prompt,\n            promptSuggestions: this.promptSuggestions\n        };\n        if (!this.footerTemplate) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.prompt = this.textareaObj.value = '';\n            this.isProtectedOnChange = prevOnChange;\n            this.updateTextAreaObject(this.textareaObj.value);\n            this.activateSendIcon(this.textareaObj.value.length);\n        }\n        this.trigger('promptRequest', eventArgs);\n        if (this.contentWrapper) {\n            this.scrollToBottom();\n        }\n    };\n    AIAssistView.prototype.addPrompt = function () {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.prompts = this.prompts.concat([{ prompt: this.prompt, response: null, isResponseHelpful: null }]);\n        this.isProtectedOnChange = prevOnChange;\n    };\n    AIAssistView.prototype.getContextObject = function (templateName, contentElement, index, arrayPosition) {\n        var template;\n        var context = {};\n        var contextIndex = index >= 0 ? index : -1;\n        var contextPrompt = index >= 0 ? this.prompts[parseInt(contextIndex.toString(), 10)].prompt : '';\n        var contextOutput = index >= 0 ? this.prompts[parseInt(contextIndex.toString(), 10)].response : '';\n        switch (templateName.toLowerCase()) {\n            case 'promptitemtemplate': {\n                template = this.promptItemTemplate;\n                context = { prompt: contextPrompt, toolbarItems: this.promptToolbarSettings.items, index: contextIndex };\n                break;\n            }\n            case 'responseitemtemplate': {\n                template = this.responseItemTemplate;\n                context = {\n                    prompt: contextPrompt,\n                    response: contextOutput,\n                    index: contextIndex,\n                    toolbarItems: this.responseToolbarSettings.items\n                };\n                break;\n            }\n            case 'customviewtemplate':\n            case 'assistviewtemplate': {\n                template = this.views[parseInt(arrayPosition.toString(), 10)].viewTemplate || '';\n                break;\n            }\n        }\n        this.updateContent(template, contentElement, context, templateName);\n    };\n    AIAssistView.prototype.createOutputElement = function () {\n        this.outputSuggestionEle = this.createElement('div', { attrs: { id: \"e-prompt-item_\" + (this.prompts.length - 1), class: \"e-prompt-container \" + (this.promptItemTemplate ? 'e-prompt-item-template' : '') } });\n        this.renderPrompt(this.prompt, this.prompts.length - 1);\n        this.outputElement.append(this.outputSuggestionEle, this.skeletonContainer);\n        this.skeletonContainer.hidden = false;\n    };\n    AIAssistView.prototype.renderOutputContainer = function (promptText, outputText, index, isMethodCall) {\n        var outputContainer = this.createElement('div', { attrs: { id: \"e-response-item_\" + index, class: \"e-output-container \" + (this.responseItemTemplate ? 'e-response-item-template' : '') } });\n        this.renderOutput(outputContainer, promptText, outputText, isMethodCall, index);\n        if (promptText) {\n            this.outputElement.append(this.outputSuggestionEle);\n        }\n        this.outputElement.append(outputContainer);\n        if (this.stopResponding) {\n            this.stopResponding.classList.remove('e-btn-active');\n        }\n        if (!this.isOutputRenderingStop && !this.content.contains(this.suggestionsElement) && this.suggestionsElement) {\n            this.content.append(this.suggestionsElement);\n        }\n    };\n    AIAssistView.prototype.renderOutput = function (outputContainer, promptText, outputText, isMethodCall, index) {\n        var promptIcon = this.createElement('span', { attrs: {\n                class: 'e-output-icon e-icons ' + (this.responseIconCss || (this.isAssistView && this.views[0].iconCss) || 'e-assistview-icon')\n            } });\n        var aiOutputEle = this.createElement('div', { attrs: { class: 'e-output' } });\n        if (!this.aiAssistViewRendered || isMethodCall) {\n            if (!isNOU(promptText)) {\n                this.outputSuggestionEle = this.createElement('div', { attrs: { id: \"e-prompt-item_\" + index, class: \"e-prompt-container \" + (this.promptItemTemplate ? 'e-prompt-item-template' : '') } });\n                this.renderPrompt(promptText, index);\n            }\n        }\n        var lastPrompt = { prompt: promptText, response: outputText };\n        if (lastPrompt.response) {\n            if (this.responseItemTemplate) {\n                this.getContextObject('responseItemTemplate', aiOutputEle, index);\n                if (this.outputElement.querySelector('.e-skeleton')) {\n                    this.outputElement.removeChild(this.skeletonContainer);\n                }\n                if (this.contentFooterEle) {\n                    this.contentFooterEle.classList.remove('e-assist-toolbar-active');\n                }\n                this.renderOutputToolbarItems(index);\n                aiOutputEle.append(this.contentFooterEle);\n                outputContainer.append(aiOutputEle);\n            }\n            else {\n                this.renderOutputTextContainer(lastPrompt.response, aiOutputEle, index);\n                outputContainer.append(promptIcon, aiOutputEle);\n            }\n        }\n        else if (this.aiAssistViewRendered) {\n            if (this.outputElement.querySelector('.e-skeleton')) {\n                this.outputElement.removeChild(this.skeletonContainer);\n            }\n            if (this.suggestionsElement) {\n                this.suggestionsElement.hidden = false;\n            }\n        }\n    };\n    AIAssistView.prototype.renderOutputTextContainer = function (response, aiOutputEle, index, isMethodCall) {\n        var _this = this;\n        if (this.contentFooterEle) {\n            this.contentFooterEle.classList.remove('e-assist-toolbar-active');\n        }\n        this.outputContentBodyEle = this.createElement('div', { attrs: { class: 'e-content-body', tabindex: '0' } });\n        if (!isMethodCall) {\n            this.outputContentBodyEle.innerHTML = response;\n            var preTags = Array.from(this.outputContentBodyEle.querySelectorAll('pre'));\n            preTags.forEach(function (preTag) {\n                var copyIcon = document.createElement('span');\n                copyIcon.className = 'e-icons e-code-copy e-assist-copy';\n                preTag.insertBefore(copyIcon, preTag.firstChild);\n                _this.preTagElements.push({ preTag: preTag, handler: _this.getCopyHandler(preTag) });\n                EventHandler.add(copyIcon, 'click', _this.preTagElements[_this.preTagElements.length - 1].handler);\n            });\n        }\n        this.renderOutputToolbarItems(index);\n        this.appendChildren(aiOutputEle, this.outputContentBodyEle, this.contentFooterEle);\n    };\n    AIAssistView.prototype.getCopyHandler = function (preTag) {\n        return function () {\n            var preText = preTag.innerText;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            window.navigator.clipboard.writeText(preText);\n            var copyIcon = preTag.querySelector('.e-code-copy');\n            copyIcon.className = 'e-icons e-code-copy e-assist-check';\n            setTimeout(function () {\n                copyIcon.className = 'e-icons e-code-copy e-assist-copy';\n            }, 1000);\n        };\n    };\n    AIAssistView.prototype.renderOutputToolbarItems = function (index) {\n        this.contentFooterEle = this.createElement('div', { attrs: { class: 'e-content-footer e-assist-toolbar-active' } });\n        var footerContent = this.createElement('div');\n        this.renderResponseToolbar(index);\n        if (this.aiAssistViewRendered) {\n            if (this.outputElement.querySelector('.e-skeleton')) {\n                this.outputElement.removeChild(this.skeletonContainer);\n            }\n            if (this.suggestionsElement) {\n                this.suggestionsElement.hidden = false;\n            }\n        }\n        this.responseToolbarEle.appendTo(footerContent);\n        this.responseToolbarEle.element.setAttribute('aria-label', \"response-toolbar-\" + index);\n        this.contentFooterEle.appendChild(footerContent);\n    };\n    AIAssistView.prototype.renderResponseToolbar = function (index) {\n        var _this = this;\n        var pushToolbar = this.responseToolbarSettings.items.map(function (item) {\n            var toolbarItem = {\n                type: item.type,\n                visible: item.visible,\n                disabled: item.disabled,\n                tooltipText: item.tooltip,\n                template: item.template,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                cssClass: item.cssClass,\n                align: item.align,\n                width: _this.responseToolbarSettings.width\n            };\n            if (toolbarItem.prefixIcon === 'e-icons e-assist-like' && _this.prompts[parseInt(index.toString(), 10)].isResponseHelpful) {\n                toolbarItem.prefixIcon = 'e-icons e-assist-like-filled';\n            }\n            else if (toolbarItem.prefixIcon === 'e-icons e-assist-dislike' && _this.prompts[parseInt(index.toString(), 10)].isResponseHelpful === false) {\n                toolbarItem.prefixIcon = 'e-icons e-assist-dislike-filled';\n            }\n            return toolbarItem;\n        });\n        this.responseToolbarEle = new Toolbar({\n            items: pushToolbar,\n            clicked: function (args) {\n                var eventItemArgs = {\n                    type: args.item.type,\n                    text: args.item.text,\n                    iconCss: args.item.prefixIcon,\n                    cssClass: args.item.cssClass,\n                    tooltip: args.item.tooltipText,\n                    template: args.item.template,\n                    disabled: args.item.disabled,\n                    visible: args.item.visible,\n                    align: args.item.align,\n                    tabIndex: args.item.tabIndex\n                };\n                var eventArgs = {\n                    item: eventItemArgs,\n                    event: args.originalEvent,\n                    cancel: false,\n                    dataIndex: index\n                };\n                if (_this.responseToolbarSettings.itemClicked) {\n                    _this.responseToolbarSettings.itemClicked.call(_this, eventArgs);\n                }\n                if (!eventArgs.cancel) {\n                    _this.handleItemClick(args, index);\n                }\n            }\n        });\n    };\n    AIAssistView.prototype.getClipBoardContent = function (value) {\n        var tempElement = document.createElement('div');\n        tempElement.innerHTML = value;\n        tempElement.style.top = '0';\n        tempElement.style.left = '0';\n        tempElement.style.position = 'fixed';\n        tempElement.style.opacity = '0';\n        document.body.appendChild(tempElement);\n        navigator.clipboard.write([\n            new ClipboardItem({\n                'text/html': new Blob([tempElement.innerHTML], { type: 'text/html' }),\n                'text/plain': new Blob([tempElement.innerText], { type: 'text/plain' })\n            })\n        ]);\n        document.body.removeChild(tempElement);\n    };\n    AIAssistView.prototype.handleItemClick = function (args, index) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        args.item.controlParent.element.querySelector('.e-assist-dislike');\n        if (args.item.prefixIcon === 'e-icons e-assist-copy') {\n            this.getClipBoardContent(this.prompts[parseInt(index.toString(), 10)].response);\n            args.item.prefixIcon = 'e-icons e-assist-check';\n            this.responseToolbarEle.dataBind();\n            setTimeout(function () {\n                args.item.prefixIcon = 'e-icons e-assist-copy';\n                _this.responseToolbarEle.dataBind();\n            }, 1000);\n        }\n        var icon = args.item.prefixIcon;\n        var isLikeInteracted = icon === 'e-icons e-assist-like-filled' || icon === 'e-icons e-assist-like';\n        var isDislikeInteracted = icon === 'e-icons e-assist-dislike-filled' || icon === 'e-icons e-assist-dislike';\n        if (isLikeInteracted || isDislikeInteracted) {\n            var isHelpful = null;\n            if (isLikeInteracted) {\n                isHelpful = this.prompts[parseInt(index.toString(), 10)].isResponseHelpful === true ? null : true;\n            }\n            else if (isDislikeInteracted) {\n                isHelpful = this.prompts[parseInt(index.toString(), 10)].isResponseHelpful === false ? null : false;\n            }\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.prompts[parseInt(index.toString(), 10)].isResponseHelpful = isHelpful;\n            var promptItem = this.prompts[parseInt(index.toString(), 10)];\n            // eslint-disable-next-line  @typescript-eslint/no-explicit-any\n            var controlParentItems = args.item.controlParent.items;\n            if (isLikeInteracted) {\n                if (promptItem.isResponseHelpful === true) {\n                    args.item.prefixIcon = 'e-icons e-assist-like-filled';\n                    if (controlParentItems && controlParentItems.length > 2) {\n                        controlParentItems[2].prefixIcon = 'e-icons e-assist-dislike';\n                    }\n                }\n                else {\n                    args.item.prefixIcon = 'e-icons e-assist-like';\n                }\n            }\n            else if (isDislikeInteracted) {\n                if (promptItem.isResponseHelpful === false) {\n                    args.item.prefixIcon = 'e-icons e-assist-dislike-filled';\n                    if (controlParentItems && controlParentItems.length > 1) {\n                        controlParentItems[1].prefixIcon = 'e-icons e-assist-like';\n                    }\n                }\n                else {\n                    args.item.prefixIcon = 'e-icons e-assist-dislike';\n                }\n            }\n            this.responseToolbarEle.dataBind();\n            this.isProtectedOnChange = prevOnChange;\n        }\n    };\n    AIAssistView.prototype.renderPrompt = function (promptText, promptIndex) {\n        var outputPrompt = this.createElement('div', { attrs: { class: 'e-prompt-text', tabindex: '0' } });\n        var promptContent = this.createElement('div', { attrs: { class: 'e-prompt-content' } });\n        var promptToolbarContainer = this.createElement('div', { attrs: { class: 'e-prompt-toolbar' } });\n        var promptToolbar = this.createElement('div');\n        var userIcon = this.createElement('span', { attrs: { class: this.promptIconCss ? 'e-prompt-icon e-icons '\n                    + this.promptIconCss : '' } });\n        if (this.promptItemTemplate) {\n            this.getContextObject('promptItemTemplate', this.outputSuggestionEle, promptIndex);\n        }\n        else {\n            outputPrompt.innerHTML = promptText;\n            this.appendChildren(promptContent, outputPrompt);\n            if (this.promptIconCss) {\n                promptContent.appendChild(userIcon);\n            }\n            this.outputSuggestionEle.append(promptContent);\n        }\n        this.renderPromptToolbar(promptToolbar, promptIndex);\n        promptToolbarContainer.append(promptToolbar);\n        this.appendChildren(this.outputSuggestionEle, promptToolbarContainer);\n    };\n    AIAssistView.prototype.renderPromptToolbar = function (element, promptIndex) {\n        var _this = this;\n        var pushToolbar = [];\n        if (this.promptToolbarSettings.items.length === 0) {\n            pushToolbar = [\n                { prefixIcon: 'e-icons e-assist-edit', tooltipText: 'Edit' },\n                { prefixIcon: 'e-icons e-assist-copy', tooltipText: 'Copy' }\n            ];\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.promptToolbarSettings.items = [\n                { iconCss: 'e-icons e-assist-edit', tooltip: 'Edit' },\n                { iconCss: 'e-icons e-assist-copy', tooltip: 'Copy' }\n            ];\n            this.isProtectedOnChange = prevOnChange;\n        }\n        else {\n            pushToolbar = this.promptToolbarSettings.items.map(function (item) { return ({\n                type: item.type,\n                template: item.template,\n                disabled: item.disabled,\n                cssClass: item.cssClass,\n                visible: item.visible,\n                tooltipText: item.tooltip,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                align: item.align,\n                width: _this.promptToolbarSettings.width\n            }); });\n        }\n        this.promptToolbarEle = new Toolbar({\n            items: pushToolbar,\n            clicked: function (args) {\n                var eventItemArgs = {\n                    type: args.item.type,\n                    text: args.item.text,\n                    iconCss: args.item.prefixIcon,\n                    cssClass: args.item.cssClass,\n                    tooltip: args.item.tooltipText,\n                    template: args.item.template,\n                    disabled: args.item.disabled,\n                    visible: args.item.visible,\n                    align: args.item.align,\n                    tabIndex: args.item.tabIndex\n                };\n                var eventArgs = {\n                    item: eventItemArgs,\n                    event: args.originalEvent,\n                    cancel: false,\n                    dataIndex: promptIndex\n                };\n                if (_this.promptToolbarSettings.itemClicked) {\n                    _this.promptToolbarSettings.itemClicked.call(_this, eventArgs);\n                }\n                if (!eventArgs.cancel) {\n                    if (args.item.prefixIcon === 'e-icons e-assist-edit') {\n                        _this.onEditIconClick(promptIndex);\n                    }\n                    if (args.item.prefixIcon === 'e-icons e-assist-copy') {\n                        _this.getClipBoardContent(_this.prompts[parseInt(promptIndex.toString(), 10)].prompt);\n                        args.item.prefixIcon = 'e-icons e-assist-check';\n                        _this.promptToolbarEle.dataBind();\n                        setTimeout(function () {\n                            args.item.prefixIcon = 'e-icons e-assist-copy';\n                            _this.promptToolbarEle.dataBind();\n                        }, 1000);\n                    }\n                }\n            }\n        });\n        this.promptToolbarEle.appendTo(element);\n        this.promptToolbarEle.element.setAttribute('aria-label', \"prompt-toolbar-\" + promptIndex);\n    };\n    AIAssistView.prototype.renderSkeleton = function () {\n        this.skeletonContainer = this.createElement('div', { attrs: { class: 'e-output-container' } });\n        var outputViewWrapper = this.createElement('div', { attrs: { class: 'e-output', style: 'width: 70%;' } });\n        var skeletonIconEle = this.createElement('span', { attrs: { class: 'e-output-icon e-skeleton e-skeleton-text e-shimmer-wave' } });\n        var skeletonBodyEle = this.createElement('div', { attrs: { class: 'e-loading-body' } });\n        var skeletonFooterEle = this.createElement('div', { attrs: { class: 'e-loading-footer' } });\n        var _a = [\n            this.createElement('div', { attrs: { class: 'e-skeleton e-skeleton-text e-shimmer-wave', style: 'width: 100%; height: 15px;' } }),\n            this.createElement('div', { attrs: { class: 'e-skeleton e-skeleton-text e-shimmer-wave', style: 'width: 75%; height: 15px;' } }),\n            this.createElement('div', { attrs: { class: 'e-skeleton e-skeleton-text e-shimmer-wave', style: 'width: 50%; height: 15px;' } })\n        ], skeletonLine1 = _a[0], skeletonLine2 = _a[1], skeletonLine3 = _a[2];\n        var footerSkeleton = [\n            this.createElement('div', { attrs: { class: 'e-skeleton e-skeleton-text e-shimmer-wave', style: 'width: 100%; height: 30px;' } })\n        ][0];\n        this.appendChildren(skeletonBodyEle, skeletonLine1, skeletonLine2, skeletonLine3);\n        skeletonFooterEle.append(footerSkeleton);\n        this.appendChildren(outputViewWrapper, skeletonBodyEle, skeletonFooterEle);\n        this.appendChildren(this.skeletonContainer, skeletonIconEle, outputViewWrapper);\n    };\n    AIAssistView.prototype.onEditIconClick = function (promptIndex) {\n        if (this.textareaObj) {\n            if (this.suggestionsElement) {\n                this.suggestionsElement.hidden = true;\n            }\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.textareaObj.value = this.prompt = this.prompts[parseInt(promptIndex.toString(), 10)].prompt;\n            this.updateTextAreaObject(this.textareaObj.value);\n            this.textareaObj.focusIn();\n            this.isProtectedOnChange = prevOnChange;\n            this.activateSendIcon(this.prompt.length);\n        }\n    };\n    AIAssistView.prototype.updateIcons = function (newCss, isPromptIconCss) {\n        if (isPromptIconCss === void 0) { isPromptIconCss = false; }\n        var elements;\n        if (this.outputElement) {\n            if (isPromptIconCss) {\n                newCss = 'e-prompt-icon e-icons ' + newCss;\n                elements = this.outputElement.querySelectorAll('.e-prompt-icon');\n            }\n            else {\n                newCss = ' e-output-icon e-icons ' + newCss;\n                elements = this.outputElement.querySelectorAll('.e-output-icon');\n            }\n        }\n        for (var index = 0; index < (elements && elements.length); index++) {\n            removeClass([elements[parseInt(index.toString(), 10)]], elements[parseInt(index.toString(), 10)].classList.toString().trim().split(' '));\n            addClass([elements[parseInt(index.toString(), 10)]], newCss.trim().split(' '));\n        }\n    };\n    AIAssistView.prototype.updateToolbarSettings = function (previousToolbar) {\n        var previousToolbarIndex = 0;\n        for (var index = this.views.length; index < this.toolbarItems.length; index++) {\n            if (previousToolbar.items[parseInt(previousToolbarIndex.toString(), 10)] === this.toolbarItems[parseInt(index.toString(), 10)]) {\n                this.toolbarItems.splice(index, 1);\n            }\n        }\n        this.updateHeaderToolbar();\n        this.toolbar.items = this.toolbarItems;\n    };\n    AIAssistView.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.unWireEvents();\n        this.destroyAndNullify(this.textareaObj);\n        this.destroyAndNullify(this.responseToolbarEle);\n        this.destroyAndNullify(this.promptToolbarEle);\n        this.destroyAndNullify(this.toolbar);\n        this.destroyAssistView();\n        //private html elements nullify\n        remove(this.viewWrapper);\n        this.viewWrapper = null;\n        this.aiAssistViewRendered = null;\n        this.assistViewTemplateIndex = null;\n        this.toolbarItems = [];\n        this.displayContents = [];\n        this.isOutputRenderingStop = null;\n        this.isResponseRequested = null;\n        this.suggestionHeader = null;\n        this.previousElement = null;\n        this.assistCustomSection = null;\n        this.preTagElements = [];\n        // properties nullify\n        this.toolbarSettings = this.promptToolbarSettings = this.responseToolbarSettings = {};\n        if (this.cssClass) {\n            removeClass([this.element], this.cssClass.split(' '));\n        }\n        this.element.classList.remove('e-rtl');\n    };\n    AIAssistView.prototype.destroyAssistView = function () {\n        var properties = [\n            'toolbarHeader',\n            'sendIcon',\n            'suggestions',\n            'skeletonContainer',\n            'outputElement',\n            'outputSuggestionEle',\n            'contentFooterEle',\n            'footer',\n            'assistCustomSection',\n            'content',\n            'stopRespondingContent',\n            'stopResponding',\n            'contentWrapper'\n        ];\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            var element = prop;\n            this.removeAndNullify(this[element]);\n            this[element] = null;\n        }\n    };\n    /**\n     * Executes the specified prompt in the AIAssistView component. The method accepts a string representing the prompt.\n     *\n     * @param {string} prompt - The prompt text to be executed. It must be a non-empty string.\n     *\n     * @returns {void}\n     */\n    AIAssistView.prototype.executePrompt = function (prompt) {\n        if (!isNOU(prompt) && prompt.trim().length > 0) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.prompt = prompt;\n            this.isProtectedOnChange = prevOnChange;\n            this.onSendIconClick();\n        }\n    };\n    /**\n     * Adds a response to the last prompt or appends a new Prompt data in the AIAssistView component.\n     *\n     * @param {string | Object} promptData - The response to be added. Can be a string representing the response or an object containing both the prompt and the response.\n     * - If `outputResponse` is a string, it updates the response for the last prompt in the prompts collection.\n     * - If `outputResponse` is an Object, it can either update the response of an existing prompt if the prompt matches or append a new Prompt data.\n     * @returns {void}\n     */\n    AIAssistView.prototype.addPromptResponse = function (promptData) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        if (!this.isOutputRenderingStop) {\n            if (typeof promptData === 'string') {\n                if (!this.isResponseRequested) {\n                    this.prompts = this.prompts.concat([{ prompt: null, response: null, isResponseHelpful: null }]);\n                }\n                this.prompts[this.prompts.length - 1].response = promptData;\n                this.renderOutputContainer(undefined, promptData, this.prompts.length - 1, false);\n            }\n            if (typeof promptData === 'object') {\n                var tPrompt = {\n                    prompt: promptData.prompt,\n                    response: promptData.response,\n                    isResponseHelpful: isNOU(promptData.isResponseHelpful) ? null :\n                        promptData.isResponseHelpful\n                };\n                if (this.prompt === tPrompt.prompt) {\n                    this.prompts[this.prompts.length - 1].response = tPrompt.response;\n                    this.prompts[this.prompts.length - 1].isResponseHelpful = tPrompt.isResponseHelpful;\n                    this.renderOutputContainer(undefined, tPrompt.response, this.prompts.length - 1, false);\n                }\n                else {\n                    this.prompts = this.prompts.concat([tPrompt]);\n                    this.renderOutputContainer(tPrompt.prompt, tPrompt.response, this.prompts.length - 1, true);\n                }\n            }\n            this.isResponseRequested = false;\n        }\n        this.isProtectedOnChange = prevOnChange;\n    };\n    /**\n     * Scrolls the view to the bottom to display the most recent response in the AIAssistView component.\n     * This method programmatically scrolls the view to the bottom,\n     * typically used when new responses are added or to refocus on the latest response.\n     *\n     * @returns {void}\n     */\n    AIAssistView.prototype.scrollToBottom = function () {\n        this.updateScroll(this.contentWrapper);\n    };\n    /**\n     * Called if any of the property value is changed.\n     *\n     * @param  {AIAssistViewModel} newProp - Specifies new properties\n     * @param  {AIAssistViewModel} oldProp - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    AIAssistView.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'width':\n                case 'height':\n                    this.setDimension(this.element, this.width, this.height);\n                    break;\n                case 'cssClass':\n                    this.updateCssClass(this.element, newProp.cssClass, oldProp.cssClass);\n                    break;\n                case 'promptIconCss':\n                    this.updateIcons(newProp.promptIconCss, true);\n                    break;\n                case 'responseIconCss':\n                    this.updateIcons(newProp.responseIconCss);\n                    break;\n                case 'showHeader':\n                    this.updateHeader(this.showHeader, this.toolbarHeader, this.viewWrapper);\n                    break;\n                case 'promptSuggestions':\n                    if (this.suggestionsElement) {\n                        this.suggestionsElement.remove();\n                    }\n                    if (!this.isOutputRenderingStop) {\n                        this.renderSuggestions(this.promptSuggestions, this.promptSuggestionsHeader, this.promptSuggestionItemTemplate, 'promptSuggestion', 'promptSuggestionItemTemplate', this.onSuggestionClick);\n                    }\n                    break;\n                case 'showClearButton':\n                    this.textareaObj.showClearButton = this.showClearButton;\n                    break;\n                case 'promptPlaceholder':\n                    this.textareaObj.placeholder = this.promptPlaceholder;\n                    break;\n                case 'promptSuggestionsHeader': {\n                    this.suggestionHeader.innerHTML = this.promptSuggestionsHeader;\n                    var suggestionHeaderElem = this.element.querySelector('.e-suggestions .e-suggestion-header');\n                    if (!suggestionHeaderElem) {\n                        this.suggestionsElement.append(this.suggestionHeader);\n                    }\n                    break;\n                }\n                case 'activeView': {\n                    var previousViewIndex = this.getIndex(oldProp.activeView);\n                    this.updateActiveView(previousViewIndex);\n                    break;\n                }\n                case 'enableRtl':\n                    this.element.classList[this.enableRtl ? 'add' : 'remove']('e-rtl');\n                    if (!isNOU(this.toolbar)) {\n                        this.toolbar.enableRtl = this.enableRtl;\n                        this.toolbar.dataBind();\n                    }\n                    break;\n                case 'toolbarSettings':\n                    this.updateToolbarSettings(oldProp.toolbarSettings);\n                    break;\n                case 'promptToolbarSettings':\n                case 'responseToolbarSettings':\n                case 'prompts':\n                    this.isOutputRenderingStop = false;\n                    if (this.outputElement) {\n                        remove(this.outputElement);\n                    }\n                    if (this.stopResponding) {\n                        this.stopResponding.classList.remove('e-btn-active');\n                    }\n                    this.aiAssistViewRendered = false;\n                    this.renderOutputContent(true);\n                    this.detachCodeCopyEventHandler();\n                    break;\n                case 'prompt':\n                    if (!this.footerTemplate) {\n                        this.textareaObj.value = this.prompt;\n                    }\n                    break;\n                case 'locale':\n                    if (this.assistViewTemplateIndex < 0) {\n                        this.updateStopRespondingTitle();\n                    }\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"prompt\", void 0);\n    __decorate([\n        Property('Type prompt for assistance...')\n    ], AIAssistView.prototype, \"promptPlaceholder\", void 0);\n    __decorate([\n        Collection([], Prompt)\n    ], AIAssistView.prototype, \"prompts\", void 0);\n    __decorate([\n        Property([])\n    ], AIAssistView.prototype, \"promptSuggestions\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"promptSuggestionsHeader\", void 0);\n    __decorate([\n        Property(true)\n    ], AIAssistView.prototype, \"showHeader\", void 0);\n    __decorate([\n        Complex({ items: [] }, ToolbarSettings)\n    ], AIAssistView.prototype, \"toolbarSettings\", void 0);\n    __decorate([\n        Property(0)\n    ], AIAssistView.prototype, \"activeView\", void 0);\n    __decorate([\n        Property(null)\n    ], AIAssistView.prototype, \"promptIconCss\", void 0);\n    __decorate([\n        Property(null)\n    ], AIAssistView.prototype, \"responseIconCss\", void 0);\n    __decorate([\n        Property('100%')\n    ], AIAssistView.prototype, \"width\", void 0);\n    __decorate([\n        Property('100%')\n    ], AIAssistView.prototype, \"height\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"cssClass\", void 0);\n    __decorate([\n        Collection([], AssistView)\n    ], AIAssistView.prototype, \"views\", void 0);\n    __decorate([\n        Complex({ width: null, items: [] }, PromptToolbarSettings)\n    ], AIAssistView.prototype, \"promptToolbarSettings\", void 0);\n    __decorate([\n        Complex({ width: null, items: [] }, ResponseToolbarSettings)\n    ], AIAssistView.prototype, \"responseToolbarSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], AIAssistView.prototype, \"showClearButton\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"promptItemTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"responseItemTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"promptSuggestionItemTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], AIAssistView.prototype, \"bannerTemplate\", void 0);\n    __decorate([\n        Event()\n    ], AIAssistView.prototype, \"promptRequest\", void 0);\n    __decorate([\n        Event()\n    ], AIAssistView.prototype, \"promptChanged\", void 0);\n    AIAssistView = __decorate([\n        NotifyPropertyChanges\n    ], AIAssistView);\n    return AIAssistView;\n}(InterActiveChatBase));\nexport { AIAssistView };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n///<reference path='../interactive-chat-base/interactive-chat-base-model.d.ts'/>\nimport { NotifyPropertyChanges, Property, getUniqueID, isNullOrUndefined as isNOU, EventHandler, L10n } from '@syncfusion/ej2-base';\nimport { Internationalization, ChildProperty, Collection, removeClass, Event, Complex } from '@syncfusion/ej2-base';\nimport { InterActiveChatBase, ToolbarSettings } from '../interactive-chat-base/interactive-chat-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { Fab } from '@syncfusion/ej2-buttons';\nvar MessageStatus = /** @class */ (function (_super) {\n    __extends(MessageStatus, _super);\n    function MessageStatus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], MessageStatus.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property('')\n    ], MessageStatus.prototype, \"text\", void 0);\n    __decorate([\n        Property('')\n    ], MessageStatus.prototype, \"tooltip\", void 0);\n    return MessageStatus;\n}(ChildProperty));\nexport { MessageStatus };\n/**\n * Represents a user model for a messages in the chatUI component.\n */\nvar User = /** @class */ (function (_super) {\n    __extends(User, _super);\n    function User() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], User.prototype, \"id\", void 0);\n    __decorate([\n        Property('Default')\n    ], User.prototype, \"user\", void 0);\n    __decorate([\n        Property('')\n    ], User.prototype, \"avatarUrl\", void 0);\n    __decorate([\n        Property('')\n    ], User.prototype, \"avatarBgColor\", void 0);\n    __decorate([\n        Property('')\n    ], User.prototype, \"cssClass\", void 0);\n    return User;\n}(ChildProperty));\nexport { User };\n/**\n *  Represents a model for a messages in the chatUI component.\n */\nvar Message = /** @class */ (function (_super) {\n    __extends(Message, _super);\n    function Message() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], Message.prototype, \"id\", void 0);\n    __decorate([\n        Property('')\n    ], Message.prototype, \"text\", void 0);\n    __decorate([\n        Complex({}, User)\n    ], Message.prototype, \"author\", void 0);\n    __decorate([\n        Property('')\n    ], Message.prototype, \"timeStamp\", void 0);\n    __decorate([\n        Property('')\n    ], Message.prototype, \"timeStampFormat\", void 0);\n    __decorate([\n        Complex({}, MessageStatus)\n    ], Message.prototype, \"status\", void 0);\n    return Message;\n}(ChildProperty));\nexport { Message };\nvar ChatUI = /** @class */ (function (_super) {\n    __extends(ChatUI, _super);\n    /**\n     * Constructor for creating the component\n     *\n     * @param {ChatUIModel} options - Specifies the ChatUIModel model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function ChatUI(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.batchSize = 100;\n        _this.initialLoadSize = 100;\n        return _this;\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    ChatUI.prototype.preRender = function () {\n        if (!this.element.id) {\n            this.element.id = getUniqueID('e-' + this.getModuleName());\n        }\n    };\n    ChatUI.prototype.getDirective = function () {\n        return 'EJS-CHATUI';\n    };\n    /**\n     * To get component name.\n     *\n     * @returns {string} - It returns the current module name.\n     * @private\n     */\n    ChatUI.prototype.getModuleName = function () {\n        return 'chat-ui';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @private\n     * @returns {string} - It returns the persisted data.\n     */\n    ChatUI.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    ChatUI.prototype.render = function () {\n        this.renderChatUIView();\n    };\n    ChatUI.prototype.renderChatUIView = function () {\n        this.intl = new Internationalization();\n        this.setDimension(this.element, this.width, this.height);\n        this.renderViewSections(this.element, 'e-chat-header', 'e-chat-content');\n        this.viewWrapper = this.element.querySelector('.e-chat-content');\n        this.chatHeader = this.element.querySelector('.e-chat-header');\n        this.renderChatHeader();\n        this.renderChatContentElement();\n        this.renderChatSuggestionsElement();\n        this.renderChatFooterContent();\n        this.addCssClass(this.element, this.cssClass);\n        this.addRtlClass(this.element, this.enableRtl);\n        this.updateHeader(this.showHeader, this.chatHeader, this.viewWrapper);\n        if (isNOU(this.messages) || this.messages.length <= 0) {\n            this.renderBannerView(this.emptyChatTemplate, this.messageWrapper, 'emptyChatTemplate');\n            this.isEmptyChatTemplateRendered = isNOU(this.messageWrapper.querySelector('.e-empty-chat-template')) ? false : true;\n        }\n        this.wireEvents();\n        this.renderTypingIndicator();\n        this.scrollToBottom();\n    };\n    ChatUI.prototype.renderChatHeader = function () {\n        if (this.headerText) {\n            var headerContainer = this.createElement('div', { className: 'e-header' });\n            if (this.headerIconCss) {\n                var iconElement = this.createElement('span', { className: \"e-header-icon e-icons \" + this.headerIconCss });\n                headerContainer.appendChild(iconElement);\n            }\n            var headerTextElement = this.createElement('div', { className: 'e-header-text' });\n            headerTextElement.innerHTML = this.headerText;\n            headerContainer.appendChild(headerTextElement);\n            this.chatHeader.appendChild(headerContainer);\n            this.renderChatHeaderToolbar(headerContainer);\n        }\n    };\n    ChatUI.prototype.renderChatHeaderToolbar = function (headerContainer) {\n        var _this = this;\n        if (!isNOU(this.headerToolbar) && this.headerToolbar.items.length > 0) {\n            var toolbarEle = this.createElement('div', { attrs: { class: 'e-chat-toolbar' } });\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var pushToolbar = this.headerToolbar.items.map(function (item) { return ({\n                type: item.type,\n                template: item.template,\n                disabled: item.disabled,\n                cssClass: item.cssClass,\n                visible: item.visible,\n                tooltipText: item.tooltip,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                align: item.align\n            }); });\n            this.toolbar = new Toolbar({\n                items: pushToolbar,\n                height: '100%',\n                enableRtl: this.enableRtl,\n                clicked: function (args) {\n                    var eventItemArgs = {\n                        type: args.item.type,\n                        text: args.item.text,\n                        iconCss: args.item.prefixIcon,\n                        cssClass: args.item.cssClass,\n                        tooltip: args.item.tooltipText,\n                        template: args.item.template,\n                        disabled: args.item.disabled,\n                        visible: args.item.visible,\n                        align: args.item.align,\n                        tabIndex: args.item.tabIndex\n                    };\n                    var eventArgs = {\n                        item: eventItemArgs,\n                        event: args.originalEvent,\n                        cancel: false\n                    };\n                    if (_this.headerToolbar.itemClicked) {\n                        _this.headerToolbar.itemClicked.call(_this, eventArgs);\n                    }\n                }\n            });\n            this.toolbar.appendTo(toolbarEle);\n            headerContainer.appendChild(toolbarEle);\n        }\n    };\n    ChatUI.prototype.updateHeaderToolbar = function () {\n        var headerContainer = this.chatHeader.querySelector('.e-header');\n        if (!isNOU(this.toolbar)) {\n            var pushToolbar = this.headerToolbar.items.map(function (item) { return ({\n                type: item.type,\n                template: item.template,\n                disabled: item.disabled,\n                cssClass: item.cssClass,\n                visible: item.visible,\n                tooltipText: item.tooltip,\n                prefixIcon: item.iconCss,\n                text: item.text,\n                align: item.align\n            }); });\n            this.toolbar.items = pushToolbar;\n        }\n        else {\n            this.renderChatHeaderToolbar(headerContainer);\n        }\n    };\n    ChatUI.prototype.renderChatContentElement = function () {\n        this.messageWrapper = this.createElement('div', { className: 'e-message-wrapper' });\n        this.viewWrapper.prepend(this.messageWrapper);\n        this.renderMessageGroup(this.messageWrapper);\n        this.content = this.createElement('div', { attrs: { class: 'e-typing-suggestions' } });\n        this.viewWrapper.append(this.content);\n        this.renderScrollDown();\n    };\n    ChatUI.prototype.renderScrollDown = function () {\n        var scrollDownButton = this.createElement('button', { id: 'scrollDownButton' });\n        this.downArrowIcon = new Fab({\n            iconCss: 'e-icons e-chat-scroll-down',\n            position: 'BottomRight',\n            target: this.content,\n            isPrimary: false\n        });\n        this.downArrowIcon.appendTo(scrollDownButton);\n    };\n    ChatUI.prototype.renderMessageGroup = function (chatContentWrapper) {\n        var _this = this;\n        if (this.loadOnDemand) {\n            createSpinner({ target: this.messageWrapper });\n            this.startIndex = Math.max(0, this.messages.length - this.initialLoadSize);\n            var initialMessages = this.messages.slice(this.startIndex);\n            initialMessages.forEach(function (msg, i) {\n                var currIndex = _this.startIndex + i;\n                var prevIndex = i === 0 ? -1 : currIndex - 1;\n                _this.renderGroup(chatContentWrapper, msg, false, currIndex, prevIndex);\n            });\n        }\n        else {\n            this.messages.forEach(function (msg, i) {\n                _this.renderGroup(chatContentWrapper, msg, false, i, i - 1);\n            });\n        }\n    };\n    ChatUI.prototype.isTimeBreakAdded = function (chatContentWrapper, loadOldChat) {\n        return loadOldChat ?\n            chatContentWrapper.firstElementChild.classList.contains('e-timebreak') :\n            chatContentWrapper.lastElementChild.classList.contains('e-timebreak');\n    };\n    ChatUI.prototype.renderGroup = function (chatContentWrapper, msg, loadOldChat, index, prevIndex) {\n        var messageGroup;\n        if (!loadOldChat) {\n            this.updateMessageTimeFormats(msg, index);\n            this.handleTimeBreak(prevIndex, index, loadOldChat);\n        }\n        if (msg.author.id === this.user.id) {\n            if ((msg.author.id !== this.lastUser) || (this.showTimeBreak && this.isTimeBreakAdded(chatContentWrapper, loadOldChat))) {\n                messageGroup = this.createElement('div', { className: \"e-message-group e-right \" + (this.messageTemplate ? 'e-message-item-template' : '') });\n                this.manageChatContent(loadOldChat, chatContentWrapper, messageGroup);\n                this.addGroupItems(msg, messageGroup, false, true, index, loadOldChat);\n            }\n            else {\n                var length_1 = this.element.querySelectorAll('.e-message-group.e-right').length;\n                messageGroup = this.element.querySelectorAll('.e-message-group.e-right')[loadOldChat ? 0 : length_1 - 1];\n                this.addGroupItems(msg, messageGroup, false, true, index, loadOldChat);\n            }\n        }\n        else {\n            if (this.lastUser !== msg.author.id || this.isTimeVaries(index, prevIndex)) {\n                messageGroup = this.createElement('div', { className: \"e-message-group e-left \" + (this.messageTemplate ? 'e-message-item-template' : '') });\n                var avatarElement = this.createAvatarIcon(msg.author, false);\n                if (!this.messageTemplate) {\n                    messageGroup.prepend(avatarElement);\n                }\n                this.manageChatContent(loadOldChat, chatContentWrapper, messageGroup);\n                if (this.loadOnDemand) {\n                    this.loadLeftGroupOnDemand(msg, loadOldChat, index, messageGroup);\n                }\n                else {\n                    this.createLeftGroupItems(messageGroup, msg, index);\n                    this.addGroupItems(msg, messageGroup, true, false, index, loadOldChat);\n                }\n            }\n            else {\n                var length_2 = this.element.querySelectorAll('.e-message-group.e-left').length;\n                messageGroup = this.element.querySelectorAll('.e-message-group.e-left')[loadOldChat ? 0 : length_2 - 1];\n                if (!loadOldChat) {\n                    this.addGroupItems(msg, messageGroup, false, false, index, loadOldChat);\n                }\n                else {\n                    this.loadLeftGroupOnDemand(msg, loadOldChat, index, messageGroup);\n                }\n            }\n        }\n        this.lastUser = msg.author.id;\n    };\n    ChatUI.prototype.isTimeVaries = function (index, prevIndex) {\n        var currentMessageDate = this.getMessageDate(index);\n        currentMessageDate.setHours(0, 0, 0, 0);\n        var lastMessageDate = this.getMessageDate(prevIndex);\n        lastMessageDate.setHours(0, 0, 0, 0);\n        return currentMessageDate.getTime() !== lastMessageDate.getTime();\n    };\n    ChatUI.prototype.loadLeftGroupOnDemand = function (msg, loadOldChat, index, messageGroup) {\n        // To check if the previous author is the same as the current author. If not, create a group header.\n        var isAnyMsgPresent = this.messages[index - 1] ? true : false;\n        var prevAuthorId = isAnyMsgPresent ? this.messages[index - 1].author.id : '';\n        var shouldCreateHeader = prevAuthorId !== msg.author.id ? true : false;\n        if (shouldCreateHeader || this.isTimeVaries(index, index - 1)) {\n            this.addGroupItems(msg, messageGroup, true, false, index, loadOldChat);\n            this.createLeftGroupItems(messageGroup, msg, index);\n        }\n        else {\n            this.addGroupItems(msg, messageGroup, false, false, index, loadOldChat);\n        }\n    };\n    ChatUI.prototype.createLeftGroupItems = function (messageGroup, msg, index) {\n        if (this.messageTemplate) {\n            return;\n        }\n        var userHeaderContainer = this.createElement('div', {\n            className: 'e-message-header-container'\n        });\n        var userHeader = this.createElement('div', {\n            className: 'e-message-header'\n        });\n        userHeader.innerHTML = msg.author.user;\n        var timeSpan = this.getTimeStampElement(msg.timeStamp\n            ? msg.timeStamp\n            : new Date(), msg.timeStampFormat, index);\n        this.appendChildren(userHeaderContainer, userHeader, timeSpan);\n        this.insertBeforeChildren(messageGroup, userHeaderContainer);\n    };\n    ChatUI.prototype.createAvatarIcon = function (author, isTypingUser) {\n        var userName = author.user.trim();\n        var nameParts = userName.split(' ');\n        var initials = nameParts.length > 1\n            ? \"\" + nameParts[0][0] + nameParts[nameParts.length - 1][0]\n            : userName[0];\n        var avatarIcon = this.createElement((!isNOU(author.avatarUrl) && author.avatarUrl !== '') ? 'img' : 'span', { className: \" \" + (!isTypingUser ? 'e-message-icon' : 'e-user-icon') + \" \" + author.cssClass });\n        if (author.avatarBgColor) {\n            avatarIcon.style.backgroundColor = author.avatarBgColor;\n        }\n        if (!isNOU(author.avatarUrl) && author.avatarUrl !== '') {\n            avatarIcon.src = author.avatarUrl;\n            avatarIcon.alt = userName;\n        }\n        else {\n            avatarIcon.innerHTML = initials;\n        }\n        return avatarIcon;\n    };\n    ChatUI.prototype.getTimeStampElement = function (timeStamp, timeStampFormat, index) {\n        var formattedTime = this.getFormattedTime(timeStamp, timeStampFormat);\n        return this.createElement('div', {\n            className: 'e-time',\n            innerHTML: this.showTimeStamp ? formattedTime : ''\n        });\n    };\n    ChatUI.prototype.updateTimeFormats = function (timeStampFormat, fullTime, index) {\n        if (this.messages[parseInt(index.toString(), 10)]) {\n            var prevOnChange = this.isProtectedOnChange;\n            this.isProtectedOnChange = true;\n            this.messages[parseInt(index.toString(), 10)].timeStamp = this.intl.parseDate(fullTime, { format: 'dd/MM/yyyy hh:mm a' });\n            this.messages[parseInt(index.toString(), 10)].timeStampFormat = timeStampFormat;\n            this.isProtectedOnChange = prevOnChange;\n        }\n    };\n    ChatUI.prototype.getFormattedTime = function (timeStamp, timeStampFormat) {\n        return this.intl.formatDate(timeStamp, { format: this.getFormat(timeStampFormat) });\n    };\n    ChatUI.prototype.getFormat = function (timeStampFormat) {\n        var hasValue = !isNOU(timeStampFormat) && timeStampFormat.length > 0;\n        return hasValue ? timeStampFormat\n            : (!isNOU(this.timeStampFormat) && this.timeStampFormat.length) ? this.timeStampFormat : 'dd/MM/yyyy hh:mm a';\n    };\n    ChatUI.prototype.addGroupItems = function (msg, messageGroup, isUserTimeStampRendered, showStatus, index, loadOldChat) {\n        var messageItem = this.createElement('div', { className: 'e-message-item' });\n        var messageStatusWrapper = this.createElement('div', { className: 'e-status-wrapper' });\n        var timeSpan = this.getTimeStampElement(msg.timeStamp ? msg.timeStamp : new Date(), msg.timeStampFormat, index);\n        var textElement = this.createElement('div', {\n            className: 'e-text',\n            innerHTML: msg.text\n        });\n        if (this.messageTemplate) {\n            this.getContextObject('messageTemplate', messageGroup, index, msg);\n        }\n        else {\n            if (!isUserTimeStampRendered) {\n                messageItem.appendChild(timeSpan);\n            }\n            if (showStatus) {\n                var messageElement = this.createElement('div', { className: 'e-status-item' });\n                var statusIcon = this.createElement('span', { attrs: { class: \"e-status-icon \" + (msg.status ? msg.status.iconCss : ''), title: \"\" + (msg.status ? msg.status.tooltip : '') } });\n                var statusText = this.createElement('div', { innerHTML: msg.status ? msg.status.text : '', className: 'e-status-text' });\n                this.appendChildren(messageElement, textElement, statusIcon);\n                this.appendChildren(messageStatusWrapper, messageElement, statusText);\n                messageItem.appendChild(messageStatusWrapper);\n            }\n            else {\n                messageItem.appendChild(textElement);\n            }\n            this.manageChatContent(loadOldChat, messageGroup, messageItem);\n        }\n    };\n    ChatUI.prototype.manageChatContent = function (loadOldChat, parentItem, ChildItem) {\n        if (loadOldChat) {\n            parentItem.prepend(ChildItem);\n        }\n        else {\n            parentItem.appendChild(ChildItem);\n        }\n    };\n    ChatUI.prototype.createTimebreakElement = function (date) {\n        var timebreakDiv = this.createElement('div', { className: \"e-timebreak \" + (this.timeBreakTemplate ? 'e-timebreak-template' : '') });\n        var formattedTime = this.getFormattedTime(date, 'MMMM d, yyyy');\n        if (this.timeBreakTemplate) {\n            this.getContextObject('timeBreakTemplate', timebreakDiv, null, null, date);\n        }\n        else {\n            var timeStampEle = this.createElement('span', { className: 'e-timestamp' });\n            timeStampEle.innerHTML = formattedTime;\n            timebreakDiv.appendChild(timeStampEle);\n        }\n        return timebreakDiv;\n    };\n    ChatUI.prototype.handleTimeBreak = function (lastMsgIndex, index, loadOldChat) {\n        if (!this.showTimeBreak) {\n            return;\n        }\n        var currentMessageDate = this.getMessageDate(index);\n        currentMessageDate.setHours(0, 0, 0, 0);\n        if (lastMsgIndex === -1) {\n            this.messageWrapper.appendChild(this.createTimebreakElement(currentMessageDate));\n        }\n        else if (index > 0) {\n            var lastMessageDate = this.getMessageDate(lastMsgIndex);\n            lastMessageDate.setHours(0, 0, 0, 0);\n            if ((currentMessageDate.getTime() !== lastMessageDate.getTime()) && !loadOldChat) {\n                this.messageWrapper.appendChild(this.createTimebreakElement(currentMessageDate));\n            }\n        }\n    };\n    ChatUI.prototype.renderNewMessage = function (msg, index) {\n        if (this.isEmptyChatTemplateRendered) {\n            var introContainer = this.messageWrapper.querySelector('.e-empty-chat-template');\n            this.messageWrapper.removeChild(introContainer);\n            this.isEmptyChatTemplateRendered = false;\n        }\n        this.renderGroup(this.messageWrapper, msg, false, index, index - 1);\n    };\n    ChatUI.prototype.loadMoreMessages = function () {\n        var _this = this;\n        if (this.startIndex <= 0) {\n            return;\n        }\n        var currentScrollOffset = this.messageWrapper.scrollHeight - this.messageWrapper.scrollTop;\n        showSpinner(this.messageWrapper);\n        setTimeout(function () {\n            hideSpinner(_this.messageWrapper);\n            var endIndex = _this.startIndex; // To slice up to the previously rendered message items.\n            _this.startIndex = Math.max(0, _this.startIndex - _this.batchSize);\n            var nextBatchMessages = _this.messages.slice(_this.startIndex, endIndex);\n            nextBatchMessages.reverse().forEach(function (msg, i) {\n                var currIndex = (endIndex - i) - 1; // To pass the actual index of the reversed item.\n                var prevIndex = currIndex + 1;\n                _this.updateMessageTimeFormats(msg, currIndex);\n                var currentMessageDate = _this.getMessageDate(currIndex);\n                currentMessageDate.setHours(0, 0, 0, 0);\n                var lastMessageDate = _this.getMessageDate(prevIndex);\n                lastMessageDate.setHours(0, 0, 0, 0);\n                if (currIndex >= 0) {\n                    if (currentMessageDate.getTime() === lastMessageDate.getTime()) {\n                        var prevTimeBreak = _this.messageWrapper.querySelectorAll('.e-timebreak')[0];\n                        if (prevTimeBreak) {\n                            prevTimeBreak.remove();\n                        }\n                    }\n                }\n                _this.renderGroup(_this.messageWrapper, msg, true, currIndex, prevIndex);\n                _this.messageWrapper.prepend(_this.createTimebreakElement(currentMessageDate));\n                _this.messageWrapper.scrollTop = _this.messageWrapper.scrollHeight - currentScrollOffset;\n            });\n        }, 1000);\n    };\n    ChatUI.prototype.updateMessageTimeFormats = function (msg, index) {\n        var fullTime = this.getFormattedTime(msg.timeStamp\n            ? msg.timeStamp\n            : new Date(), 'dd/MM/yyyy hh:mm a');\n        this.updateTimeFormats(msg.timeStampFormat, fullTime, index);\n    };\n    ChatUI.prototype.getMessageDate = function (index) {\n        return new Date(this.messages[parseInt(index.toString(), 10)].timeStamp);\n    };\n    ChatUI.prototype.renderChatSuggestionsElement = function () {\n        if (!isNOU(this.suggestions) && this.suggestions.length > 0) {\n            this.renderSuggestions(this.suggestions, null, this.suggestionTemplate, 'suggestion', 'suggestionTemplate', this.onSuggestionClick);\n        }\n    };\n    ChatUI.prototype.handleSuggestionUpdate = function () {\n        if (this.suggestionsElement) {\n            this.suggestionsElement.remove();\n        }\n        if (!isNOU(this.suggestions) && this.suggestions.length > 0) {\n            this.renderSuggestions(this.suggestions, null, this.suggestionTemplate, 'suggestion', 'suggestionTemplate', this.onSuggestionClick);\n        }\n        this.toggleScrollIcon();\n    };\n    ChatUI.prototype.onSuggestionClick = function (e) {\n        this.suggestionsElement.hidden = true;\n        this.textareaObj.value = e.target.innerText;\n        this.onSendIconClick(e);\n    };\n    ChatUI.prototype.renderChatFooterContent = function () {\n        this.footer = this.getElement('footer');\n        var footerClass = \"e-footer \" + (this.footerTemplate ? 'e-footer-template' : '');\n        this.footer.className = footerClass;\n        this.renderChatFooter();\n        this.viewWrapper.append(this.footer);\n        this.updateFooter(this.showFooter, this.footer);\n    };\n    ChatUI.prototype.renderChatFooter = function () {\n        var _this = this;\n        this.textareaObj = this.renderFooterContent(this.footerTemplate, this.footer, '', this.placeholder, false, this.getRowCount(''), 'e-chat-textarea');\n        var sendIconClass = 'e-chat-send e-icons disabled';\n        if (!this.footerTemplate) {\n            this.sendIcon = this.renderSendIcon(sendIconClass, this.footer);\n        }\n        if (this.textareaObj) {\n            this.textareaObj.input = this.handleInput.bind(this);\n            this.textareaObj.blur = function (args) { return _this.triggerUserTyping(args.event, args.value); };\n            if (!isNOU(this.textareaObj.value)) {\n                this.activateSendIcon(this.textareaObj.value.length);\n            }\n        }\n    };\n    ChatUI.prototype.handleInput = function (args) {\n        this.triggerUserTyping(args.event, args.value);\n        this.activateSendIcon(args.value.length);\n        this.updateTextAreaObject(args.value);\n    };\n    ChatUI.prototype.triggerUserTyping = function (event, value) {\n        var eventArgs = {\n            event: event,\n            message: value,\n            user: this.user,\n            isTyping: event.type === 'blur' ? false : value.length > 0 ? true : false\n        };\n        this.trigger('userTyping', eventArgs);\n    };\n    ChatUI.prototype.renderTypingIndicator = function () {\n        var _this = this;\n        this.l10n = new L10n('chat-ui', {\n            oneUserTyping: '{0} is typing',\n            twoUserTyping: '{0} and {1} are typing',\n            threeUserTyping: '{0}, {1}, and {2} other are typing',\n            multipleUsersTyping: '{0}, {1}, and {2} others are typing'\n        }, this.locale);\n        if (this.indicatorWrapper) {\n            this.indicatorWrapper.remove();\n        }\n        if (!this.typingUsers || this.typingUsers.length === 0) {\n            return;\n        }\n        this.indicatorWrapper = this.createElement('div', {\n            className: \"e-typing-indicator \" + (this.typingUsersTemplate ? 'e-typing-indicator-template' : '')\n        });\n        if (this.typingUsersTemplate) {\n            this.getContextObject('typingUsersTemplate', this.indicatorWrapper, null, null, null);\n        }\n        else {\n            this.typingUsers.slice(0, 3).forEach(function (user) {\n                var avatarElement = _this.createAvatarIcon(user, true);\n                _this.indicatorWrapper.appendChild(avatarElement);\n            });\n            var typingMessage = this.createElement('span', { className: 'e-user-text' });\n            this.indicatorWrapper.appendChild(typingMessage);\n            this.updateUserText();\n            var indicatorContainer = this.createElement('div', { className: 'e-indicator-wrapper' });\n            for (var i = 0; i < 3; i++) {\n                var indicator = this.createElement('span', {\n                    className: 'e-indicator'\n                });\n                this.appendChildren(indicatorContainer, indicator);\n            }\n            this.indicatorWrapper.appendChild(indicatorContainer);\n        }\n        this.content.prepend(this.indicatorWrapper);\n    };\n    ChatUI.prototype.updateUserText = function () {\n        var _this = this;\n        if (this.typingUsersTemplate) {\n            return;\n        }\n        this.l10n.setLocale(this.locale);\n        var userNames = this.typingUsers.filter(function (user) { return user.user !== _this.user.user; })\n            .map(function (user) { return user.user; });\n        var displayText = this.getTypingMessage(userNames);\n        var typingMessage = this.indicatorWrapper.querySelector('.e-user-text');\n        typingMessage.innerHTML = displayText;\n    };\n    ChatUI.prototype.getTypingMessage = function (userNames) {\n        if (userNames.length >= 3) {\n            return this.l10n.getConstant(userNames.length > 3 ? 'multipleUsersTyping' : 'threeUserTyping')\n                .replace('{0}', userNames[0].toString())\n                .replace('{1}', userNames[1].toString())\n                .replace('{2}', (userNames.length - 2).toString());\n        }\n        else {\n            var userTemplate = this.l10n.getConstant(userNames.length === 2 ? 'twoUserTyping' : 'oneUserTyping');\n            return userNames.length === 2\n                ? userTemplate.replace('{0}', userNames[0].toString()).replace('{1}', userNames[1].toString())\n                : userTemplate.replace('{0}', userNames[0].toString());\n        }\n    };\n    ChatUI.prototype.updateTypingUsers = function (users) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.typingUsers = users;\n        this.isProtectedOnChange = prevOnChange;\n        this.renderTypingIndicator();\n    };\n    ChatUI.prototype.updateTextAreaObject = function (textValue) {\n        var rowCount = this.getRowCount(textValue);\n        this.textareaObj.rows = rowCount;\n        this.textareaObj.cssClass = (rowCount >= 10) ? 'show-scrollbar' : 'hide-scrollbar';\n    };\n    ChatUI.prototype.getRowCount = function (textValue) {\n        var lines = textValue.split('\\n').length;\n        return (lines < 10 ? (lines >= 1 ? lines : 1) : 10);\n    };\n    ChatUI.prototype.activateSendIcon = function (value) {\n        this.sendIcon.classList.toggle('disabled', value === 0);\n        this.sendIcon.classList.toggle('enabled', value > 0);\n    };\n    ChatUI.prototype.updateHeaderIcon = function () {\n        var existingIconElement = this.element.querySelector('.e-header-icon');\n        if (existingIconElement) {\n            existingIconElement.className = \"e-header-icon e-icons \" + this.headerIconCss;\n        }\n        else {\n            var headerContainer = this.element.querySelector('.e-header');\n            if (headerContainer) {\n                var iconElement = this.createElement('span', {\n                    className: \"e-header-icon e-icons \" + this.headerIconCss\n                });\n                headerContainer.prepend(iconElement);\n            }\n        }\n    };\n    ChatUI.prototype.updateHeaderText = function () {\n        if (this.headerText) {\n            var headerTextEle = this.element.querySelector('.e-header-text');\n            if (headerTextEle) {\n                headerTextEle.innerHTML = this.headerText;\n            }\n        }\n    };\n    ChatUI.prototype.renderUpdatedMessage = function () {\n        this.lastUser = '';\n        this.messageWrapper.innerHTML = '';\n        this.renderMessageGroup(this.messageWrapper);\n    };\n    ChatUI.prototype.onSendIconClick = function (event) {\n        var _this = this;\n        if (!this.textareaObj.value.trim()) {\n            return;\n        }\n        var newMessageObj = {\n            id: getUniqueID('e-message-'),\n            author: this.user,\n            text: this.textareaObj.value\n        };\n        var prevOnChange = this.isProtectedOnChange;\n        this.textareaObj.value = '';\n        this.activateSendIcon(this.textareaObj.value.length);\n        var eventArgs = {\n            cancel: false,\n            message: newMessageObj\n        };\n        this.triggerUserTyping(event, '');\n        this.trigger('messageSend', eventArgs, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            newMessageObj = args.message;\n            _this.isProtectedOnChange = true;\n            _this.messages = _this.messages.concat([newMessageObj]);\n            _this.isProtectedOnChange = prevOnChange;\n            _this.renderNewMessage(newMessageObj, (_this.messages.length - 1));\n        });\n        if (this.suggestionsElement) {\n            this.suggestionsElement.hidden = false;\n        }\n        this.scrollToBottom();\n    };\n    ChatUI.prototype.getContextObject = function (templateName, contentElement, index, message, currentMessagedate) {\n        var template;\n        var context = {};\n        switch (templateName.toLowerCase()) {\n            case 'messagetemplate': {\n                template = this.messageTemplate;\n                context = { message: message, index: index };\n                break;\n            }\n            case 'timebreaktemplate': {\n                template = this.timeBreakTemplate;\n                context = { messageDate: currentMessagedate };\n                break;\n            }\n            case 'typinguserstemplate': {\n                template = this.typingUsersTemplate;\n                context = { users: this.typingUsers };\n                break;\n            }\n        }\n        this.updateContent(template, contentElement, context, templateName);\n    };\n    ChatUI.prototype.handleAutoScroll = function () {\n        if (this.isScrollAtBottom) {\n            this.updateScroll(this.messageWrapper);\n        }\n        if (this.autoScrollToBottom) {\n            this.updateScroll(this.messageWrapper);\n        }\n        this.toggleScrollIcon();\n    };\n    ChatUI.prototype.footerKeyHandler = function (e) {\n        this.keyHandler(e, 'footer');\n    };\n    ChatUI.prototype.scrollBottomKeyHandler = function (e) {\n        this.keyHandler(e, 'scrollBottom');\n    };\n    ChatUI.prototype.keyHandler = function (event, value) {\n        if (event.key === 'Enter' && !event.shiftKey) {\n            switch (value) {\n                case 'footer':\n                    event.preventDefault();\n                    this.onSendIconClick(event);\n                    this.updateTextAreaObject(this.textareaObj.value);\n                    break;\n                case 'scrollBottom':\n                    this.scrollToBottom();\n                    break;\n            }\n        }\n    };\n    ChatUI.prototype.updateFooter = function (showFooter, footerElement) {\n        if (!showFooter) {\n            footerElement.hidden = true;\n        }\n        else {\n            footerElement.hidden = false;\n        }\n    };\n    ChatUI.prototype.handleScroll = function () {\n        var atBottom = this.checkScrollAtBottom();\n        if (atBottom) {\n            this.toggleClassName(this.downArrowIcon.element, atBottom, 'downArrow');\n            var suggestionEle = this.element.querySelector('.e-suggestions');\n            if (suggestionEle) {\n                this.toggleClassName(suggestionEle, atBottom, 'suggestion');\n                if (!atBottom || !this.isScrollAtBottom) {\n                    this.updateScroll(this.messageWrapper);\n                }\n            }\n        }\n        if (this.loadOnDemand && this.messageWrapper.scrollTop === 0) {\n            this.loadMoreMessages();\n        }\n        this.isScrollAtBottom = atBottom;\n    };\n    ChatUI.prototype.checkScrollAtBottom = function () {\n        var scrollThreshold = 5;\n        var scrollTop = Math.floor(this.messageWrapper.scrollTop);\n        var scrollHeight = Math.floor(this.messageWrapper.scrollHeight);\n        var clientHeight = Math.floor(this.messageWrapper.clientHeight);\n        return scrollHeight - scrollTop <= clientHeight + scrollThreshold;\n    };\n    ChatUI.prototype.toggleClassName = function (element, atBottom, name) {\n        switch (name) {\n            case 'downArrow':\n                element.classList.toggle('e-arrowdown-hide', atBottom);\n                element.classList.toggle('e-arrowdown-show', !atBottom);\n                break;\n            case 'suggestion':\n                element.classList.toggle('e-show-suggestions', atBottom);\n                element.classList.toggle('e-hide-suggestions', !atBottom);\n                break;\n            case 'scroll':\n                element.classList.toggle('e-scroll-smooth', !atBottom);\n                break;\n        }\n    };\n    ChatUI.prototype.toggleScrollIcon = function () {\n        var atBottom = this.checkScrollAtBottom();\n        this.toggleClassName(this.downArrowIcon.element, atBottom, 'downArrow');\n        var suggestionEle = this.element.querySelector('.e-suggestions');\n        if (suggestionEle) {\n            this.toggleClassName(suggestionEle, atBottom, 'suggestion');\n            if (atBottom) {\n                this.updateScroll(this.messageWrapper);\n            }\n        }\n        this.isScrollAtBottom = atBottom;\n    };\n    ChatUI.prototype.scrollBtnClick = function () {\n        this.toggleClassName(this.messageWrapper, false, 'scroll');\n        this.scrollToBottom();\n        this.toggleClassName(this.messageWrapper, true, 'scroll');\n    };\n    ChatUI.prototype.wireEvents = function () {\n        this.wireFooterEvents(this.sendIcon, this.footer, this.footerTemplate);\n        EventHandler.add(this.messageWrapper, 'scroll', this.handleScroll, this);\n        EventHandler.add(this.downArrowIcon.element, 'click', this.scrollBtnClick, this);\n        EventHandler.add(this.downArrowIcon.element, 'keydown', this.scrollBottomKeyHandler, this);\n    };\n    ChatUI.prototype.unwireEvents = function () {\n        this.unWireFooterEvents(this.sendIcon, this.footer, this.footerTemplate);\n        EventHandler.remove(this.messageWrapper, 'scroll', this.handleScroll);\n        EventHandler.remove(this.downArrowIcon.element, 'click', this.scrollBtnClick);\n        EventHandler.remove(this.downArrowIcon.element, 'keydown', this.scrollBottomKeyHandler);\n    };\n    ChatUI.prototype.destroyChatUI = function () {\n        var properties = [\n            'content',\n            'sendIcon',\n            'footer',\n            'indicatorWrapper',\n            'messageWrapper',\n            'viewWrapper',\n            'chatHeader'\n        ];\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            var element = prop;\n            this.removeAndNullify(this[element]);\n            this[element] = null;\n        }\n    };\n    /**\n     * Scrolls to the last message in the conversation area of the Chat UI component.\n     * This method allows programmatic control to ensure the chat view is scrolled to the bottom, typically used when new messages are added or to refocus on the most recent conversation.\n     *\n     * @returns {void}\n     */\n    ChatUI.prototype.scrollToBottom = function () {\n        this.updateScroll(this.messageWrapper);\n        this.toggleScrollIcon();\n    };\n    /**\n     * Appends a new message to the end of the Chat UI conversation area.\n     * This method adds the specified message as the latest entry in the chat:\n     *\n     * @function addMessage\n     * @param {string | MessageModel} message - The message to be added to the conversation. Accepts either a plain text string or a `MessageModel` object.\n     * - If `message` is a string, a `MessageModel` will be automatically created with the current user’s details, and the message will be appended.\n     * - If `message` is an instance of `MessageModel`, it can represent a message from either the current user or another participant and will be appended directly.\n     * @returns {void} No return value.\n     */\n    ChatUI.prototype.addMessage = function (message) {\n        if (isNOU(message)) {\n            return;\n        }\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        if (typeof message === 'string') {\n            var newMessageObj = {\n                id: getUniqueID('e-message-'),\n                author: this.user,\n                text: message,\n                timeStamp: new Date(),\n                timeStampFormat: this.timeStampFormat\n            };\n            this.messages = this.messages.concat([newMessageObj]);\n            this.renderNewMessage(newMessageObj, (this.messages.length - 1));\n        }\n        else {\n            this.messages = this.messages.concat([message]);\n            this.renderNewMessage(message, (this.messages.length - 1));\n        }\n        this.handleAutoScroll();\n        this.isProtectedOnChange = prevOnChange;\n    };\n    /**\n     * Updates an existing message in the Chat UI component.\n     * This method allows for modifying a message that has already been added to the conversation.\n     * It requires the unique identifier of the message to be updated and the new message content as a `MessageModel`.\n     *\n     * @function updateMessage\n     * @param {MessageModel} message - The updated message content represented as a `MessageModel`.\n     * @param {string} msgId - The unique identifier of the message to be updated.\n     * @returns {void} No return value.\n     */\n    ChatUI.prototype.updateMessage = function (message, msgId) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.messages = this.messages.map(function (messageItem) {\n            return messageItem.id === msgId ? __assign({}, messageItem, message) : messageItem;\n        });\n        this.renderUpdatedMessage();\n        this.isProtectedOnChange = prevOnChange;\n    };\n    ChatUI.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.unwireEvents();\n        if (this.cssClass) {\n            removeClass([this.element], this.cssClass.split(' '));\n        }\n        this.element.classList.remove('e-rtl');\n        this.destroyAndNullify(this.textareaObj);\n        this.destroyAndNullify(this.downArrowIcon);\n        this.destroyAndNullify(this.toolbar);\n        this.destroyChatUI();\n        this.intl = null;\n        this.lastUser = null;\n    };\n    /**\n     * Called if any of the property value is changed.\n     *\n     * @param  {ChatUIModel} newProp - Specifies new properties\n     * @param  {ChatUIModel} oldProp - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    ChatUI.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'width':\n                case 'height':\n                    this.setDimension(this.element, this.width, this.height);\n                    break;\n                case 'placeholder':\n                    if (this.textareaObj) {\n                        this.textareaObj.placeholder = this.placeholder;\n                    }\n                    break;\n                case 'cssClass':\n                    this.updateCssClass(this.element, newProp.cssClass, oldProp.cssClass);\n                    break;\n                case 'enableRtl':\n                    this.element.classList[this.enableRtl ? 'add' : 'remove']('e-rtl');\n                    if (!isNOU(this.toolbar)) {\n                        this.toolbar.enableRtl = this.enableRtl;\n                        this.toolbar.dataBind();\n                    }\n                    break;\n                case 'showHeader':\n                    this.updateHeader(this.showHeader, this.chatHeader, this.viewWrapper);\n                    break;\n                case 'headerText':\n                    this.updateHeaderText();\n                    break;\n                case 'headerIconCss':\n                    this.updateHeaderIcon();\n                    break;\n                case 'messages': {\n                    this.renderUpdatedMessage();\n                    this.handleAutoScroll();\n                    break;\n                }\n                case 'user': {\n                    var newUser = {\n                        id: newProp.user.id,\n                        user: newProp.user.user,\n                        avatarUrl: newProp.user.avatarUrl,\n                        avatarBgColor: newProp.user.avatarBgColor,\n                        cssClass: newProp.user.cssClass\n                    };\n                    this.user = __assign({}, this.user, newUser);\n                    break;\n                }\n                case 'showTimeStamp':\n                case 'timeStampFormat':\n                case 'showTimeBreak':\n                    if (this.messages.length > 0) {\n                        this.renderUpdatedMessage();\n                    }\n                    break;\n                case 'showFooter':\n                    this.updateFooter(this.showFooter, this.footer);\n                    break;\n                case 'autoScrollToBottom':\n                    this.handleAutoScroll();\n                    break;\n                case 'suggestions':\n                    this.handleSuggestionUpdate();\n                    break;\n                case 'typingUsers':\n                    this.updateTypingUsers(this.typingUsers);\n                    break;\n                case 'locale':\n                    if (!this.typingUsers || this.typingUsers.length === 0) {\n                        return;\n                    }\n                    this.updateUserText();\n                    break;\n                case 'headerToolbar':\n                    this.updateHeaderToolbar();\n                    break;\n                case 'currencyCode':\n                    this.refresh();\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Property('100%')\n    ], ChatUI.prototype, \"width\", void 0);\n    __decorate([\n        Property('100%')\n    ], ChatUI.prototype, \"height\", void 0);\n    __decorate([\n        Complex({}, User)\n    ], ChatUI.prototype, \"user\", void 0);\n    __decorate([\n        Property('Chat')\n    ], ChatUI.prototype, \"headerText\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"headerIconCss\", void 0);\n    __decorate([\n        Property('Type your message…')\n    ], ChatUI.prototype, \"placeholder\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(true)\n    ], ChatUI.prototype, \"showHeader\", void 0);\n    __decorate([\n        Property(true)\n    ], ChatUI.prototype, \"showFooter\", void 0);\n    __decorate([\n        Complex({ items: [] }, ToolbarSettings)\n    ], ChatUI.prototype, \"headerToolbar\", void 0);\n    __decorate([\n        Property([])\n    ], ChatUI.prototype, \"suggestions\", void 0);\n    __decorate([\n        Property(false)\n    ], ChatUI.prototype, \"showTimeBreak\", void 0);\n    __decorate([\n        Collection([], Message)\n    ], ChatUI.prototype, \"messages\", void 0);\n    __decorate([\n        Collection([], User)\n    ], ChatUI.prototype, \"typingUsers\", void 0);\n    __decorate([\n        Property('dd/MM/yyyy hh:mm a')\n    ], ChatUI.prototype, \"timeStampFormat\", void 0);\n    __decorate([\n        Property(true)\n    ], ChatUI.prototype, \"showTimeStamp\", void 0);\n    __decorate([\n        Property(false)\n    ], ChatUI.prototype, \"autoScrollToBottom\", void 0);\n    __decorate([\n        Property(false)\n    ], ChatUI.prototype, \"loadOnDemand\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"suggestionTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"emptyChatTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"messageTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"timeBreakTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], ChatUI.prototype, \"typingUsersTemplate\", void 0);\n    __decorate([\n        Event()\n    ], ChatUI.prototype, \"messageSend\", void 0);\n    __decorate([\n        Event()\n    ], ChatUI.prototype, \"userTyping\", void 0);\n    ChatUI = __decorate([\n        NotifyPropertyChanges\n    ], ChatUI);\n    return ChatUI;\n}(InterActiveChatBase));\nexport { ChatUI };\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","_super","__extends","__","this","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","ToolbarItem","ChildProperty","Property","apply","ToolbarSettings","Collection","Event","Component","InterActiveChatBase","preRender","getModuleName","getPersistData","addOnPersist","render","setDimension","element","width","height","style","isNOU","formatUnit","addCssClass","cssClass","classList","add","addRtlClass","isRtl","updateCssClass","newClass","oldClass","removeClass","trim","split","addClass","updateHeader","showHeader","headerElement","viewWrapper","hidden","renderViewSections","headerClassName","viewClassName","headerWrapper","createElement","attrs","class","appendChild","createViewComponents","contentWrapper","viewContainer","updateScroll","scrollElement","scrollTo","scrollHeight","getElement","className","createSuggestionElement","suggestionHeader","suggestionContainer","suggestionHeaderElement","suggestionListElement","renderSuggestions","suggestionsArray","suggestionTemplate","contextName","templateName","onSuggestionClick","suggestionList","isSuggestionTemplate","_a","suggestionsElement","renderSuggestionList","innerHTML","append","content","suggestionWrapper","_this","suggestionsListElement","tabindex","forEach","suggestion","attributes","EventHandler","suggestionItemHandler","index","parseInt","toString","updateContent","event","shiftKey","renderBannerView","bannerTemplate","parentElement","introContainer","prepend","template","contentElement","context","isReact","clearTemplate","notCompile","isVue","ctn","getTemplateFunction","renderReactTemplates","renderFooterContent","footerTemplate","footer","prompt","promptPlaceholder","showClearButton","rowCount","textareaEle","renderFooter","textareaElement","textareaObj","TextArea","rows","cols","placeholder","resizeMode","value","appendTo","renderSendIcon","sendIconClass","sendIcon","role","aria-label","appendChildren","children","_i","insertBeforeChildren","wireFooterEvents","onSendIconClick","footerKeyHandler","unWireFooterEvents","remove","removeAndNullify","parentNode","destroyAndNullify","obj","destroy","compile","tempEle","select","tagName","outerHTML","e","onPropertyChanged","newProp","oldProp","NotifyPropertyChanges","options","call","ASSISTHEADER","Prompt","AssistViewType","AssistView","PromptToolbarSettings","ResponseToolbarSettings","AIAssistView","id","getUniqueID","getDirective","renderPromptView","renderViews","renderToolbar","wireEvents","updateHeaderToolbar","assistViewTemplateIndex","displayContents","unshift","assistCustomSection","previousElement","activeView","renderHeaderToolbar","querySelector","updateActiveView","toolbarHeader","aiAssistViewRendered","enableRtl","isAssistView","isOutputRenderingStop","isResponseRequested","assistView","customViewTemplate","isAssistViewAssigned","customViewCount","views","type","toLocaleLowerCase","getContextObject","push","toolbarItems","text","name","prefixIcon","iconCss","htmlAttributes","data-index","viewTemplate","renderDefaultView","toolbarEle","toolbar","Toolbar","items","clicked","args","previousIndex","eventArgs","item","tooltip","tooltipText","disabled","visible","align","tabIndex","originalEvent","cancel","toolbarSettings","itemClicked","prevOnChange","isProtectedOnChange","getIndex","setAttribute","pushToolbar","map","concat","currentIndex","activeViewIndex","removePreviousView","appendView","tbarEle","stopResponding","removeChild","contentContainer","footerClass","renderContent","renderAssistViewFooter","renderStopResponding","stopRespondingIcon","stopRespondingContent","l10n","L10n","stopResponseText","locale","updateStopRespondingTitle","setLocale","textContent","getConstant","promptSuggestions","promptSuggestionsHeader","promptSuggestionItemTemplate","renderOutputContent","outputElement","renderSkeleton","isMethodCall","responseToolbarSettings","prompts","renderOutputContainer","response","contains","insertBefore","getRowCount","input","handleInput","bind","activateSendIcon","updateTextAreaObject","previousValue","trigger","textValue","lines","toggle","keyHandler","stopResponseKeyHandler","respondingStopper","unWireEvents","detachCodeCopyEventHandler","preTagElements","preTag","handler","copyIcon","preventDefault","hasChildNodes","skeletonContainer","innerText","addPrompt","createOutputElement","responseToolbarItems","scrollToBottom","isResponseHelpful","arrayPosition","contextIndex","contextPrompt","contextOutput","toLowerCase","promptItemTemplate","promptToolbarSettings","responseItemTemplate","outputSuggestionEle","renderPrompt","promptText","outputText","outputContainer","renderOutput","promptIcon","responseIconCss","aiOutputEle","lastPrompt","contentFooterEle","renderOutputToolbarItems","renderOutputTextContainer","outputContentBodyEle","from","querySelectorAll","document","firstChild","getCopyHandler","preText","window","navigator","clipboard","writeText","setTimeout","footerContent","renderResponseToolbar","responseToolbarEle","toolbarItem","dataIndex","handleItemClick","getClipBoardContent","tempElement","top","left","position","opacity","body","write","ClipboardItem","text/html","Blob","text/plain","promptItem","icon","controlParent","dataBind","isLikeInteracted","isDislikeInteracted","isHelpful","controlParentItems","promptIndex","outputPrompt","promptContent","promptToolbarContainer","promptToolbar","userIcon","promptIconCss","renderPromptToolbar","promptToolbarEle","onEditIconClick","outputViewWrapper","skeletonIconEle","skeletonBodyEle","skeletonFooterEle","skeletonLine1","skeletonLine2","skeletonLine3","footerSkeleton","focusIn","updateIcons","newCss","isPromptIconCss","elements","updateToolbarSettings","previousToolbar","splice","destroyAssistView","properties_1","executePrompt","addPromptResponse","promptData","undefined","tPrompt","keys","previousViewIndex","Complex","__assign","assign","t","s","n","MessageStatus","User","Message","ChatUI","renderChatUIView","intl","Internationalization","chatHeader","renderChatHeader","renderChatContentElement","renderChatSuggestionsElement","renderChatFooterContent","messages","emptyChatTemplate","messageWrapper","isEmptyChatTemplateRendered","renderTypingIndicator","headerContainer","headerTextElement","headerText","headerIconCss","iconElement","renderChatHeaderToolbar","headerToolbar","renderMessageGroup","renderScrollDown","scrollDownButton","downArrowIcon","Fab","isPrimary","chatContentWrapper","loadOnDemand","createSpinner","startIndex","Math","max","initialLoadSize","slice","msg","currIndex","renderGroup","isTimeBreakAdded","loadOldChat","firstElementChild","lastElementChild","prevIndex","messageGroup","avatarElement","updateMessageTimeFormats","handleTimeBreak","author","user","lastUser","showTimeBreak","messageTemplate","manageChatContent","length_1","addGroupItems","isTimeVaries","createAvatarIcon","loadLeftGroupOnDemand","createLeftGroupItems","length_2","currentMessageDate","getMessageDate","setHours","lastMessageDate","getTime","userHeaderContainer","userHeader","timeSpan","getTimeStampElement","timeStamp","Date","timeStampFormat","isTypingUser","userName","nameParts","initials","avatarIcon","avatarUrl","avatarBgColor","backgroundColor","src","alt","formattedTime","getFormattedTime","showTimeStamp","updateTimeFormats","fullTime","parseDate","format","formatDate","getFormat","isUserTimeStampRendered","showStatus","messageItem","messageStatusWrapper","textElement","messageElement","statusIcon","status","title","statusText","parentItem","ChildItem","createTimebreakElement","date","timebreakDiv","timeBreakTemplate","timeStampEle","lastMsgIndex","renderNewMessage","loadMoreMessages","currentScrollOffset","scrollTop","showSpinner","hideSpinner","endIndex","batchSize","reverse","prevTimeBreak","suggestions","handleSuggestionUpdate","toggleScrollIcon","renderChatFooter","updateFooter","showFooter","blur","triggerUserTyping","message","isTyping","oneUserTyping","twoUserTyping","threeUserTyping","multipleUsersTyping","indicatorWrapper","typingUsers","typingUsersTemplate","typingMessage","indicatorContainer","updateUserText","indicator","displayText","userNames","filter","getTypingMessage","userTemplate","replace","updateTypingUsers","users","updateHeaderIcon","existingIconElement","updateHeaderText","headerTextEle","renderUpdatedMessage","newMessageObj","currentMessagedate","messageDate","handleAutoScroll","isScrollAtBottom","autoScrollToBottom","scrollBottomKeyHandler","footerElement","handleScroll","suggestionEle","atBottom","checkScrollAtBottom","toggleClassName","floor","clientHeight","scrollBtnClick","unwireEvents","destroyChatUI","addMessage","updateMessage","msgId","newUser","refresh"],"mappings":"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"}